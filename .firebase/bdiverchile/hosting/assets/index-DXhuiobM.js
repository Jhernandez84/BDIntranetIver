var HA=Object.defineProperty;var qA=(t,e,n)=>e in t?HA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var R=(t,e,n)=>qA(t,typeof e!="symbol"?e+"":e,n);function KA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var GA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J1={exports:{}},Hd={},Z1={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kc=Symbol.for("react.element"),QA=Symbol.for("react.portal"),YA=Symbol.for("react.fragment"),XA=Symbol.for("react.strict_mode"),JA=Symbol.for("react.profiler"),ZA=Symbol.for("react.provider"),eD=Symbol.for("react.context"),tD=Symbol.for("react.forward_ref"),nD=Symbol.for("react.suspense"),iD=Symbol.for("react.memo"),rD=Symbol.for("react.lazy"),uw=Symbol.iterator;function sD(t){return t===null||typeof t!="object"?null:(t=uw&&t[uw]||t["@@iterator"],typeof t=="function"?t:null)}var eS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tS=Object.assign,nS={};function ua(t,e,n){this.props=t,this.context=e,this.refs=nS,this.updater=n||eS}ua.prototype.isReactComponent={};ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iS(){}iS.prototype=ua.prototype;function gy(t,e,n){this.props=t,this.context=e,this.refs=nS,this.updater=n||eS}var my=gy.prototype=new iS;my.constructor=gy;tS(my,ua.prototype);my.isPureReactComponent=!0;var hw=Array.isArray,rS=Object.prototype.hasOwnProperty,yy={current:null},sS={key:!0,ref:!0,__self:!0,__source:!0};function oS(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)rS.call(e,i)&&!sS.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:kc,type:t,key:s,ref:o,props:r,_owner:yy.current}}function oD(t,e){return{$$typeof:kc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vy(t){return typeof t=="object"&&t!==null&&t.$$typeof===kc}function aD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dw=/\/+/g;function op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aD(""+t.key):e.toString(36)}function ih(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case kc:case QA:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+op(o,0):i,hw(r)?(n="",t!=null&&(n=t.replace(dw,"$&/")+"/"),ih(r,e,n,"",function(c){return c})):r!=null&&(vy(r)&&(r=oD(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(dw,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",hw(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+op(s,a);o+=ih(s,e,n,l,r)}else if(l=sD(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+op(s,a++),o+=ih(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lu(t,e,n){if(t==null)return t;var i=[],r=0;return ih(t,i,"","",function(s){return e.call(n,s,r++)}),i}function lD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},rh={transition:null},cD={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:rh,ReactCurrentOwner:yy};ie.Children={map:lu,forEach:function(t,e,n){lu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lu(t,function(){e++}),e},toArray:function(t){return lu(t,function(e){return e})||[]},only:function(t){if(!vy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=ua;ie.Fragment=YA;ie.Profiler=JA;ie.PureComponent=gy;ie.StrictMode=XA;ie.Suspense=nD;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cD;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=tS({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yy.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)rS.call(e,l)&&!sS.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:kc,type:t.type,key:r,ref:s,props:i,_owner:o}};ie.createContext=function(t){return t={$$typeof:eD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZA,_context:t},t.Consumer=t};ie.createElement=oS;ie.createFactory=function(t){var e=oS.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:tD,render:t}};ie.isValidElement=vy;ie.lazy=function(t){return{$$typeof:rD,_payload:{_status:-1,_result:t},_init:lD}};ie.memo=function(t,e){return{$$typeof:iD,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=rh.transition;rh.transition={};try{t()}finally{rh.transition=e}};ie.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ie.useCallback=function(t,e){return Ft.current.useCallback(t,e)};ie.useContext=function(t){return Ft.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};ie.useEffect=function(t,e){return Ft.current.useEffect(t,e)};ie.useId=function(){return Ft.current.useId()};ie.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Ft.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};ie.useRef=function(t){return Ft.current.useRef(t)};ie.useState=function(t){return Ft.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Ft.current.useTransition()};ie.version="18.2.0";Z1.exports=ie;var D=Z1.exports;const aS=X1(D),uD=KA({__proto__:null,default:aS},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hD=D,dD=Symbol.for("react.element"),fD=Symbol.for("react.fragment"),pD=Object.prototype.hasOwnProperty,gD=hD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mD={key:!0,ref:!0,__self:!0,__source:!0};function lS(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)pD.call(e,i)&&!mD.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:dD,type:t,key:s,ref:o,props:r,_owner:gD.current}}Hd.Fragment=fD;Hd.jsx=lS;Hd.jsxs=lS;J1.exports=Hd;var _=J1.exports,dg={},cS={exports:{}},ln={},uS={exports:{}},hS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,W){var G=L.length;L.push(W);e:for(;0<G;){var ye=G-1>>>1,_e=L[ye];if(0<r(_e,W))L[ye]=W,L[G]=_e,G=ye;else break e}}function n(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var W=L[0],G=L.pop();if(G!==W){L[0]=G;e:for(var ye=0,_e=L.length,Dn=_e>>>1;ye<Dn;){var Xt=2*(ye+1)-1,ti=L[Xt],Jt=Xt+1,au=L[Jt];if(0>r(ti,G))Jt<_e&&0>r(au,ti)?(L[ye]=au,L[Jt]=G,ye=Jt):(L[ye]=ti,L[Xt]=G,ye=Xt);else if(Jt<_e&&0>r(au,G))L[ye]=au,L[Jt]=G,ye=Jt;else break e}}return W}function r(L,W){var G=L.sortIndex-W.sortIndex;return G!==0?G:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var W=n(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=L)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function x(L){if(y=!1,v(L),!g)if(n(l)!==null)g=!0,se(b);else{var W=n(c);W!==null&&ge(x,W.startTime-L)}}function b(L,W){g=!1,y&&(y=!1,p(S),S=-1),f=!0;var G=d;try{for(v(W),h=n(l);h!==null&&(!(h.expirationTime>W)||L&&!A());){var ye=h.callback;if(typeof ye=="function"){h.callback=null,d=h.priorityLevel;var _e=ye(h.expirationTime<=W);W=t.unstable_now(),typeof _e=="function"?h.callback=_e:h===n(l)&&i(l),v(W)}else i(l);h=n(l)}if(h!==null)var Dn=!0;else{var Xt=n(c);Xt!==null&&ge(x,Xt.startTime-W),Dn=!1}return Dn}finally{h=null,d=G,f=!1}}var E=!1,k=null,S=-1,I=5,N=-1;function A(){return!(t.unstable_now()-N<I)}function $(){if(k!==null){var L=t.unstable_now();N=L;var W=!0;try{W=k(!0,L)}finally{W?U():(E=!1,k=null)}}else E=!1}var U;if(typeof m=="function")U=function(){m($)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,K=ee.port2;ee.port1.onmessage=$,U=function(){K.postMessage(null)}}else U=function(){w($,0)};function se(L){k=L,E||(E=!0,U())}function ge(L,W){S=w(function(){L(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,se(b))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var G=d;d=W;try{return L()}finally{d=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=d;d=L;try{return W()}finally{d=G}},t.unstable_scheduleCallback=function(L,W,G){var ye=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ye+G:ye):G=ye,L){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=G+_e,L={id:u++,callback:W,priorityLevel:L,startTime:G,expirationTime:_e,sortIndex:-1},G>ye?(L.sortIndex=G,e(c,L),n(l)===null&&L===n(c)&&(y?(p(S),S=-1):y=!0,ge(x,G-ye))):(L.sortIndex=_e,e(l,L),g||f||(g=!0,se(b))),L},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(L){var W=d;return function(){var G=d;d=W;try{return L.apply(this,arguments)}finally{d=G}}}})(hS);uS.exports=hS;var yD=uS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dS=D,sn=yD;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fS=new Set,Al={};function Hs(t,e){Bo(t,e),Bo(t+"Capture",e)}function Bo(t,e){for(Al[t]=e,t=0;t<e.length;t++)fS.add(e[t])}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fg=Object.prototype.hasOwnProperty,vD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fw={},pw={};function wD(t){return fg.call(pw,t)?!0:fg.call(fw,t)?!1:vD.test(t)?pw[t]=!0:(fw[t]=!0,!1)}function _D(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xD(t,e,n,i){if(e===null||typeof e>"u"||_D(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vt[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vt[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vt[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vt[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vt[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vt[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vt[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vt[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vt[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var wy=/[\-:]([a-z])/g;function _y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wy,_y);vt[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wy,_y);vt[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wy,_y);vt[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vt[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});vt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vt[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function xy(t,e,n,i){var r=vt.hasOwnProperty(e)?vt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xD(e,n,r,i)&&(n=null),i||r===null?wD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Pi=dS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cu=Symbol.for("react.element"),fo=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),by=Symbol.for("react.strict_mode"),pg=Symbol.for("react.profiler"),pS=Symbol.for("react.provider"),gS=Symbol.for("react.context"),Sy=Symbol.for("react.forward_ref"),gg=Symbol.for("react.suspense"),mg=Symbol.for("react.suspense_list"),Ey=Symbol.for("react.memo"),Ui=Symbol.for("react.lazy"),mS=Symbol.for("react.offscreen"),gw=Symbol.iterator;function ka(t){return t===null||typeof t!="object"?null:(t=gw&&t[gw]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,ap;function Ka(t){if(ap===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ap=e&&e[1]||""}return`
`+ap+t}var lp=!1;function cp(t,e){if(!t||lp)return"";lp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ka(t):""}function bD(t){switch(t.tag){case 5:return Ka(t.type);case 16:return Ka("Lazy");case 13:return Ka("Suspense");case 19:return Ka("SuspenseList");case 0:case 2:case 15:return t=cp(t.type,!1),t;case 11:return t=cp(t.type.render,!1),t;case 1:return t=cp(t.type,!0),t;default:return""}}function yg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case po:return"Fragment";case fo:return"Portal";case pg:return"Profiler";case by:return"StrictMode";case gg:return"Suspense";case mg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gS:return(t.displayName||"Context")+".Consumer";case pS:return(t._context.displayName||"Context")+".Provider";case Sy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ey:return e=t.displayName||null,e!==null?e:yg(t.type)||"Memo";case Ui:e=t._payload,t=t._init;try{return yg(t(e))}catch{}}return null}function SD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yg(e);case 8:return e===by?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ED(t){var e=yS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uu(t){t._valueTracker||(t._valueTracker=ED(t))}function vS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=yS(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Oh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vg(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function mw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=_r(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wS(t,e){e=e.checked,e!=null&&xy(t,"checked",e,!1)}function wg(t,e){wS(t,e);var n=_r(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_g(t,e.type,n):e.hasOwnProperty("defaultValue")&&_g(t,e.type,_r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _g(t,e,n){(e!=="number"||Oh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ga=Array.isArray;function To(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+_r(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Ga(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_r(n)}}function _S(t,e){var n=_r(e.value),i=_r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function ww(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hu,bS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hu=hu||document.createElement("div"),hu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kD=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){kD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function SS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function ES(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=SS(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var ID=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sg(t,e){if(e){if(ID[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Eg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kg=null;function ky(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ig=null,Co=null,No=null;function _w(t){if(t=Cc(t)){if(typeof Ig!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Yd(e),Ig(t.stateNode,t.type,e))}}function kS(t){Co?No?No.push(t):No=[t]:Co=t}function IS(){if(Co){var t=Co,e=No;if(No=Co=null,_w(t),e)for(t=0;t<e.length;t++)_w(e[t])}}function TS(t,e){return t(e)}function CS(){}var up=!1;function NS(t,e,n){if(up)return t(e,n);up=!0;try{return TS(t,e,n)}finally{up=!1,(Co!==null||No!==null)&&(CS(),IS())}}function Pl(t,e){var n=t.stateNode;if(n===null)return null;var i=Yd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Tg=!1;if(Si)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{Tg=!1}function TD(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var al=!1,Rh=null,Lh=!1,Cg=null,CD={onError:function(t){al=!0,Rh=t}};function ND(t,e,n,i,r,s,o,a,l){al=!1,Rh=null,TD.apply(CD,arguments)}function AD(t,e,n,i,r,s,o,a,l){if(ND.apply(this,arguments),al){if(al){var c=Rh;al=!1,Rh=null}else throw Error(O(198));Lh||(Lh=!0,Cg=c)}}function qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xw(t){if(qs(t)!==t)throw Error(O(188))}function DD(t){var e=t.alternate;if(!e){if(e=qs(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return xw(r),t;if(s===i)return xw(r),e;s=s.sibling}throw Error(O(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==i)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function DS(t){return t=DD(t),t!==null?PS(t):null}function PS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=PS(t);if(e!==null)return e;t=t.sibling}return null}var MS=sn.unstable_scheduleCallback,bw=sn.unstable_cancelCallback,PD=sn.unstable_shouldYield,MD=sn.unstable_requestPaint,We=sn.unstable_now,OD=sn.unstable_getCurrentPriorityLevel,Iy=sn.unstable_ImmediatePriority,OS=sn.unstable_UserBlockingPriority,Fh=sn.unstable_NormalPriority,RD=sn.unstable_LowPriority,RS=sn.unstable_IdlePriority,qd=null,Un=null;function LD(t){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(qd,t,void 0,(t.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:jD,FD=Math.log,$D=Math.LN2;function jD(t){return t>>>=0,t===0?32:31-(FD(t)/$D|0)|0}var du=64,fu=4194304;function Qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $h(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Qa(a):(s&=o,s!==0&&(i=Qa(s)))}else o=n&~r,o!==0?i=Qa(o):s!==0&&(i=Qa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-kn(e),r=1<<n,i|=t[n],e&=~r;return i}function BD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VD(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-kn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=BD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ng(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LS(){var t=du;return du<<=1,!(du&4194240)&&(du=64),t}function hp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ic(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kn(e),t[e]=n}function zD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-kn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Ty(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-kn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var fe=0;function FS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $S,Cy,jS,BS,VS,Ag=!1,pu=[],lr=null,cr=null,ur=null,Ml=new Map,Ol=new Map,qi=[],UD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sw(t,e){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(e.pointerId)}}function Ta(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Cc(e),e!==null&&Cy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function WD(t,e,n,i,r){switch(e){case"focusin":return lr=Ta(lr,t,e,n,i,r),!0;case"dragenter":return cr=Ta(cr,t,e,n,i,r),!0;case"mouseover":return ur=Ta(ur,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ml.set(s,Ta(Ml.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ol.set(s,Ta(Ol.get(s)||null,t,e,n,i,r)),!0}return!1}function zS(t){var e=us(t.target);if(e!==null){var n=qs(e);if(n!==null){if(e=n.tag,e===13){if(e=AS(n),e!==null){t.blockedOn=e,VS(t.priority,function(){jS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);kg=i,n.target.dispatchEvent(i),kg=null}else return e=Cc(n),e!==null&&Cy(e),t.blockedOn=n,!1;e.shift()}return!0}function Ew(t,e,n){sh(t)&&n.delete(e)}function HD(){Ag=!1,lr!==null&&sh(lr)&&(lr=null),cr!==null&&sh(cr)&&(cr=null),ur!==null&&sh(ur)&&(ur=null),Ml.forEach(Ew),Ol.forEach(Ew)}function Ca(t,e){t.blockedOn===e&&(t.blockedOn=null,Ag||(Ag=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,HD)))}function Rl(t){function e(r){return Ca(r,t)}if(0<pu.length){Ca(pu[0],t);for(var n=1;n<pu.length;n++){var i=pu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(lr!==null&&Ca(lr,t),cr!==null&&Ca(cr,t),ur!==null&&Ca(ur,t),Ml.forEach(e),Ol.forEach(e),n=0;n<qi.length;n++)i=qi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<qi.length&&(n=qi[0],n.blockedOn===null);)zS(n),n.blockedOn===null&&qi.shift()}var Ao=Pi.ReactCurrentBatchConfig,jh=!0;function qD(t,e,n,i){var r=fe,s=Ao.transition;Ao.transition=null;try{fe=1,Ny(t,e,n,i)}finally{fe=r,Ao.transition=s}}function KD(t,e,n,i){var r=fe,s=Ao.transition;Ao.transition=null;try{fe=4,Ny(t,e,n,i)}finally{fe=r,Ao.transition=s}}function Ny(t,e,n,i){if(jh){var r=Dg(t,e,n,i);if(r===null)xp(t,e,i,Bh,n),Sw(t,i);else if(WD(r,t,e,n,i))i.stopPropagation();else if(Sw(t,i),e&4&&-1<UD.indexOf(t)){for(;r!==null;){var s=Cc(r);if(s!==null&&$S(s),s=Dg(t,e,n,i),s===null&&xp(t,e,i,Bh,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else xp(t,e,i,null,n)}}var Bh=null;function Dg(t,e,n,i){if(Bh=null,t=ky(i),t=us(t),t!==null)if(e=qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bh=t,null}function US(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OD()){case Iy:return 1;case OS:return 4;case Fh:case RD:return 16;case RS:return 536870912;default:return 16}default:return 16}}var er=null,Ay=null,oh=null;function WS(){if(oh)return oh;var t,e=Ay,n=e.length,i,r="value"in er?er.value:er.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return oh=r.slice(t,1<i?1-i:void 0)}function ah(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gu(){return!0}function kw(){return!1}function cn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?gu:kw,this.isPropagationStopped=kw,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gu)},persist:function(){},isPersistent:gu}),e}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dy=cn(ha),Tc=Fe({},ha,{view:0,detail:0}),GD=cn(Tc),dp,fp,Na,Kd=Fe({},Tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Py,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Na&&(Na&&t.type==="mousemove"?(dp=t.screenX-Na.screenX,fp=t.screenY-Na.screenY):fp=dp=0,Na=t),dp)},movementY:function(t){return"movementY"in t?t.movementY:fp}}),Iw=cn(Kd),QD=Fe({},Kd,{dataTransfer:0}),YD=cn(QD),XD=Fe({},Tc,{relatedTarget:0}),pp=cn(XD),JD=Fe({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),ZD=cn(JD),eP=Fe({},ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tP=cn(eP),nP=Fe({},ha,{data:0}),Tw=cn(nP),iP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sP[t])?!!e[t]:!1}function Py(){return oP}var aP=Fe({},Tc,{key:function(t){if(t.key){var e=iP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ah(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Py,charCode:function(t){return t.type==="keypress"?ah(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ah(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lP=cn(aP),cP=Fe({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cw=cn(cP),uP=Fe({},Tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Py}),hP=cn(uP),dP=Fe({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),fP=cn(dP),pP=Fe({},Kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gP=cn(pP),mP=[9,13,27,32],My=Si&&"CompositionEvent"in window,ll=null;Si&&"documentMode"in document&&(ll=document.documentMode);var yP=Si&&"TextEvent"in window&&!ll,HS=Si&&(!My||ll&&8<ll&&11>=ll),Nw=" ",Aw=!1;function qS(t,e){switch(t){case"keyup":return mP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var go=!1;function vP(t,e){switch(t){case"compositionend":return KS(e);case"keypress":return e.which!==32?null:(Aw=!0,Nw);case"textInput":return t=e.data,t===Nw&&Aw?null:t;default:return null}}function wP(t,e){if(go)return t==="compositionend"||!My&&qS(t,e)?(t=WS(),oh=Ay=er=null,go=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HS&&e.locale!=="ko"?null:e.data;default:return null}}var _P={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_P[t.type]:e==="textarea"}function GS(t,e,n,i){kS(i),e=Vh(e,"onChange"),0<e.length&&(n=new Dy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var cl=null,Ll=null;function xP(t){sE(t,0)}function Gd(t){var e=vo(t);if(vS(e))return t}function bP(t,e){if(t==="change")return e}var QS=!1;if(Si){var gp;if(Si){var mp="oninput"in document;if(!mp){var Pw=document.createElement("div");Pw.setAttribute("oninput","return;"),mp=typeof Pw.oninput=="function"}gp=mp}else gp=!1;QS=gp&&(!document.documentMode||9<document.documentMode)}function Mw(){cl&&(cl.detachEvent("onpropertychange",YS),Ll=cl=null)}function YS(t){if(t.propertyName==="value"&&Gd(Ll)){var e=[];GS(e,Ll,t,ky(t)),NS(xP,e)}}function SP(t,e,n){t==="focusin"?(Mw(),cl=e,Ll=n,cl.attachEvent("onpropertychange",YS)):t==="focusout"&&Mw()}function EP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gd(Ll)}function kP(t,e){if(t==="click")return Gd(e)}function IP(t,e){if(t==="input"||t==="change")return Gd(e)}function TP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:TP;function Fl(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!fg.call(e,r)||!Cn(t[r],e[r]))return!1}return!0}function Ow(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rw(t,e){var n=Ow(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ow(n)}}function XS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JS(){for(var t=window,e=Oh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oh(t.document)}return e}function Oy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CP(t){var e=JS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XS(n.ownerDocument.documentElement,n)){if(i!==null&&Oy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Rw(n,s);var o=Rw(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NP=Si&&"documentMode"in document&&11>=document.documentMode,mo=null,Pg=null,ul=null,Mg=!1;function Lw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mg||mo==null||mo!==Oh(i)||(i=mo,"selectionStart"in i&&Oy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ul&&Fl(ul,i)||(ul=i,i=Vh(Pg,"onSelect"),0<i.length&&(e=new Dy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mo)))}function mu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yo={animationend:mu("Animation","AnimationEnd"),animationiteration:mu("Animation","AnimationIteration"),animationstart:mu("Animation","AnimationStart"),transitionend:mu("Transition","TransitionEnd")},yp={},ZS={};Si&&(ZS=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Qd(t){if(yp[t])return yp[t];if(!yo[t])return t;var e=yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ZS)return yp[t]=e[n];return t}var eE=Qd("animationend"),tE=Qd("animationiteration"),nE=Qd("animationstart"),iE=Qd("transitionend"),rE=new Map,Fw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){rE.set(t,e),Hs(e,[t])}for(var vp=0;vp<Fw.length;vp++){var wp=Fw[vp],AP=wp.toLowerCase(),DP=wp[0].toUpperCase()+wp.slice(1);Lr(AP,"on"+DP)}Lr(eE,"onAnimationEnd");Lr(tE,"onAnimationIteration");Lr(nE,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(iE,"onTransitionEnd");Bo("onMouseEnter",["mouseout","mouseover"]);Bo("onMouseLeave",["mouseout","mouseover"]);Bo("onPointerEnter",["pointerout","pointerover"]);Bo("onPointerLeave",["pointerout","pointerover"]);Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function $w(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,AD(i,e,void 0,t),t.currentTarget=null}function sE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;$w(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;$w(r,a,c),s=l}}}if(Lh)throw t=Cg,Lh=!1,Cg=null,t}function xe(t,e){var n=e[$g];n===void 0&&(n=e[$g]=new Set);var i=t+"__bubble";n.has(i)||(oE(e,t,2,!1),n.add(i))}function _p(t,e,n){var i=0;e&&(i|=4),oE(n,t,i,e)}var yu="_reactListening"+Math.random().toString(36).slice(2);function $l(t){if(!t[yu]){t[yu]=!0,fS.forEach(function(n){n!=="selectionchange"&&(PP.has(n)||_p(n,!1,t),_p(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yu]||(e[yu]=!0,_p("selectionchange",!1,e))}}function oE(t,e,n,i){switch(US(e)){case 1:var r=qD;break;case 4:r=KD;break;default:r=Ny}n=r.bind(null,e,n,t),r=void 0,!Tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function xp(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=us(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}NS(function(){var c=s,u=ky(n),h=[];e:{var d=rE.get(t);if(d!==void 0){var f=Dy,g=t;switch(t){case"keypress":if(ah(n)===0)break e;case"keydown":case"keyup":f=lP;break;case"focusin":g="focus",f=pp;break;case"focusout":g="blur",f=pp;break;case"beforeblur":case"afterblur":f=pp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Iw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=YD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=hP;break;case eE:case tE:case nE:f=ZD;break;case iE:f=fP;break;case"scroll":f=GD;break;case"wheel":f=gP;break;case"copy":case"cut":case"paste":f=tP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Cw}var y=(e&4)!==0,w=!y&&t==="scroll",p=y?d!==null?d+"Capture":null:d;y=[];for(var m=c,v;m!==null;){v=m;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,p!==null&&(x=Pl(m,p),x!=null&&y.push(jl(m,x,v)))),w)break;m=m.return}0<y.length&&(d=new f(d,g,null,n,u),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==kg&&(g=n.relatedTarget||n.fromElement)&&(us(g)||g[Ei]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=c,g=g?us(g):null,g!==null&&(w=qs(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(y=Iw,x="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=Cw,x="onPointerLeave",p="onPointerEnter",m="pointer"),w=f==null?d:vo(f),v=g==null?d:vo(g),d=new y(x,m+"leave",f,n,u),d.target=w,d.relatedTarget=v,x=null,us(u)===c&&(y=new y(p,m+"enter",g,n,u),y.target=v,y.relatedTarget=w,x=y),w=x,f&&g)t:{for(y=f,p=g,m=0,v=y;v;v=io(v))m++;for(v=0,x=p;x;x=io(x))v++;for(;0<m-v;)y=io(y),m--;for(;0<v-m;)p=io(p),v--;for(;m--;){if(y===p||p!==null&&y===p.alternate)break t;y=io(y),p=io(p)}y=null}else y=null;f!==null&&jw(h,d,f,y,!1),g!==null&&w!==null&&jw(h,w,g,y,!0)}}e:{if(d=c?vo(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var b=bP;else if(Dw(d))if(QS)b=IP;else{b=EP;var E=SP}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=kP);if(b&&(b=b(t,c))){GS(h,b,n,u);break e}E&&E(t,d,c),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&_g(d,"number",d.value)}switch(E=c?vo(c):window,t){case"focusin":(Dw(E)||E.contentEditable==="true")&&(mo=E,Pg=c,ul=null);break;case"focusout":ul=Pg=mo=null;break;case"mousedown":Mg=!0;break;case"contextmenu":case"mouseup":case"dragend":Mg=!1,Lw(h,n,u);break;case"selectionchange":if(NP)break;case"keydown":case"keyup":Lw(h,n,u)}var k;if(My)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else go?qS(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(HS&&n.locale!=="ko"&&(go||S!=="onCompositionStart"?S==="onCompositionEnd"&&go&&(k=WS()):(er=u,Ay="value"in er?er.value:er.textContent,go=!0)),E=Vh(c,S),0<E.length&&(S=new Tw(S,t,null,n,u),h.push({event:S,listeners:E}),k?S.data=k:(k=KS(n),k!==null&&(S.data=k)))),(k=yP?vP(t,n):wP(t,n))&&(c=Vh(c,"onBeforeInput"),0<c.length&&(u=new Tw("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=k))}sE(h,e)})}function jl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Pl(t,n),s!=null&&i.unshift(jl(t,s,r)),s=Pl(t,e),s!=null&&i.push(jl(t,s,r))),t=t.return}return i}function io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jw(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Pl(n,s),l!=null&&o.unshift(jl(n,l,a))):r||(l=Pl(n,s),l!=null&&o.push(jl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MP=/\r\n?/g,OP=/\u0000|\uFFFD/g;function Bw(t){return(typeof t=="string"?t:""+t).replace(MP,`
`).replace(OP,"")}function vu(t,e,n){if(e=Bw(e),Bw(t)!==e&&n)throw Error(O(425))}function zh(){}var Og=null,Rg=null;function Lg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fg=typeof setTimeout=="function"?setTimeout:void 0,RP=typeof clearTimeout=="function"?clearTimeout:void 0,Vw=typeof Promise=="function"?Promise:void 0,LP=typeof queueMicrotask=="function"?queueMicrotask:typeof Vw<"u"?function(t){return Vw.resolve(null).then(t).catch(FP)}:Fg;function FP(t){setTimeout(function(){throw t})}function bp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Rl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Rl(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var da=Math.random().toString(36).slice(2),Fn="__reactFiber$"+da,Bl="__reactProps$"+da,Ei="__reactContainer$"+da,$g="__reactEvents$"+da,$P="__reactListeners$"+da,jP="__reactHandles$"+da;function us(t){var e=t[Fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ei]||n[Fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zw(t);t!==null;){if(n=t[Fn])return n;t=zw(t)}return e}t=n,n=t.parentNode}return null}function Cc(t){return t=t[Fn]||t[Ei],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Yd(t){return t[Bl]||null}var jg=[],wo=-1;function Fr(t){return{current:t}}function Ie(t){0>wo||(t.current=jg[wo],jg[wo]=null,wo--)}function ve(t,e){wo++,jg[wo]=t.current,t.current=e}var xr={},Nt=Fr(xr),Kt=Fr(!1),Is=xr;function Vo(t,e){var n=t.type.contextTypes;if(!n)return xr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Gt(t){return t=t.childContextTypes,t!=null}function Uh(){Ie(Kt),Ie(Nt)}function Uw(t,e,n){if(Nt.current!==xr)throw Error(O(168));ve(Nt,e),ve(Kt,n)}function aE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(O(108,SD(t)||"Unknown",r));return Fe({},n,i)}function Wh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,Is=Nt.current,ve(Nt,t),ve(Kt,Kt.current),!0}function Ww(t,e,n){var i=t.stateNode;if(!i)throw Error(O(169));n?(t=aE(t,e,Is),i.__reactInternalMemoizedMergedChildContext=t,Ie(Kt),Ie(Nt),ve(Nt,t)):Ie(Kt),ve(Kt,n)}var li=null,Xd=!1,Sp=!1;function lE(t){li===null?li=[t]:li.push(t)}function BP(t){Xd=!0,lE(t)}function $r(){if(!Sp&&li!==null){Sp=!0;var t=0,e=fe;try{var n=li;for(fe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}li=null,Xd=!1}catch(r){throw li!==null&&(li=li.slice(t+1)),MS(Iy,$r),r}finally{fe=e,Sp=!1}}return null}var _o=[],xo=0,Hh=null,qh=0,hn=[],dn=0,Ts=null,hi=1,di="";function Zr(t,e){_o[xo++]=qh,_o[xo++]=Hh,Hh=t,qh=e}function cE(t,e,n){hn[dn++]=hi,hn[dn++]=di,hn[dn++]=Ts,Ts=t;var i=hi;t=di;var r=32-kn(i)-1;i&=~(1<<r),n+=1;var s=32-kn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,hi=1<<32-kn(e)+r|n<<r|i,di=s+t}else hi=1<<s|n<<r|i,di=t}function Ry(t){t.return!==null&&(Zr(t,1),cE(t,1,0))}function Ly(t){for(;t===Hh;)Hh=_o[--xo],_o[xo]=null,qh=_o[--xo],_o[xo]=null;for(;t===Ts;)Ts=hn[--dn],hn[dn]=null,di=hn[--dn],hn[dn]=null,hi=hn[--dn],hn[dn]=null}var rn=null,nn=null,De=!1,bn=null;function uE(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rn=t,nn=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rn=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ts!==null?{id:hi,overflow:di}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rn=t,nn=null,!0):!1;default:return!1}}function Bg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vg(t){if(De){var e=nn;if(e){var n=e;if(!Hw(t,e)){if(Bg(t))throw Error(O(418));e=hr(n.nextSibling);var i=rn;e&&Hw(t,e)?uE(i,n):(t.flags=t.flags&-4097|2,De=!1,rn=t)}}else{if(Bg(t))throw Error(O(418));t.flags=t.flags&-4097|2,De=!1,rn=t}}}function qw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function wu(t){if(t!==rn)return!1;if(!De)return qw(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lg(t.type,t.memoizedProps)),e&&(e=nn)){if(Bg(t))throw hE(),Error(O(418));for(;e;)uE(t,e),e=hr(e.nextSibling)}if(qw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nn=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=rn?hr(t.stateNode.nextSibling):null;return!0}function hE(){for(var t=nn;t;)t=hr(t.nextSibling)}function zo(){nn=rn=null,De=!1}function Fy(t){bn===null?bn=[t]:bn.push(t)}var VP=Pi.ReactCurrentBatchConfig;function _n(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Kh=Fr(null),Gh=null,bo=null,$y=null;function jy(){$y=bo=Gh=null}function By(t){var e=Kh.current;Ie(Kh),t._currentValue=e}function zg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Do(t,e){Gh=t,$y=bo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function yn(t){var e=t._currentValue;if($y!==t)if(t={context:t,memoizedValue:e,next:null},bo===null){if(Gh===null)throw Error(O(308));bo=t,Gh.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var hs=null;function Vy(t){hs===null?hs=[t]:hs.push(t)}function dE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Vy(e)):(n.next=r.next,r.next=n),e.interleaved=n,ki(t,i)}function ki(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wi=!1;function zy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ce&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ki(t,n)}return r=i.interleaved,r===null?(e.next=e,Vy(i)):(e.next=r.next,r.next=e),i.interleaved=e,ki(t,n)}function lh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ty(t,n)}}function Kw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qh(t,e,n,i){var r=t.updateQueue;Wi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(d=e,f=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=Fe({},h,d);break e;case 2:Wi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ns|=o,t.lanes=o,t.memoizedState=h}}function Gw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(O(191,r));r.call(i)}}}var pE=new dS.Component().refs;function Ug(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jd={isMounted:function(t){return(t=t._reactInternals)?qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Rt(),r=pr(t),s=xi(i,r);s.payload=e,n!=null&&(s.callback=n),e=dr(t,s,r),e!==null&&(In(e,t,r,i),lh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Rt(),r=pr(t),s=xi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=dr(t,s,r),e!==null&&(In(e,t,r,i),lh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),i=pr(t),r=xi(n,i);r.tag=2,e!=null&&(r.callback=e),e=dr(t,r,i),e!==null&&(In(e,t,i,n),lh(e,t,i))}};function Qw(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Fl(n,i)||!Fl(r,s):!0}function gE(t,e,n){var i=!1,r=xr,s=e.contextType;return typeof s=="object"&&s!==null?s=yn(s):(r=Gt(e)?Is:Nt.current,i=e.contextTypes,s=(i=i!=null)?Vo(t,r):xr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Yw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Jd.enqueueReplaceState(e,e.state,null)}function Wg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=pE,zy(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=yn(s):(s=Gt(e)?Is:Nt.current,r.context=Vo(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ug(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Jd.enqueueReplaceState(r,r.state,null),Qh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var i=n.stateNode}if(!i)throw Error(O(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===pE&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function _u(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xw(t){var e=t._init;return e(t._payload)}function mE(t){function e(p,m){if(t){var v=p.deletions;v===null?(p.deletions=[m],p.flags|=16):v.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function i(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function r(p,m){return p=gr(p,m),p.index=0,p.sibling=null,p}function s(p,m,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<m?(p.flags|=2,m):v):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,m,v,x){return m===null||m.tag!==6?(m=Ap(v,p.mode,x),m.return=p,m):(m=r(m,v),m.return=p,m)}function l(p,m,v,x){var b=v.type;return b===po?u(p,m,v.props.children,x,v.key):m!==null&&(m.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ui&&Xw(b)===m.type)?(x=r(m,v.props),x.ref=Aa(p,m,v),x.return=p,x):(x=ph(v.type,v.key,v.props,null,p.mode,x),x.ref=Aa(p,m,v),x.return=p,x)}function c(p,m,v,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Dp(v,p.mode,x),m.return=p,m):(m=r(m,v.children||[]),m.return=p,m)}function u(p,m,v,x,b){return m===null||m.tag!==7?(m=_s(v,p.mode,x,b),m.return=p,m):(m=r(m,v),m.return=p,m)}function h(p,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ap(""+m,p.mode,v),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case cu:return v=ph(m.type,m.key,m.props,null,p.mode,v),v.ref=Aa(p,null,m),v.return=p,v;case fo:return m=Dp(m,p.mode,v),m.return=p,m;case Ui:var x=m._init;return h(p,x(m._payload),v)}if(Ga(m)||ka(m))return m=_s(m,p.mode,v,null),m.return=p,m;_u(p,m)}return null}function d(p,m,v,x){var b=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(p,m,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cu:return v.key===b?l(p,m,v,x):null;case fo:return v.key===b?c(p,m,v,x):null;case Ui:return b=v._init,d(p,m,b(v._payload),x)}if(Ga(v)||ka(v))return b!==null?null:u(p,m,v,x,null);_u(p,v)}return null}function f(p,m,v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(v)||null,a(m,p,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cu:return p=p.get(x.key===null?v:x.key)||null,l(m,p,x,b);case fo:return p=p.get(x.key===null?v:x.key)||null,c(m,p,x,b);case Ui:var E=x._init;return f(p,m,v,E(x._payload),b)}if(Ga(x)||ka(x))return p=p.get(v)||null,u(m,p,x,b,null);_u(m,x)}return null}function g(p,m,v,x){for(var b=null,E=null,k=m,S=m=0,I=null;k!==null&&S<v.length;S++){k.index>S?(I=k,k=null):I=k.sibling;var N=d(p,k,v[S],x);if(N===null){k===null&&(k=I);break}t&&k&&N.alternate===null&&e(p,k),m=s(N,m,S),E===null?b=N:E.sibling=N,E=N,k=I}if(S===v.length)return n(p,k),De&&Zr(p,S),b;if(k===null){for(;S<v.length;S++)k=h(p,v[S],x),k!==null&&(m=s(k,m,S),E===null?b=k:E.sibling=k,E=k);return De&&Zr(p,S),b}for(k=i(p,k);S<v.length;S++)I=f(k,p,S,v[S],x),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?S:I.key),m=s(I,m,S),E===null?b=I:E.sibling=I,E=I);return t&&k.forEach(function(A){return e(p,A)}),De&&Zr(p,S),b}function y(p,m,v,x){var b=ka(v);if(typeof b!="function")throw Error(O(150));if(v=b.call(v),v==null)throw Error(O(151));for(var E=b=null,k=m,S=m=0,I=null,N=v.next();k!==null&&!N.done;S++,N=v.next()){k.index>S?(I=k,k=null):I=k.sibling;var A=d(p,k,N.value,x);if(A===null){k===null&&(k=I);break}t&&k&&A.alternate===null&&e(p,k),m=s(A,m,S),E===null?b=A:E.sibling=A,E=A,k=I}if(N.done)return n(p,k),De&&Zr(p,S),b;if(k===null){for(;!N.done;S++,N=v.next())N=h(p,N.value,x),N!==null&&(m=s(N,m,S),E===null?b=N:E.sibling=N,E=N);return De&&Zr(p,S),b}for(k=i(p,k);!N.done;S++,N=v.next())N=f(k,p,S,N.value,x),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?S:N.key),m=s(N,m,S),E===null?b=N:E.sibling=N,E=N);return t&&k.forEach(function($){return e(p,$)}),De&&Zr(p,S),b}function w(p,m,v,x){if(typeof v=="object"&&v!==null&&v.type===po&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case cu:e:{for(var b=v.key,E=m;E!==null;){if(E.key===b){if(b=v.type,b===po){if(E.tag===7){n(p,E.sibling),m=r(E,v.props.children),m.return=p,p=m;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ui&&Xw(b)===E.type){n(p,E.sibling),m=r(E,v.props),m.ref=Aa(p,E,v),m.return=p,p=m;break e}n(p,E);break}else e(p,E);E=E.sibling}v.type===po?(m=_s(v.props.children,p.mode,x,v.key),m.return=p,p=m):(x=ph(v.type,v.key,v.props,null,p.mode,x),x.ref=Aa(p,m,v),x.return=p,p=x)}return o(p);case fo:e:{for(E=v.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(p,m.sibling),m=r(m,v.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=Dp(v,p.mode,x),m.return=p,p=m}return o(p);case Ui:return E=v._init,w(p,m,E(v._payload),x)}if(Ga(v))return g(p,m,v,x);if(ka(v))return y(p,m,v,x);_u(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(p,m.sibling),m=r(m,v),m.return=p,p=m):(n(p,m),m=Ap(v,p.mode,x),m.return=p,p=m),o(p)):n(p,m)}return w}var Uo=mE(!0),yE=mE(!1),Nc={},Wn=Fr(Nc),Vl=Fr(Nc),zl=Fr(Nc);function ds(t){if(t===Nc)throw Error(O(174));return t}function Uy(t,e){switch(ve(zl,e),ve(Vl,t),ve(Wn,Nc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bg(e,t)}Ie(Wn),ve(Wn,e)}function Wo(){Ie(Wn),Ie(Vl),Ie(zl)}function vE(t){ds(zl.current);var e=ds(Wn.current),n=bg(e,t.type);e!==n&&(ve(Vl,t),ve(Wn,n))}function Wy(t){Vl.current===t&&(Ie(Wn),Ie(Vl))}var Oe=Fr(0);function Yh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ep=[];function Hy(){for(var t=0;t<Ep.length;t++)Ep[t]._workInProgressVersionPrimary=null;Ep.length=0}var ch=Pi.ReactCurrentDispatcher,kp=Pi.ReactCurrentBatchConfig,Cs=0,Le=null,Ze=null,rt=null,Xh=!1,hl=!1,Ul=0,zP=0;function xt(){throw Error(O(321))}function qy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function Ky(t,e,n,i,r,s){if(Cs=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ch.current=t===null||t.memoizedState===null?qP:KP,t=n(i,r),hl){s=0;do{if(hl=!1,Ul=0,25<=s)throw Error(O(301));s+=1,rt=Ze=null,e.updateQueue=null,ch.current=GP,t=n(i,r)}while(hl)}if(ch.current=Jh,e=Ze!==null&&Ze.next!==null,Cs=0,rt=Ze=Le=null,Xh=!1,e)throw Error(O(300));return t}function Gy(){var t=Ul!==0;return Ul=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Le.memoizedState=rt=t:rt=rt.next=t,rt}function vn(){if(Ze===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=rt===null?Le.memoizedState:rt.next;if(e!==null)rt=e,Ze=t;else{if(t===null)throw Error(O(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},rt===null?Le.memoizedState=rt=t:rt=rt.next=t}return rt}function Wl(t,e){return typeof e=="function"?e(t):e}function Ip(t){var e=vn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var i=Ze,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Cs&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Le.lanes|=u,Ns|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Cn(i,e.memoizedState)||(Ut=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Le.lanes|=s,Ns|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tp(t){var e=vn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Cn(s,e.memoizedState)||(Ut=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function wE(){}function _E(t,e){var n=Le,i=vn(),r=e(),s=!Cn(i.memoizedState,r);if(s&&(i.memoizedState=r,Ut=!0),i=i.queue,Qy(SE.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Hl(9,bE.bind(null,n,i,r,e),void 0,null),at===null)throw Error(O(349));Cs&30||xE(n,e,r)}return r}function xE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bE(t,e,n,i){e.value=n,e.getSnapshot=i,EE(e)&&kE(t)}function SE(t,e,n){return n(function(){EE(e)&&kE(t)})}function EE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function kE(t){var e=ki(t,1);e!==null&&In(e,t,1,-1)}function Jw(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:t},e.queue=t,t=t.dispatch=HP.bind(null,Le,t),[e.memoizedState,t]}function Hl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function IE(){return vn().memoizedState}function uh(t,e,n,i){var r=On();Le.flags|=t,r.memoizedState=Hl(1|e,n,void 0,i===void 0?null:i)}function Zd(t,e,n,i){var r=vn();i=i===void 0?null:i;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,i!==null&&qy(i,o.deps)){r.memoizedState=Hl(e,n,s,i);return}}Le.flags|=t,r.memoizedState=Hl(1|e,n,s,i)}function Zw(t,e){return uh(8390656,8,t,e)}function Qy(t,e){return Zd(2048,8,t,e)}function TE(t,e){return Zd(4,2,t,e)}function CE(t,e){return Zd(4,4,t,e)}function NE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AE(t,e,n){return n=n!=null?n.concat([t]):null,Zd(4,4,NE.bind(null,e,t),n)}function Yy(){}function DE(t,e){var n=vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&qy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function PE(t,e){var n=vn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&qy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function ME(t,e,n){return Cs&21?(Cn(n,e)||(n=LS(),Le.lanes|=n,Ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function UP(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var i=kp.transition;kp.transition={};try{t(!1),e()}finally{fe=n,kp.transition=i}}function OE(){return vn().memoizedState}function WP(t,e,n){var i=pr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},RE(t))LE(e,n);else if(n=dE(t,e,n,i),n!==null){var r=Rt();In(n,t,i,r),FE(n,e,i)}}function HP(t,e,n){var i=pr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(RE(t))LE(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Cn(a,o)){var l=e.interleaved;l===null?(r.next=r,Vy(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=dE(t,e,r,i),n!==null&&(r=Rt(),In(n,t,i,r),FE(n,e,i))}}function RE(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function LE(t,e){hl=Xh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ty(t,n)}}var Jh={readContext:yn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},qP={readContext:yn,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:yn,useEffect:Zw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uh(4194308,4,NE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uh(4194308,4,t,e)},useInsertionEffect:function(t,e){return uh(4,2,t,e)},useMemo:function(t,e){var n=On();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=On();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=WP.bind(null,Le,t),[i.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:Jw,useDebugValue:Yy,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=Jw(!1),e=t[0];return t=UP.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Le,r=On();if(De){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),at===null)throw Error(O(349));Cs&30||xE(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Zw(SE.bind(null,i,s,t),[t]),i.flags|=2048,Hl(9,bE.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=On(),e=at.identifierPrefix;if(De){var n=di,i=hi;n=(i&~(1<<32-kn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ul++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KP={readContext:yn,useCallback:DE,useContext:yn,useEffect:Qy,useImperativeHandle:AE,useInsertionEffect:TE,useLayoutEffect:CE,useMemo:PE,useReducer:Ip,useRef:IE,useState:function(){return Ip(Wl)},useDebugValue:Yy,useDeferredValue:function(t){var e=vn();return ME(e,Ze.memoizedState,t)},useTransition:function(){var t=Ip(Wl)[0],e=vn().memoizedState;return[t,e]},useMutableSource:wE,useSyncExternalStore:_E,useId:OE,unstable_isNewReconciler:!1},GP={readContext:yn,useCallback:DE,useContext:yn,useEffect:Qy,useImperativeHandle:AE,useInsertionEffect:TE,useLayoutEffect:CE,useMemo:PE,useReducer:Tp,useRef:IE,useState:function(){return Tp(Wl)},useDebugValue:Yy,useDeferredValue:function(t){var e=vn();return Ze===null?e.memoizedState=t:ME(e,Ze.memoizedState,t)},useTransition:function(){var t=Tp(Wl)[0],e=vn().memoizedState;return[t,e]},useMutableSource:wE,useSyncExternalStore:_E,useId:OE,unstable_isNewReconciler:!1};function Ho(t,e){try{var n="",i=e;do n+=bD(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Cp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QP=typeof WeakMap=="function"?WeakMap:Map;function $E(t,e,n){n=xi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ed||(ed=!0,tm=i),Hg(t,e)},n}function jE(t,e,n){n=xi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Hg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hg(t,e),typeof i!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function e_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new QP;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=cM.bind(null,t,e,n),e.then(t,t))}function t_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function n_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xi(-1,1),e.tag=2,dr(n,e,1))),n.lanes|=1),t)}var YP=Pi.ReactCurrentOwner,Ut=!1;function At(t,e,n,i){e.child=t===null?yE(e,null,n,i):Uo(e,t.child,n,i)}function i_(t,e,n,i,r){n=n.render;var s=e.ref;return Do(e,r),i=Ky(t,e,n,i,s,r),n=Gy(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ii(t,e,r)):(De&&n&&Ry(e),e.flags|=1,At(t,e,i,r),e.child)}function r_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!rv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,BE(t,e,s,i,r)):(t=ph(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Fl,n(o,i)&&t.ref===e.ref)return Ii(t,e,r)}return e.flags|=1,t=gr(s,i),t.ref=e.ref,t.return=e,e.child=t}function BE(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Fl(s,i)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,Ii(t,e,r)}return qg(t,e,n,i,r)}function VE(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Eo,en),en|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Eo,en),en|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ve(Eo,en),en|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ve(Eo,en),en|=i;return At(t,e,r,n),e.child}function zE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qg(t,e,n,i,r){var s=Gt(n)?Is:Nt.current;return s=Vo(e,s),Do(e,r),n=Ky(t,e,n,i,s,r),i=Gy(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ii(t,e,r)):(De&&i&&Ry(e),e.flags|=1,At(t,e,n,r),e.child)}function s_(t,e,n,i,r){if(Gt(n)){var s=!0;Wh(e)}else s=!1;if(Do(e,r),e.stateNode===null)hh(t,e),gE(e,n,i),Wg(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yn(c):(c=Gt(n)?Is:Nt.current,c=Vo(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&Yw(e,o,i,c),Wi=!1;var d=e.memoizedState;o.state=d,Qh(e,i,o,r),l=e.memoizedState,a!==i||d!==l||Kt.current||Wi?(typeof u=="function"&&(Ug(e,n,u,i),l=e.memoizedState),(a=Wi||Qw(e,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,fE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:_n(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yn(l):(l=Gt(n)?Is:Nt.current,l=Vo(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&Yw(e,o,i,l),Wi=!1,d=e.memoizedState,o.state=d,Qh(e,i,o,r);var g=e.memoizedState;a!==h||d!==g||Kt.current||Wi?(typeof f=="function"&&(Ug(e,n,f,i),g=e.memoizedState),(c=Wi||Qw(e,n,c,i,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Kg(t,e,n,i,s,r)}function Kg(t,e,n,i,r,s){zE(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Ww(e,n,!1),Ii(t,e,s);i=e.stateNode,YP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Uo(e,t.child,null,s),e.child=Uo(e,null,a,s)):At(t,e,a,s),e.memoizedState=i.state,r&&Ww(e,n,!0),e.child}function UE(t){var e=t.stateNode;e.pendingContext?Uw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uw(t,e.context,!1),Uy(t,e.containerInfo)}function o_(t,e,n,i,r){return zo(),Fy(r),e.flags|=256,At(t,e,n,i),e.child}var Gg={dehydrated:null,treeContext:null,retryLane:0};function Qg(t){return{baseLanes:t,cachePool:null,transitions:null}}function WE(t,e,n){var i=e.pendingProps,r=Oe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ve(Oe,r&1),t===null)return Vg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nf(o,i,0,null),t=_s(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qg(n),e.memoizedState=Gg,t):Xy(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return XP(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=gr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=gr(a,s):(s=_s(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Qg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gg,i}return s=t.child,t=s.sibling,i=gr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Xy(t,e){return e=nf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xu(t,e,n,i){return i!==null&&Fy(i),Uo(e,t.child,null,n),t=Xy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XP(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Cp(Error(O(422))),xu(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=nf({mode:"visible",children:i.children},r,0,null),s=_s(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Uo(e,t.child,null,o),e.child.memoizedState=Qg(o),e.memoizedState=Gg,s);if(!(e.mode&1))return xu(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(O(419)),i=Cp(s,i,void 0),xu(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ut||a){if(i=at,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ki(t,r),In(i,t,r,-1))}return iv(),i=Cp(Error(O(421))),xu(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=uM.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,nn=hr(r.nextSibling),rn=e,De=!0,bn=null,t!==null&&(hn[dn++]=hi,hn[dn++]=di,hn[dn++]=Ts,hi=t.id,di=t.overflow,Ts=e),e=Xy(e,i.children),e.flags|=4096,e)}function a_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zg(t.return,e,n)}function Np(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function HE(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(At(t,e,i.children,n),i=Oe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&a_(t,n,e);else if(t.tag===19)a_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ve(Oe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Yh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Np(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Yh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Np(e,!0,n,null,s);break;case"together":Np(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JP(t,e,n){switch(e.tag){case 3:UE(e),zo();break;case 5:vE(e);break;case 1:Gt(e.type)&&Wh(e);break;case 4:Uy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ve(Kh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ve(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?WE(t,e,n):(ve(Oe,Oe.current&1),t=Ii(t,e,n),t!==null?t.sibling:null);ve(Oe,Oe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return HE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ve(Oe,Oe.current),i)break;return null;case 22:case 23:return e.lanes=0,VE(t,e,n)}return Ii(t,e,n)}var qE,Yg,KE,GE;qE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yg=function(){};KE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ds(Wn.current);var s=null;switch(n){case"input":r=vg(t,r),i=vg(t,i),s=[];break;case"select":r=Fe({},r,{value:void 0}),i=Fe({},i,{value:void 0}),s=[];break;case"textarea":r=xg(t,r),i=xg(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=zh)}Sg(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Al.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Al.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};GE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Da(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function ZP(t,e,n){var i=e.pendingProps;switch(Ly(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Gt(e.type)&&Uh(),bt(e),null;case 3:return i=e.stateNode,Wo(),Ie(Kt),Ie(Nt),Hy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(wu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bn!==null&&(rm(bn),bn=null))),Yg(t,e),bt(e),null;case 5:Wy(e);var r=ds(zl.current);if(n=e.type,t!==null&&e.stateNode!=null)KE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(O(166));return bt(e),null}if(t=ds(Wn.current),wu(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Fn]=e,i[Bl]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",i),xe("close",i);break;case"iframe":case"object":case"embed":xe("load",i);break;case"video":case"audio":for(r=0;r<Ya.length;r++)xe(Ya[r],i);break;case"source":xe("error",i);break;case"img":case"image":case"link":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"input":mw(i,s),xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},xe("invalid",i);break;case"textarea":vw(i,s),xe("invalid",i)}Sg(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&vu(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&vu(i.textContent,a,t),r=["children",""+a]):Al.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",i)}switch(n){case"input":uu(i),yw(i,s,!0);break;case"textarea":uu(i),ww(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=zh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Fn]=e,t[Bl]=i,qE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Eg(n,i),n){case"dialog":xe("cancel",t),xe("close",t),r=i;break;case"iframe":case"object":case"embed":xe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ya.length;r++)xe(Ya[r],t);r=i;break;case"source":xe("error",t),r=i;break;case"img":case"image":case"link":xe("error",t),xe("load",t),r=i;break;case"details":xe("toggle",t),r=i;break;case"input":mw(t,i),r=vg(t,i),xe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Fe({},i,{value:void 0}),xe("invalid",t);break;case"textarea":vw(t,i),r=xg(t,i),xe("invalid",t);break;default:r=i}Sg(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ES(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Dl(t,l):typeof l=="number"&&Dl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Al.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xe("scroll",t):l!=null&&xy(t,s,l,o))}switch(n){case"input":uu(t),yw(t,i,!1);break;case"textarea":uu(t),ww(t);break;case"option":i.value!=null&&t.setAttribute("value",""+_r(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?To(t,!!i.multiple,s,!1):i.defaultValue!=null&&To(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=zh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)GE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(O(166));if(n=ds(zl.current),ds(Wn.current),wu(e)){if(i=e.stateNode,n=e.memoizedProps,i[Fn]=e,(s=i.nodeValue!==n)&&(t=rn,t!==null))switch(t.tag){case 3:vu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vu(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Fn]=e,e.stateNode=i}return bt(e),null;case 13:if(Ie(Oe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&nn!==null&&e.mode&1&&!(e.flags&128))hE(),zo(),e.flags|=98560,s=!1;else if(s=wu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Fn]=e}else zo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),s=!1}else bn!==null&&(rm(bn),bn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?et===0&&(et=3):iv())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return Wo(),Yg(t,e),t===null&&$l(e.stateNode.containerInfo),bt(e),null;case 10:return By(e.type._context),bt(e),null;case 17:return Gt(e.type)&&Uh(),bt(e),null;case 19:if(Ie(Oe),s=e.memoizedState,s===null)return bt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Da(s,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yh(t),o!==null){for(e.flags|=128,Da(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Oe,Oe.current&1|2),e.child}t=t.sibling}s.tail!==null&&We()>qo&&(e.flags|=128,i=!0,Da(s,!1),e.lanes=4194304)}else{if(!i)if(t=Yh(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Da(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!De)return bt(e),null}else 2*We()-s.renderingStartTime>qo&&n!==1073741824&&(e.flags|=128,i=!0,Da(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=We(),e.sibling=null,n=Oe.current,ve(Oe,i?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return nv(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?en&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function eM(t,e){switch(Ly(e),e.tag){case 1:return Gt(e.type)&&Uh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wo(),Ie(Kt),Ie(Nt),Hy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wy(e),null;case 13:if(Ie(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));zo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Oe),null;case 4:return Wo(),null;case 10:return By(e.type._context),null;case 22:case 23:return nv(),null;case 24:return null;default:return null}}var bu=!1,kt=!1,tM=typeof WeakSet=="function"?WeakSet:Set,z=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){je(t,e,i)}else n.current=null}function Xg(t,e,n){try{n()}catch(i){je(t,e,i)}}var l_=!1;function nM(t,e){if(Og=jh,t=JS(),Oy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===r&&(a=o),d===s&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rg={focusedElem:t,selectionRange:n},jh=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:_n(e.type,y),w);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(x){je(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return g=l_,l_=!1,g}function dl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Xg(e,n,s)}r=r.next}while(r!==i)}}function ef(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Jg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QE(t){var e=t.alternate;e!==null&&(t.alternate=null,QE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fn],delete e[Bl],delete e[$g],delete e[$P],delete e[jP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YE(t){return t.tag===5||t.tag===3||t.tag===4}function c_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zh));else if(i!==4&&(t=t.child,t!==null))for(Zg(t,e,n),t=t.sibling;t!==null;)Zg(t,e,n),t=t.sibling}function em(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(em(t,e,n),t=t.sibling;t!==null;)em(t,e,n),t=t.sibling}var ft=null,xn=!1;function Fi(t,e,n){for(n=n.child;n!==null;)XE(t,e,n),n=n.sibling}function XE(t,e,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(qd,n)}catch{}switch(n.tag){case 5:kt||So(n,e);case 6:var i=ft,r=xn;ft=null,Fi(t,e,n),ft=i,xn=r,ft!==null&&(xn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(xn?(t=ft,n=n.stateNode,t.nodeType===8?bp(t.parentNode,n):t.nodeType===1&&bp(t,n),Rl(t)):bp(ft,n.stateNode));break;case 4:i=ft,r=xn,ft=n.stateNode.containerInfo,xn=!0,Fi(t,e,n),ft=i,xn=r;break;case 0:case 11:case 14:case 15:if(!kt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xg(n,e,o),r=r.next}while(r!==i)}Fi(t,e,n);break;case 1:if(!kt&&(So(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){je(n,e,a)}Fi(t,e,n);break;case 21:Fi(t,e,n);break;case 22:n.mode&1?(kt=(i=kt)||n.memoizedState!==null,Fi(t,e,n),kt=i):Fi(t,e,n);break;default:Fi(t,e,n)}}function u_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tM),e.forEach(function(i){var r=hM.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function wn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,xn=!1;break e;case 3:ft=a.stateNode.containerInfo,xn=!0;break e;case 4:ft=a.stateNode.containerInfo,xn=!0;break e}a=a.return}if(ft===null)throw Error(O(160));XE(s,o,r),ft=null,xn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){je(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JE(e,t),e=e.sibling}function JE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wn(e,t),Pn(t),i&4){try{dl(3,t,t.return),ef(3,t)}catch(y){je(t,t.return,y)}try{dl(5,t,t.return)}catch(y){je(t,t.return,y)}}break;case 1:wn(e,t),Pn(t),i&512&&n!==null&&So(n,n.return);break;case 5:if(wn(e,t),Pn(t),i&512&&n!==null&&So(n,n.return),t.flags&32){var r=t.stateNode;try{Dl(r,"")}catch(y){je(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wS(r,s),Eg(a,o);var c=Eg(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?ES(r,h):u==="dangerouslySetInnerHTML"?bS(r,h):u==="children"?Dl(r,h):xy(r,u,h,c)}switch(a){case"input":wg(r,s);break;case"textarea":_S(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?To(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?To(r,!!s.multiple,s.defaultValue,!0):To(r,!!s.multiple,s.multiple?[]:"",!1))}r[Bl]=s}catch(y){je(t,t.return,y)}}break;case 6:if(wn(e,t),Pn(t),i&4){if(t.stateNode===null)throw Error(O(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){je(t,t.return,y)}}break;case 3:if(wn(e,t),Pn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Rl(e.containerInfo)}catch(y){je(t,t.return,y)}break;case 4:wn(e,t),Pn(t);break;case 13:wn(e,t),Pn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(ev=We())),i&4&&u_(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(c=kt)||u,wn(e,t),kt=c):wn(e,t),Pn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(z=t,u=t.child;u!==null;){for(h=z=u;z!==null;){switch(d=z,f=d.child,d.tag){case 0:case 11:case 14:case 15:dl(4,d,d.return);break;case 1:So(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){je(i,n,y)}}break;case 5:So(d,d.return);break;case 22:if(d.memoizedState!==null){d_(h);continue}}f!==null?(f.return=d,z=f):d_(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SS("display",o))}catch(y){je(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){je(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wn(e,t),Pn(t),i&4&&u_(t);break;case 21:break;default:wn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YE(n)){var i=n;break e}n=n.return}throw Error(O(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Dl(r,""),i.flags&=-33);var s=c_(t);em(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=c_(t);Zg(t,a,o);break;default:throw Error(O(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iM(t,e,n){z=t,ZE(t)}function ZE(t,e,n){for(var i=(t.mode&1)!==0;z!==null;){var r=z,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||bu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||kt;a=bu;var c=kt;if(bu=o,(kt=l)&&!c)for(z=r;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?f_(r):l!==null?(l.return=o,z=l):f_(r);for(;s!==null;)z=s,ZE(s),s=s.sibling;z=r,bu=a,kt=c}h_(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,z=s):h_(t)}}function h_(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||ef(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!kt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Gw(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Rl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}kt||e.flags&512&&Jg(e)}catch(d){je(e,e.return,d)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function d_(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function f_(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ef(4,e)}catch(l){je(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){je(e,r,l)}}var s=e.return;try{Jg(e)}catch(l){je(e,s,l)}break;case 5:var o=e.return;try{Jg(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var rM=Math.ceil,Zh=Pi.ReactCurrentDispatcher,Jy=Pi.ReactCurrentOwner,mn=Pi.ReactCurrentBatchConfig,ce=0,at=null,Ye=null,mt=0,en=0,Eo=Fr(0),et=0,ql=null,Ns=0,tf=0,Zy=0,fl=null,Vt=null,ev=0,qo=1/0,ai=null,ed=!1,tm=null,fr=null,Su=!1,tr=null,td=0,pl=0,nm=null,dh=-1,fh=0;function Rt(){return ce&6?We():dh!==-1?dh:dh=We()}function pr(t){return t.mode&1?ce&2&&mt!==0?mt&-mt:VP.transition!==null?(fh===0&&(fh=LS()),fh):(t=fe,t!==0||(t=window.event,t=t===void 0?16:US(t.type)),t):1}function In(t,e,n,i){if(50<pl)throw pl=0,nm=null,Error(O(185));Ic(t,n,i),(!(ce&2)||t!==at)&&(t===at&&(!(ce&2)&&(tf|=n),et===4&&Ki(t,mt)),Qt(t,i),n===1&&ce===0&&!(e.mode&1)&&(qo=We()+500,Xd&&$r()))}function Qt(t,e){var n=t.callbackNode;VD(t,e);var i=$h(t,t===at?mt:0);if(i===0)n!==null&&bw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&bw(n),e===1)t.tag===0?BP(p_.bind(null,t)):lE(p_.bind(null,t)),LP(function(){!(ce&6)&&$r()}),n=null;else{switch(FS(i)){case 1:n=Iy;break;case 4:n=OS;break;case 16:n=Fh;break;case 536870912:n=RS;break;default:n=Fh}n=ak(n,ek.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ek(t,e){if(dh=-1,fh=0,ce&6)throw Error(O(327));var n=t.callbackNode;if(Po()&&t.callbackNode!==n)return null;var i=$h(t,t===at?mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=nd(t,i);else{e=i;var r=ce;ce|=2;var s=nk();(at!==t||mt!==e)&&(ai=null,qo=We()+500,ws(t,e));do try{aM();break}catch(a){tk(t,a)}while(!0);jy(),Zh.current=s,ce=r,Ye!==null?e=0:(at=null,mt=0,e=et)}if(e!==0){if(e===2&&(r=Ng(t),r!==0&&(i=r,e=im(t,r))),e===1)throw n=ql,ws(t,0),Ki(t,i),Qt(t,We()),n;if(e===6)Ki(t,i);else{if(r=t.current.alternate,!(i&30)&&!sM(r)&&(e=nd(t,i),e===2&&(s=Ng(t),s!==0&&(i=s,e=im(t,s))),e===1))throw n=ql,ws(t,0),Ki(t,i),Qt(t,We()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(O(345));case 2:es(t,Vt,ai);break;case 3:if(Ki(t,i),(i&130023424)===i&&(e=ev+500-We(),10<e)){if($h(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Rt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Fg(es.bind(null,t,Vt,ai),e);break}es(t,Vt,ai);break;case 4:if(Ki(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-kn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=We()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*rM(i/1960))-i,10<i){t.timeoutHandle=Fg(es.bind(null,t,Vt,ai),i);break}es(t,Vt,ai);break;case 5:es(t,Vt,ai);break;default:throw Error(O(329))}}}return Qt(t,We()),t.callbackNode===n?ek.bind(null,t):null}function im(t,e){var n=fl;return t.current.memoizedState.isDehydrated&&(ws(t,e).flags|=256),t=nd(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&rm(e)),t}function rm(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function sM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Cn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ki(t,e){for(e&=~Zy,e&=~tf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kn(e),i=1<<n;t[n]=-1,e&=~i}}function p_(t){if(ce&6)throw Error(O(327));Po();var e=$h(t,0);if(!(e&1))return Qt(t,We()),null;var n=nd(t,e);if(t.tag!==0&&n===2){var i=Ng(t);i!==0&&(e=i,n=im(t,i))}if(n===1)throw n=ql,ws(t,0),Ki(t,e),Qt(t,We()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,Vt,ai),Qt(t,We()),null}function tv(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(qo=We()+500,Xd&&$r())}}function As(t){tr!==null&&tr.tag===0&&!(ce&6)&&Po();var e=ce;ce|=1;var n=mn.transition,i=fe;try{if(mn.transition=null,fe=1,t)return t()}finally{fe=i,mn.transition=n,ce=e,!(ce&6)&&$r()}}function nv(){en=Eo.current,Ie(Eo)}function ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RP(n)),Ye!==null)for(n=Ye.return;n!==null;){var i=n;switch(Ly(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Uh();break;case 3:Wo(),Ie(Kt),Ie(Nt),Hy();break;case 5:Wy(i);break;case 4:Wo();break;case 13:Ie(Oe);break;case 19:Ie(Oe);break;case 10:By(i.type._context);break;case 22:case 23:nv()}n=n.return}if(at=t,Ye=t=gr(t.current,null),mt=en=e,et=0,ql=null,Zy=tf=Ns=0,Vt=fl=null,hs!==null){for(e=0;e<hs.length;e++)if(n=hs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}hs=null}return t}function tk(t,e){do{var n=Ye;try{if(jy(),ch.current=Jh,Xh){for(var i=Le.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Xh=!1}if(Cs=0,rt=Ze=Le=null,hl=!1,Ul=0,Jy.current=null,n===null||n.return===null){et=1,ql=e,Ye=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=mt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=t_(o);if(f!==null){f.flags&=-257,n_(f,o,a,s,e),f.mode&1&&e_(s,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){e_(s,c,e),iv();break e}l=Error(O(426))}}else if(De&&a.mode&1){var w=t_(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),n_(w,o,a,s,e),Fy(Ho(l,a));break e}}s=l=Ho(l,a),et!==4&&(et=2),fl===null?fl=[s]:fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=$E(s,l,e);Kw(s,p);break e;case 1:a=l;var m=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fr===null||!fr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=jE(s,a,e);Kw(s,x);break e}}s=s.return}while(s!==null)}rk(n)}catch(b){e=b,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function nk(){var t=Zh.current;return Zh.current=Jh,t===null?Jh:t}function iv(){(et===0||et===3||et===2)&&(et=4),at===null||!(Ns&268435455)&&!(tf&268435455)||Ki(at,mt)}function nd(t,e){var n=ce;ce|=2;var i=nk();(at!==t||mt!==e)&&(ai=null,ws(t,e));do try{oM();break}catch(r){tk(t,r)}while(!0);if(jy(),ce=n,Zh.current=i,Ye!==null)throw Error(O(261));return at=null,mt=0,et}function oM(){for(;Ye!==null;)ik(Ye)}function aM(){for(;Ye!==null&&!PD();)ik(Ye)}function ik(t){var e=ok(t.alternate,t,en);t.memoizedProps=t.pendingProps,e===null?rk(t):Ye=e,Jy.current=null}function rk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eM(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Ye=null;return}}else if(n=ZP(n,e,en),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);et===0&&(et=5)}function es(t,e,n){var i=fe,r=mn.transition;try{mn.transition=null,fe=1,lM(t,e,n,i)}finally{mn.transition=r,fe=i}return null}function lM(t,e,n,i){do Po();while(tr!==null);if(ce&6)throw Error(O(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(zD(t,s),t===at&&(Ye=at=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Su||(Su=!0,ak(Fh,function(){return Po(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=fe;fe=1;var a=ce;ce|=4,Jy.current=null,nM(t,n),JE(n,t),CP(Rg),jh=!!Og,Rg=Og=null,t.current=n,iM(n),MD(),ce=a,fe=o,mn.transition=s}else t.current=n;if(Su&&(Su=!1,tr=t,td=r),s=t.pendingLanes,s===0&&(fr=null),LD(n.stateNode),Qt(t,We()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ed)throw ed=!1,t=tm,tm=null,t;return td&1&&t.tag!==0&&Po(),s=t.pendingLanes,s&1?t===nm?pl++:(pl=0,nm=t):pl=0,$r(),null}function Po(){if(tr!==null){var t=FS(td),e=mn.transition,n=fe;try{if(mn.transition=null,fe=16>t?16:t,tr===null)var i=!1;else{if(t=tr,tr=null,td=0,ce&6)throw Error(O(331));var r=ce;for(ce|=4,z=t.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(z=c;z!==null;){var u=z;switch(u.tag){case 0:case 11:case 15:dl(8,u,s)}var h=u.child;if(h!==null)h.return=u,z=h;else for(;z!==null;){u=z;var d=u.sibling,f=u.return;if(QE(u),u===c){z=null;break}if(d!==null){d.return=f,z=d;break}z=f}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dl(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,z=p;break e}z=s.return}}var m=t.current;for(z=m;z!==null;){o=z;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,z=v;else e:for(o=m;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ef(9,a)}}catch(b){je(a,a.return,b)}if(a===o){z=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,z=x;break e}z=a.return}}if(ce=r,$r(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(qd,t)}catch{}i=!0}return i}finally{fe=n,mn.transition=e}}return!1}function g_(t,e,n){e=Ho(n,e),e=$E(t,e,1),t=dr(t,e,1),e=Rt(),t!==null&&(Ic(t,1,e),Qt(t,e))}function je(t,e,n){if(t.tag===3)g_(t,t,n);else for(;e!==null;){if(e.tag===3){g_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fr===null||!fr.has(i))){t=Ho(n,t),t=jE(e,t,1),e=dr(e,t,1),t=Rt(),e!==null&&(Ic(e,1,t),Qt(e,t));break}}e=e.return}}function cM(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(mt&n)===n&&(et===4||et===3&&(mt&130023424)===mt&&500>We()-ev?ws(t,0):Zy|=n),Qt(t,e)}function sk(t,e){e===0&&(t.mode&1?(e=fu,fu<<=1,!(fu&130023424)&&(fu=4194304)):e=1);var n=Rt();t=ki(t,e),t!==null&&(Ic(t,e,n),Qt(t,n))}function uM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sk(t,n)}function hM(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(O(314))}i!==null&&i.delete(e),sk(t,n)}var ok;ok=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,JP(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,De&&e.flags&1048576&&cE(e,qh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;hh(t,e),t=e.pendingProps;var r=Vo(e,Nt.current);Do(e,n),r=Ky(null,e,i,t,r,n);var s=Gy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(i)?(s=!0,Wh(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,zy(e),r.updater=Jd,e.stateNode=r,r._reactInternals=e,Wg(e,i,t,n),e=Kg(null,e,i,!0,s,n)):(e.tag=0,De&&s&&Ry(e),At(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(hh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=fM(i),t=_n(i,t),r){case 0:e=qg(null,e,i,t,n);break e;case 1:e=s_(null,e,i,t,n);break e;case 11:e=i_(null,e,i,t,n);break e;case 14:e=r_(null,e,i,_n(i.type,t),n);break e}throw Error(O(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_n(i,r),qg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_n(i,r),s_(t,e,i,r,n);case 3:e:{if(UE(e),t===null)throw Error(O(387));i=e.pendingProps,s=e.memoizedState,r=s.element,fE(t,e),Qh(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ho(Error(O(423)),e),e=o_(t,e,i,n,r);break e}else if(i!==r){r=Ho(Error(O(424)),e),e=o_(t,e,i,n,r);break e}else for(nn=hr(e.stateNode.containerInfo.firstChild),rn=e,De=!0,bn=null,n=yE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zo(),i===r){e=Ii(t,e,n);break e}At(t,e,i,n)}e=e.child}return e;case 5:return vE(e),t===null&&Vg(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Lg(i,r)?o=null:s!==null&&Lg(i,s)&&(e.flags|=32),zE(t,e),At(t,e,o,n),e.child;case 6:return t===null&&Vg(e),null;case 13:return WE(t,e,n);case 4:return Uy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Uo(e,null,i,n):At(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_n(i,r),i_(t,e,i,r,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ve(Kh,i._currentValue),i._currentValue=o,s!==null)if(Cn(s.value,o)){if(s.children===r.children&&!Kt.current){e=Ii(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=xi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}At(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Do(e,n),r=yn(r),i=i(r),e.flags|=1,At(t,e,i,n),e.child;case 14:return i=e.type,r=_n(i,e.pendingProps),r=_n(i.type,r),r_(t,e,i,r,n);case 15:return BE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:_n(i,r),hh(t,e),e.tag=1,Gt(i)?(t=!0,Wh(e)):t=!1,Do(e,n),gE(e,i,r),Wg(e,i,r,n),Kg(null,e,i,!0,t,n);case 19:return HE(t,e,n);case 22:return VE(t,e,n)}throw Error(O(156,e.tag))};function ak(t,e){return MS(t,e)}function dM(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,i){return new dM(t,e,n,i)}function rv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fM(t){if(typeof t=="function")return rv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sy)return 11;if(t===Ey)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ph(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")rv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case po:return _s(n.children,r,s,e);case by:o=8,r|=8;break;case pg:return t=pn(12,n,e,r|2),t.elementType=pg,t.lanes=s,t;case gg:return t=pn(13,n,e,r),t.elementType=gg,t.lanes=s,t;case mg:return t=pn(19,n,e,r),t.elementType=mg,t.lanes=s,t;case mS:return nf(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pS:o=10;break e;case gS:o=9;break e;case Sy:o=11;break e;case Ey:o=14;break e;case Ui:o=16,i=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=pn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function _s(t,e,n,i){return t=pn(7,t,i,e),t.lanes=n,t}function nf(t,e,n,i){return t=pn(22,t,i,e),t.elementType=mS,t.lanes=n,t.stateNode={isHidden:!1},t}function Ap(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function Dp(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pM(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hp(0),this.expirationTimes=hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function sv(t,e,n,i,r,s,o,a,l){return t=new pM(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zy(s),t}function gM(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function lk(t){if(!t)return xr;t=t._reactInternals;e:{if(qs(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(Gt(n))return aE(t,n,e)}return e}function ck(t,e,n,i,r,s,o,a,l){return t=sv(n,i,!0,t,r,s,o,a,l),t.context=lk(null),n=t.current,i=Rt(),r=pr(n),s=xi(i,r),s.callback=e??null,dr(n,s,r),t.current.lanes=r,Ic(t,r,i),Qt(t,i),t}function rf(t,e,n,i){var r=e.current,s=Rt(),o=pr(r);return n=lk(n),e.context===null?e.context=n:e.pendingContext=n,e=xi(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=dr(r,e,o),t!==null&&(In(t,r,o,s),lh(t,r,o)),o}function id(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function m_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ov(t,e){m_(t,e),(t=t.alternate)&&m_(t,e)}function mM(){return null}var uk=typeof reportError=="function"?reportError:function(t){console.error(t)};function av(t){this._internalRoot=t}sf.prototype.render=av.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));rf(t,e,null,null)};sf.prototype.unmount=av.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;As(function(){rf(null,t,null,null)}),e[Ei]=null}};function sf(t){this._internalRoot=t}sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=BS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qi.length&&e!==0&&e<qi[n].priority;n++);qi.splice(n,0,t),n===0&&zS(t)}};function lv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function y_(){}function yM(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=id(o);s.call(c)}}var o=ck(e,i,t,0,null,!1,!1,"",y_);return t._reactRootContainer=o,t[Ei]=o.current,$l(t.nodeType===8?t.parentNode:t),As(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=id(l);a.call(c)}}var l=sv(t,0,!1,null,null,!1,!1,"",y_);return t._reactRootContainer=l,t[Ei]=l.current,$l(t.nodeType===8?t.parentNode:t),As(function(){rf(e,l,n,i)}),l}function af(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=id(o);a.call(l)}}rf(e,o,t,r)}else o=yM(n,e,t,r,i);return id(o)}$S=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qa(e.pendingLanes);n!==0&&(Ty(e,n|1),Qt(e,We()),!(ce&6)&&(qo=We()+500,$r()))}break;case 13:As(function(){var i=ki(t,1);if(i!==null){var r=Rt();In(i,t,1,r)}}),ov(t,1)}};Cy=function(t){if(t.tag===13){var e=ki(t,134217728);if(e!==null){var n=Rt();In(e,t,134217728,n)}ov(t,134217728)}};jS=function(t){if(t.tag===13){var e=pr(t),n=ki(t,e);if(n!==null){var i=Rt();In(n,t,e,i)}ov(t,e)}};BS=function(){return fe};VS=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};Ig=function(t,e,n){switch(e){case"input":if(wg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Yd(i);if(!r)throw Error(O(90));vS(i),wg(i,r)}}}break;case"textarea":_S(t,n);break;case"select":e=n.value,e!=null&&To(t,!!n.multiple,e,!1)}};TS=tv;CS=As;var vM={usingClientEntryPoint:!1,Events:[Cc,vo,Yd,kS,IS,tv]},Pa={findFiberByHostInstance:us,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},wM={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DS(t),t===null?null:t.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||mM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{qd=Eu.inject(wM),Un=Eu}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vM;ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lv(e))throw Error(O(200));return gM(t,e,null,n)};ln.createRoot=function(t,e){if(!lv(t))throw Error(O(299));var n=!1,i="",r=uk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=sv(t,1,!1,null,null,n,!1,i,r),t[Ei]=e.current,$l(t.nodeType===8?t.parentNode:t),new av(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=DS(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return As(t)};ln.hydrate=function(t,e,n){if(!of(e))throw Error(O(200));return af(null,t,e,!0,n)};ln.hydrateRoot=function(t,e,n){if(!lv(t))throw Error(O(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=uk;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ck(e,null,t,1,n??null,r,!1,s,o),t[Ei]=e.current,$l(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new sf(e)};ln.render=function(t,e,n){if(!of(e))throw Error(O(200));return af(null,t,e,!1,n)};ln.unmountComponentAtNode=function(t){if(!of(t))throw Error(O(40));return t._reactRootContainer?(As(function(){af(null,null,t,!1,function(){t._reactRootContainer=null,t[Ei]=null})}),!0):!1};ln.unstable_batchedUpdates=tv;ln.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!of(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return af(t,e,n,!1,i)};ln.version="18.2.0-next-9e3b772b8-20220608";function hk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hk)}catch(t){console.error(t)}}hk(),cS.exports=ln;var _M=cS.exports,v_=_M;dg.createRoot=v_.createRoot,dg.hydrateRoot=v_.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kl.apply(this,arguments)}var nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(nr||(nr={}));const w_="popstate";function xM(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return sm("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:rd(r)}return SM(e,n,null,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bM(){return Math.random().toString(36).substr(2,8)}function __(t,e){return{usr:t.state,key:t.key,idx:e}}function sm(t,e,n,i){return n===void 0&&(n=null),Kl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fa(e):e,{state:n,key:e&&e.key||i||bM()})}function rd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function fa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function SM(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=nr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Kl({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=nr.Pop;let w=u(),p=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:p})}function d(w,p){a=nr.Push;let m=sm(y.location,w,p);c=u()+1;let v=__(m,c),x=y.createHref(m);try{o.pushState(v,"",x)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;r.location.assign(x)}s&&l&&l({action:a,location:y.location,delta:1})}function f(w,p){a=nr.Replace;let m=sm(y.location,w,p);c=u();let v=__(m,c),x=y.createHref(m);o.replaceState(v,"",x),s&&l&&l({action:a,location:y.location,delta:0})}function g(w){let p=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof w=="string"?w:rd(w);return Je(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let y={get action(){return a},get location(){return t(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(w_,h),l=w,()=>{r.removeEventListener(w_,h),l=null}},createHref(w){return e(r,w)},createURL:g,encodeLocation(w){let p=g(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:f,go(w){return o.go(w)}};return y}var x_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(x_||(x_={}));function EM(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?fa(e):e,r=uv(i.pathname||"/",n);if(r==null)return null;let s=dk(t);kM(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=OM(s[a],FM(r));return o}function dk(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Je(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=mr([i,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Je(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),dk(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:PM(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of fk(s.path))r(s,o,l)}),e}function fk(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=fk(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function kM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MM(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const IM=/^:\w+$/,TM=3,CM=2,NM=1,AM=10,DM=-2,b_=t=>t==="*";function PM(t,e){let n=t.split("/"),i=n.length;return n.some(b_)&&(i+=DM),e&&(i+=CM),n.filter(r=>!b_(r)).reduce((r,s)=>r+(IM.test(s)?TM:s===""?NM:AM),i)}function MM(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function OM(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=r==="/"?e:e.slice(r.length)||"/",u=RM({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(i,u.params);let h=a.route;s.push({params:i,pathname:mr([r,u.pathname]),pathnameBase:VM(mr([r,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(r=mr([r,u.pathnameBase]))}return s}function RM(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=LM(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,h)=>{if(u==="*"){let d=a[h]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return c[u]=$M(a[h]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:t}}function LM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(i.push(a),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function FM(t){try{return decodeURI(t)}catch(e){return cv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $M(t,e){try{return decodeURIComponent(t)}catch(n){return cv(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function uv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function jM(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?fa(t):t;return{pathname:n?n.startsWith("/")?n:BM(n,e):e,search:zM(i),hash:UM(r)}}function BM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Pp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gk(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=fa(t):(r=Kl({},t),Je(!r.pathname||!r.pathname.includes("?"),Pp("?","pathname","search",r)),Je(!r.pathname||!r.pathname.includes("#"),Pp("#","pathname","hash",r)),Je(!r.search||!r.search.includes("#"),Pp("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=jM(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const mr=t=>t.join("/").replace(/\/\/+/g,"/"),VM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mk=["post","put","patch","delete"];new Set(mk);const HM=["get",...mk];new Set(HM);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sd(){return sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sd.apply(this,arguments)}const hv=D.createContext(null),yk=D.createContext(null),Ks=D.createContext(null),lf=D.createContext(null),Gs=D.createContext({outlet:null,matches:[],isDataRoute:!1}),vk=D.createContext(null);function qM(t,e){let{relative:n}=e===void 0?{}:e;Ac()||Je(!1);let{basename:i,navigator:r}=D.useContext(Ks),{hash:s,pathname:o,search:a}=dv(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:mr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Ac(){return D.useContext(lf)!=null}function Dc(){return Ac()||Je(!1),D.useContext(lf).location}function wk(t){D.useContext(Ks).static||D.useLayoutEffect(t)}function _k(){let{isDataRoute:t}=D.useContext(Gs);return t?sO():KM()}function KM(){Ac()||Je(!1);let t=D.useContext(hv),{basename:e,navigator:n}=D.useContext(Ks),{matches:i}=D.useContext(Gs),{pathname:r}=Dc(),s=JSON.stringify(pk(i).map(l=>l.pathnameBase)),o=D.useRef(!1);return wk(()=>{o.current=!0}),D.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=gk(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:mr([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,r,t])}function dv(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=D.useContext(Gs),{pathname:r}=Dc(),s=JSON.stringify(pk(i).map(o=>o.pathnameBase));return D.useMemo(()=>gk(t,JSON.parse(s),r,n==="path"),[t,s,r,n])}function GM(t,e){return QM(t,e)}function QM(t,e,n){Ac()||Je(!1);let{navigator:i}=D.useContext(Ks),{matches:r}=D.useContext(Gs),s=r[r.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=Dc(),c;if(e){var u;let y=typeof e=="string"?fa(e):e;a==="/"||(u=y.pathname)!=null&&u.startsWith(a)||Je(!1),c=y}else c=l;let h=c.pathname||"/",d=a==="/"?h:h.slice(a.length)||"/",f=EM(t,{pathname:d}),g=eO(f&&f.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:mr([a,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:mr([a,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),r,n);return e&&g?D.createElement(lf.Provider,{value:{location:sd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:nr.Pop}},g):g}function YM(){let t=rO(),e=WM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:r},n):null,null)}const XM=D.createElement(YM,null);class JM extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?D.createElement(Gs.Provider,{value:this.props.routeContext},D.createElement(vk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZM(t){let{routeContext:e,match:n,children:i}=t,r=D.useContext(hv);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Gs.Provider,{value:e},i)}function eO(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Je(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let u=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||XM);let d=e.concat(s.slice(0,c+1)),f=()=>{let g;return u?g=h:l.route.Component?g=D.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,D.createElement(ZM,{match:l,routeContext:{outlet:a,matches:d,isDataRoute:n!=null},children:g})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?D.createElement(JM,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:f(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):f()},null)}var xk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xk||{}),od=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(od||{});function tO(t){let e=D.useContext(hv);return e||Je(!1),e}function nO(t){let e=D.useContext(yk);return e||Je(!1),e}function iO(t){let e=D.useContext(Gs);return e||Je(!1),e}function bk(t){let e=iO(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function rO(){var t;let e=D.useContext(vk),n=nO(od.UseRouteError),i=bk(od.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function sO(){let{router:t}=tO(xk.UseNavigateStable),e=bk(od.UseNavigateStable),n=D.useRef(!1);return wk(()=>{n.current=!0}),D.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,sd({fromRouteId:e},s)))},[t,e])}function zi(t){Je(!1)}function oO(t){let{basename:e="/",children:n=null,location:i,navigationType:r=nr.Pop,navigator:s,static:o=!1}=t;Ac()&&Je(!1);let a=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=fa(i));let{pathname:c="/",search:u="",hash:h="",state:d=null,key:f="default"}=i,g=D.useMemo(()=>{let y=uv(c,a);return y==null?null:{location:{pathname:y,search:u,hash:h,state:d,key:f},navigationType:r}},[a,c,u,h,d,f,r]);return g==null?null:D.createElement(Ks.Provider,{value:l},D.createElement(lf.Provider,{children:n,value:g}))}function aO(t){let{children:e,location:n}=t;return GM(om(e),n)}new Promise(()=>{});function om(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(i,r)=>{if(!D.isValidElement(i))return;let s=[...e,r];if(i.type===D.Fragment){n.push.apply(n,om(i.props.children,s));return}i.type!==zi&&Je(!1),!i.props.index||!i.props.children||Je(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=om(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ad.apply(this,arguments)}function Sk(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function lO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cO(t,e){return t.button===0&&(!e||e==="_self")&&!lO(t)}const uO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],hO=["aria-current","caseSensitive","className","end","style","to","children"],dO="startTransition",S_=uD[dO];function fO(t){let{basename:e,children:n,future:i,window:r}=t,s=D.useRef();s.current==null&&(s.current=xM({window:r,v5Compat:!0}));let o=s.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=D.useCallback(h=>{c&&S_?S_(()=>l(h)):l(h)},[l,c]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.createElement(oO,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const pO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mO=D.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,h=Sk(e,uO),{basename:d}=D.useContext(Ks),f,g=!1;if(typeof c=="string"&&gO.test(c)&&(f=c,pO))try{let m=new URL(window.location.href),v=c.startsWith("//")?new URL(m.protocol+c):new URL(c),x=uv(v.pathname,d);v.origin===m.origin&&x!=null?c=x+v.search+v.hash:g=!0}catch{}let y=qM(c,{relative:r}),w=yO(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r});function p(m){i&&i(m),m.defaultPrevented||w(m)}return D.createElement("a",ad({},h,{href:f||y,onClick:g||s?i:p,ref:n,target:l}))}),Rn=D.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,children:c}=e,u=Sk(e,hO),h=dv(l,{relative:u.relative}),d=Dc(),f=D.useContext(yk),{navigator:g}=D.useContext(Ks),y=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,w=d.pathname,p=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(w=w.toLowerCase(),p=p?p.toLowerCase():null,y=y.toLowerCase());let m=w===y||!o&&w.startsWith(y)&&w.charAt(y.length)==="/",v=p!=null&&(p===y||!o&&p.startsWith(y)&&p.charAt(y.length)==="/"),x=m?i:void 0,b;typeof s=="function"?b=s({isActive:m,isPending:v}):b=[s,m?"active":null,v?"pending":null].filter(Boolean).join(" ");let E=typeof a=="function"?a({isActive:m,isPending:v}):a;return D.createElement(mO,ad({},u,{"aria-current":x,className:b,ref:n,style:E,to:l}),typeof c=="function"?c({isActive:m,isPending:v}):c)});var E_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(E_||(E_={}));var k_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(k_||(k_={}));function yO(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=_k(),l=Dc(),c=dv(t,{relative:o});return D.useCallback(u=>{if(cO(u,n)){u.preventDefault();let h=i!==void 0?i:rd(l)===rd(c);a(t,{replace:h,state:r,preventScrollReset:s,relative:o})}},[l,a,c,i,r,n,t,s,o])}const fv=D.createContext(),vO=({children:t})=>{const[e,n]=D.useState(void 0);return _.jsx(fv.Provider,{value:{user:e,setUser:n},children:t})},pv=D.createContext(),wO=({children:t})=>{const[e,n]=D.useState(void 0);return _.jsx(pv.Provider,{value:{client:e,setClient:n},children:t})};var I_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},_O=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ek(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_O(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw new xO;const d=s<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const g=c<<6&192|h;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bO=function(t){const e=Ek(t);return kk.encodeByteArray(e,!0)},ld=function(t){return bO(t).replace(/\./g,"")},Ik=function(t){try{return kk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cd(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!SO(n)||(t[n]=cd(t[n],e[n]));return t}function SO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=()=>EO().__FIREBASE_DEFAULTS__,IO=()=>{if(typeof process>"u"||typeof I_>"u")return;const t=I_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ik(t[1]);return e&&JSON.parse(e)},cf=()=>{try{return kO()||IO()||TO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CO=t=>{var e,n;return(n=(e=cf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Tk=()=>{var t;return(t=cf())===null||t===void 0?void 0:t.config},Ck=t=>{var e;return(e=cf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ld(JSON.stringify(n)),ld(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function PO(){var t;const e=(t=cf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MO(){return typeof self=="object"&&self.self===self}function OO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LO(){const t=tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FO(){return!PO()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nk(){try{return typeof indexedDB=="object"}catch{return!1}}function $O(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="FirebaseError";class ei extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=jO,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}}class Qs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?BO(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ei(r,a,i)}}function BO(t,e){return t.replace(VO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const VO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ud(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(C_(s)&&C_(o)){if(!ud(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function C_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ak(t,e){const n=new UO(t,e);return n.subscribe.bind(n)}class UO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");WO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Mp),r.error===void 0&&(r.error=Mp),r.complete===void 0&&(r.complete=Mp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t){return t&&t._delegate?t._delegate:t}class Ti{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new NO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KO(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:qO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qO(t){return t===ts?void 0:t}function KO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=[];var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const Dk={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},QO=ae.INFO,YO={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},XO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=YO[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uf{constructor(e){this.name=e,this._logLevel=QO,this._logHandler=XO,this._userLogHandler=null,gv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}function JO(t){gv.forEach(e=>{e.setLogLevel(t)})}function ZO(t,e){for(const n of gv){let i=null;e&&e.level&&(i=Dk[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:ae[s].toLowerCase(),message:a,args:o,type:r.name})}}}const eR=(t,e)=>e.some(n=>t instanceof n);let N_,A_;function tR(){return N_||(N_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nR(){return A_||(A_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pk=new WeakMap,am=new WeakMap,Mk=new WeakMap,Op=new WeakMap,mv=new WeakMap;function iR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(yr(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pk.set(n,t)}).catch(()=>{}),mv.set(e,t),e}function rR(t){if(am.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});am.set(t,e)}let lm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return am.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sR(t){lm=t(lm)}function oR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Rp(this),e,...n);return Mk.set(i,e.sort?e.sort():[e]),yr(i)}:nR().includes(t)?function(...e){return t.apply(Rp(this),e),yr(Pk.get(this))}:function(...e){return yr(t.apply(Rp(this),e))}}function aR(t){return typeof t=="function"?oR(t):(t instanceof IDBTransaction&&rR(t),eR(t,tR())?new Proxy(t,lm):t)}function yr(t){if(t instanceof IDBRequest)return iR(t);if(Op.has(t))return Op.get(t);const e=aR(t);return e!==t&&(Op.set(t,e),mv.set(e,t)),e}const Rp=t=>mv.get(t);function lR(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=yr(o);return i&&o.addEventListener("upgradeneeded",l=>{i(yr(o.result),l.oldVersion,l.newVersion,yr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const cR=["get","getKey","getAll","getAllKeys","count"],uR=["put","add","delete","clear"],Lp=new Map;function D_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=uR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||cR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Lp.set(e,s),s}sR(t=>({...t,get:(e,n,i)=>D_(e,n)||t.get(e,n,i),has:(e,n)=>!!D_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function dR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cm="@firebase/app",P_="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new uf("@firebase/app"),fR="@firebase/app-compat",pR="@firebase/analytics-compat",gR="@firebase/analytics",mR="@firebase/app-check-compat",yR="@firebase/app-check",vR="@firebase/auth",wR="@firebase/auth-compat",_R="@firebase/database",xR="@firebase/database-compat",bR="@firebase/functions",SR="@firebase/functions-compat",ER="@firebase/installations",kR="@firebase/installations-compat",IR="@firebase/messaging",TR="@firebase/messaging-compat",CR="@firebase/performance",NR="@firebase/performance-compat",AR="@firebase/remote-config",DR="@firebase/remote-config-compat",PR="@firebase/storage",MR="@firebase/storage-compat",OR="@firebase/firestore",RR="@firebase/firestore-compat",LR="firebase",FR="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]",$R={[cm]:"fire-core",[fR]:"fire-core-compat",[gR]:"fire-analytics",[pR]:"fire-analytics-compat",[yR]:"fire-app-check",[mR]:"fire-app-check-compat",[vR]:"fire-auth",[wR]:"fire-auth-compat",[_R]:"fire-rtdb",[xR]:"fire-rtdb-compat",[bR]:"fire-fn",[SR]:"fire-fn-compat",[ER]:"fire-iid",[kR]:"fire-iid-compat",[IR]:"fire-fcm",[TR]:"fire-fcm-compat",[CR]:"fire-perf",[NR]:"fire-perf-compat",[AR]:"fire-rc",[DR]:"fire-rc-compat",[PR]:"fire-gcs",[MR]:"fire-gcs-compat",[OR]:"fire-fst",[RR]:"fire-fst-compat","fire-js":"fire-js",[LR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Map,Gl=new Map;function hd(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ok(t,e){t.container.addOrOverwriteComponent(e)}function Er(t){const e=t.name;if(Gl.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Gl.set(e,t);for(const n of Sr.values())hd(n,t);return!0}function hf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jR(t,e,n=br){hf(t,e).clearInstance(n)}function BR(){Gl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},bi=new Qs("app","Firebase",VR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zR=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=FR;function yv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:br,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw bi.create("bad-app-name",{appName:String(r)});if(n||(n=Tk()),!n)throw bi.create("no-options");const s=Sr.get(r);if(s){if(ud(n,s.options)&&ud(i,s.config))return s;throw bi.create("duplicate-app",{appName:r})}const o=new GO(r);for(const l of Gl.values())o.addComponent(l);const a=new zR(n,i,o);return Sr.set(r,a),a}function Rk(t=br){const e=Sr.get(t);if(!e&&t===br&&Tk())return yv();if(!e)throw bi.create("no-app",{appName:t});return e}function UR(){return Array.from(Sr.values())}async function Lk(t){const e=t.name;Sr.has(e)&&(Sr.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Hn(t,e,n){var i;let r=(i=$R[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(a.join(" "));return}Er(new Ti(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Fk(t,e){if(t!==null&&typeof t!="function")throw bi.create("invalid-log-argument");ZO(t,e)}function $k(t){JO(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="firebase-heartbeat-database",HR=1,Ql="firebase-heartbeat-store";let Fp=null;function jk(){return Fp||(Fp=lR(WR,HR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ql)}}}).catch(t=>{throw bi.create("idb-open",{originalErrorMessage:t.message})})),Fp}async function qR(t){try{return await(await jk()).transaction(Ql).objectStore(Ql).get(Bk(t))}catch(e){if(e instanceof ei)Ds.warn(e.message);else{const n=bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function M_(t,e){try{const i=(await jk()).transaction(Ql,"readwrite");await i.objectStore(Ql).put(e,Bk(t)),await i.done}catch(n){if(n instanceof ei)Ds.warn(n.message);else{const i=bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(i.message)}}}function Bk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1024,GR=30*24*60*60*1e3;class QR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=O_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=GR}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=O_(),{heartbeatsToSend:n,unsentEntries:i}=YR(this._heartbeatsCache.heartbeats),r=ld(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function O_(){return new Date().toISOString().substring(0,10)}function YR(t,e=KR){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),R_(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),R_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class XR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nk()?$O().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await qR(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return M_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return M_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function R_(t){return ld(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){Er(new Ti("platform-logger",e=>new hR(e),"PRIVATE")),Er(new Ti("heartbeat",e=>new QR(e),"PRIVATE")),Hn(cm,P_,t),Hn(cm,P_,"esm2017"),Hn("fire-js","")}JR("");const ZR=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ei,SDK_VERSION:jr,_DEFAULT_ENTRY_NAME:br,_addComponent:hd,_addOrOverwriteComponent:Ok,_apps:Sr,_clearComponents:BR,_components:Gl,_getProvider:hf,_registerComponent:Er,_removeServiceInstance:jR,deleteApp:Lk,getApp:Rk,getApps:UR,initializeApp:yv,onLog:Fk,registerVersion:Hn,setLogLevel:$k},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this._delegate=e,this.firebase=n,hd(e,new Ti("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Lk(this._delegate)))}_getService(e,n=br){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=br){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){hd(this._delegate,e)}_addOrOverwriteComponent(e){Ok(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},L_=new Qs("app-compat","Firebase",tL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:Hn,setLogLevel:$k,onLog:Fk,apps:null,SDK_VERSION:jr,INTERNAL:{registerComponent:a,removeApp:i,useAsService:l,modularAPIs:ZR}};n.default=n,Object.defineProperty(n,"apps",{get:o});function i(c){delete e[c]}function r(c){if(c=c||br,!T_(e,c))throw L_.create("no-app",{appName:c});return e[c]}r.App=t;function s(c,u={}){const h=yv(c,u);if(T_(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,h=u.replace("-compat","");if(Er(c)&&c.type==="PUBLIC"){const d=(f=r())=>{if(typeof f[h]!="function")throw L_.create("invalid-app-argument",{appName:u});return f[h]()};c.serviceProps!==void 0&&cd(d,c.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?n[h]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(){const t=nL(eL);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Vk,extendNamespace:e,createSubscribe:Ak,ErrorFactory:Qs,deepExtend:cd});function e(n){cd(t,n)}return t}const iL=Vk();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new uf("@firebase/app-compat"),rL="@firebase/app-compat",sL="0.2.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t){Hn(rL,sL,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(MO()&&self.firebase!==void 0){F_.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&F_.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const pa=iL;oL();var aL="firebase",lL="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pa.registerVersion(aL,lL,"app-compat");var cL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B,vv=vv||{},Q=cL||self;function df(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ff(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function uL(t){return Object.prototype.hasOwnProperty.call(t,$p)&&t[$p]||(t[$p]=++hL)}var $p="closure_uid_"+(1e9*Math.random()>>>0),hL=0;function dL(t,e,n){return t.call.apply(t.bind,arguments)}function fL(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Tt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Tt=dL:Tt=fL,Tt.apply(null,arguments)}function ku(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function ut(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Br(){this.s=this.s,this.o=this.o}var pL=0;Br.prototype.s=!1;Br.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),pL!=0)&&uL(this)};Br.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zk=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function wv(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function $_(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(df(i)){const r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function Ct(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var gL=function(){if(!Q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Q.addEventListener("test",()=>{},e),Q.removeEventListener("test",()=>{},e)}catch{}return t}();function Yl(t){return/^[\s\xa0]*$/.test(t)}function pf(){var t=Q.navigator;return t&&(t=t.userAgent)?t:""}function $n(t){return pf().indexOf(t)!=-1}function _v(t){return _v[" "](t),t}_v[" "]=function(){};function mL(t,e){var n=c2;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var yL=$n("Opera"),Ko=$n("Trident")||$n("MSIE"),Uk=$n("Edge"),um=Uk||Ko,Wk=$n("Gecko")&&!(pf().toLowerCase().indexOf("webkit")!=-1&&!$n("Edge"))&&!($n("Trident")||$n("MSIE"))&&!$n("Edge"),vL=pf().toLowerCase().indexOf("webkit")!=-1&&!$n("Edge");function Hk(){var t=Q.document;return t?t.documentMode:void 0}var hm;e:{var jp="",Bp=function(){var t=pf();if(Wk)return/rv:([^\);]+)(\)|;)/.exec(t);if(Uk)return/Edge\/([\d\.]+)/.exec(t);if(Ko)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(vL)return/WebKit\/(\S+)/.exec(t);if(yL)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Bp&&(jp=Bp?Bp[1]:""),Ko){var Vp=Hk();if(Vp!=null&&Vp>parseFloat(jp)){hm=String(Vp);break e}}hm=jp}var dm;if(Q.document&&Ko){var j_=Hk();dm=j_||parseInt(hm,10)||void 0}else dm=void 0;var wL=dm;function Xl(t,e){if(Ct.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Wk){e:{try{_v(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:_L[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Xl.$.h.call(this)}}ut(Xl,Ct);var _L={2:"touch",3:"pen",4:"mouse"};Xl.prototype.h=function(){Xl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var gf="closure_listenable_"+(1e6*Math.random()|0),xL=0;function bL(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++xL,this.fa=this.ia=!1}function mf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function xv(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function SL(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function qk(t){const e={};for(const n in t)e[n]=t[n];return e}const B_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kk(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<B_.length;s++)n=B_[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function yf(t){this.src=t,this.g={},this.h=0}yf.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=pm(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new bL(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function fm(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=zk(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(mf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function pm(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var bv="closure_lm_"+(1e6*Math.random()|0),zp={};function Gk(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Gk(t,e[s],n,i,r);return null}return n=Xk(n),t&&t[gf]?t.O(e,n,ff(i)?!!i.capture:!!i,r):EL(t,e,n,!1,i,r)}function EL(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=ff(r)?!!r.capture:!!r,a=Ev(t);if(a||(t[bv]=a=new yf(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=kL(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)gL||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Yk(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function kL(){function t(n){return e.call(t.src,t.listener,n)}const e=IL;return t}function Qk(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Qk(t,e[s],n,i,r);else i=ff(i)?!!i.capture:!!i,n=Xk(n),t&&t[gf]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=pm(s,n,i,r),-1<n&&(mf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Ev(t))&&(e=t.g[e.toString()],t=-1,e&&(t=pm(e,n,i,r)),(n=-1<t?e[t]:null)&&Sv(n))}function Sv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[gf])fm(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Yk(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Ev(e))?(fm(n,t),n.h==0&&(n.src=null,e[bv]=null)):mf(t)}}}function Yk(t){return t in zp?zp[t]:zp[t]="on"+t}function IL(t,e){if(t.fa)t=!0;else{e=new Xl(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Sv(t),t=n.call(i,e)}return t}function Ev(t){return t=t[bv],t instanceof yf?t:null}var Up="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xk(t){return typeof t=="function"?t:(t[Up]||(t[Up]=function(e){return t.handleEvent(e)}),t[Up])}function ct(){Br.call(this),this.i=new yf(this),this.S=this,this.J=null}ut(ct,Br);ct.prototype[gf]=!0;ct.prototype.removeEventListener=function(t,e,n,i){Qk(this,t,e,n,i)};function yt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Ct(e,t);else if(e instanceof Ct)e.target=e.target||t;else{var r=e;e=new Ct(i,t),Kk(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Iu(o,i,!0,e)&&r}if(o=e.g=t,r=Iu(o,i,!0,e)&&r,r=Iu(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=Iu(o,i,!1,e)&&r}ct.prototype.N=function(){if(ct.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)mf(n[i]);delete t.g[e],t.h--}}this.J=null};ct.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};ct.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Iu(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&fm(t.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var kv=Q.JSON.stringify;class TL{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function CL(){var t=Iv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class NL{constructor(){this.h=this.g=null}add(e,n){const i=Jk.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var Jk=new TL(()=>new AL,t=>t.reset());class AL{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function DL(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function PL(t){Q.setTimeout(()=>{throw t},0)}let Jl,Zl=!1,Iv=new NL,Zk=()=>{const t=Q.Promise.resolve(void 0);Jl=()=>{t.then(ML)}};var ML=()=>{for(var t;t=CL();){try{t.h.call(t.g)}catch(n){PL(n)}var e=Jk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Zl=!1};function vf(t,e){ct.call(this),this.h=t||1,this.g=e||Q,this.j=Tt(this.qb,this),this.l=Date.now()}ut(vf,ct);B=vf.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yt(this,"tick"),this.ga&&(Tv(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Tv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}B.N=function(){vf.$.N.call(this),Tv(this),delete this.g};function Cv(t,e,n){if(typeof t=="function")n&&(t=Tt(t,n));else if(t&&typeof t.handleEvent=="function")t=Tt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Q.setTimeout(t,e||0)}function eI(t){t.g=Cv(()=>{t.g=null,t.i&&(t.i=!1,eI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class OL extends Br{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eI(this)}N(){super.N(),this.g&&(Q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ec(t){Br.call(this),this.h=t,this.g={}}ut(ec,Br);var V_=[];function tI(t,e,n,i){Array.isArray(n)||(n&&(V_[0]=n.toString()),n=V_);for(var r=0;r<n.length;r++){var s=Gk(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function nI(t){xv(t.g,function(e,n){this.g.hasOwnProperty(n)&&Sv(e)},t),t.g={}}ec.prototype.N=function(){ec.$.N.call(this),nI(this)};ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wf(){this.g=!0}wf.prototype.Ea=function(){this.g=!1};function RL(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function LL(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function ko(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+$L(t,n)+(i?" "+i:"")})}function FL(t,e){t.info(function(){return"TIMEOUT: "+e})}wf.prototype.info=function(){};function $L(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return kv(n)}catch{return e}}var Ys={},z_=null;function _f(){return z_=z_||new ct}Ys.Ta="serverreachability";function iI(t){Ct.call(this,Ys.Ta,t)}ut(iI,Ct);function tc(t){const e=_f();yt(e,new iI(e))}Ys.STAT_EVENT="statevent";function rI(t,e){Ct.call(this,Ys.STAT_EVENT,t),this.stat=e}ut(rI,Ct);function Ot(t){const e=_f();yt(e,new rI(e,t))}Ys.Ua="timingevent";function sI(t,e){Ct.call(this,Ys.Ua,t),this.size=e}ut(sI,Ct);function Mc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Q.setTimeout(function(){t()},e)}var xf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},oI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Nv(){}Nv.prototype.h=null;function U_(t){return t.h||(t.h=t.i())}function aI(){}var Oc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Av(){Ct.call(this,"d")}ut(Av,Ct);function Dv(){Ct.call(this,"c")}ut(Dv,Ct);var gm;function bf(){}ut(bf,Nv);bf.prototype.g=function(){return new XMLHttpRequest};bf.prototype.i=function(){return{}};gm=new bf;function Rc(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new ec(this),this.P=jL,t=um?125:void 0,this.V=new vf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new lI}function lI(){this.i=null,this.g="",this.h=!1}var jL=45e3,mm={},dd={};B=Rc.prototype;B.setTimeout=function(t){this.P=t};function ym(t,e,n){t.L=1,t.v=Ef(Ci(e)),t.s=n,t.S=!0,cI(t,null)}function cI(t,e){t.G=Date.now(),Lc(t),t.A=Ci(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),yI(n.i,"t",i),t.C=0,n=t.l.J,t.h=new lI,t.g=$I(t.l,n?e:null,!t.s),0<t.O&&(t.M=new OL(Tt(t.Pa,t,t.g),t.O)),tI(t.U,t.g,"readystatechange",t.nb),e=t.I?qk(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),tc(),RL(t.j,t.u,t.A,t.m,t.W,t.s)}B.nb=function(t){t=t.target;const e=this.M;e&&jn(t)==3?e.l():this.Pa(t)};B.Pa=function(t){try{if(t==this.g)e:{const u=jn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||um||this.g&&(this.h.h||this.g.ja()||K_(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?tc(3):tc(2)),Sf(this);var n=this.g.da();this.ca=n;t:if(uI(this)){var i=K_(this.g);t="";var r=i.length,s=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fs(this),gl(this);var o="";break t}this.h.i=new Q.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,LL(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yl(a)){var c=a;break t}}c=null}if(n=c)ko(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vm(this,n);else{this.i=!1,this.o=3,Ot(12),fs(this),gl(this);break e}}this.S?(hI(this,u,o),um&&this.i&&u==3&&(tI(this.U,this.V,"tick",this.mb),this.V.start())):(ko(this.j,this.m,o,null),vm(this,o)),u==4&&fs(this),this.i&&!this.J&&(u==4?OI(this.l,this):(this.i=!1,Lc(this)))}else o2(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ot(12)):(this.o=0,Ot(13)),fs(this),gl(this)}}}catch{}finally{}};function uI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function hI(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=BL(t,n),r==dd){e==4&&(t.o=4,Ot(14),i=!1),ko(t.j,t.m,null,"[Incomplete Response]");break}else if(r==mm){t.o=4,Ot(15),ko(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else ko(t.j,t.m,r,null),vm(t,r);uI(t)&&r!=dd&&r!=mm&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ot(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fv(e),e.M=!0,Ot(11))):(ko(t.j,t.m,n,"[Invalid Chunked Response]"),fs(t),gl(t))}B.mb=function(){if(this.g){var t=jn(this.g),e=this.g.ja();this.C<e.length&&(Sf(this),hI(this,t,e),this.i&&t!=4&&Lc(this))}};function BL(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?dd:(n=Number(e.substring(n,i)),isNaN(n)?mm:(i+=1,i+n>e.length?dd:(e=e.slice(i,i+n),t.C=i+n,e)))}B.cancel=function(){this.J=!0,fs(this)};function Lc(t){t.Y=Date.now()+t.P,dI(t,t.P)}function dI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Mc(Tt(t.lb,t),e)}function Sf(t){t.B&&(Q.clearTimeout(t.B),t.B=null)}B.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(FL(this.j,this.A),this.L!=2&&(tc(),Ot(17)),fs(this),this.o=2,gl(this)):dI(this,this.Y-t)};function gl(t){t.l.H==0||t.J||OI(t.l,t)}function fs(t){Sf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Tv(t.V),nI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function vm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||wm(n.i,t))){if(!t.K&&wm(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)gd(n),Tf(n);else break e;Lv(n),Ot(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=Mc(Tt(n.ib,n),6e3));if(1>=_I(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ps(n,11)}else if((t.K||n.g==t)&&gd(n),!Yl(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=i.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Pv(s,s.h),s.h=null))}if(i.F){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(i.Da=y,Se(i.I,i.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=FI(i,i.J?i.pa:null,i.Y),o.K){xI(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(Sf(a),Lc(a)),i.g=o}else PI(i);0<n.j.length&&Cf(n)}else c[0]!="stop"&&c[0]!="close"||ps(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ps(n,7):Rv(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}tc(4)}catch{}}function VL(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(df(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function zL(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(df(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function fI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(df(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=zL(t),i=VL(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var pI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UL(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function xs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof xs){this.h=t.h,fd(this,t.j),this.s=t.s,this.g=t.g,pd(this,t.m),this.l=t.l;var e=t.i,n=new nc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),W_(this,n),this.o=t.o}else t&&(e=String(t).match(pI))?(this.h=!1,fd(this,e[1]||"",!0),this.s=Xa(e[2]||""),this.g=Xa(e[3]||"",!0),pd(this,e[4]),this.l=Xa(e[5]||"",!0),W_(this,e[6]||"",!0),this.o=Xa(e[7]||"")):(this.h=!1,this.i=new nc(null,this.h))}xs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ja(e,H_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ja(e,H_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ja(n,n.charAt(0)=="/"?qL:HL,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ja(n,GL)),t.join("")};function Ci(t){return new xs(t)}function fd(t,e,n){t.j=n?Xa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function pd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function W_(t,e,n){e instanceof nc?(t.i=e,QL(t.i,t.h)):(n||(e=Ja(e,KL)),t.i=new nc(e,t.h))}function Se(t,e,n){t.i.set(e,n)}function Ef(t){return Se(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Xa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ja(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,WL),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function WL(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var H_=/[#\/\?@]/g,HL=/[#\?:]/g,qL=/[#\?]/g,KL=/[#\?@]/g,GL=/#/g;function nc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vr(t){t.g||(t.g=new Map,t.h=0,t.i&&UL(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}B=nc.prototype;B.add=function(t,e){Vr(this),this.i=null,t=ga(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function gI(t,e){Vr(t),e=ga(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function mI(t,e){return Vr(t),e=ga(t,e),t.g.has(e)}B.forEach=function(t,e){Vr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};B.ta=function(){Vr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};B.Z=function(t){Vr(this);let e=[];if(typeof t=="string")mI(this,t)&&(e=e.concat(this.g.get(ga(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};B.set=function(t,e){return Vr(this),this.i=null,t=ga(this,t),mI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};B.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function yI(t,e,n){gI(t,e),0<n.length&&(t.i=null,t.g.set(ga(t,e),wv(n)),t.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function ga(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function QL(t,e){e&&!t.j&&(Vr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(gI(this,i),yI(this,r,n))},t)),t.j=e}var YL=class{constructor(t,e){this.g=t,this.map=e}};function vI(t){this.l=t||XL,Q.PerformanceNavigationTiming?(t=Q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Q.g&&Q.g.Ka&&Q.g.Ka()&&Q.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var XL=10;function wI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function _I(t){return t.h?1:t.g?t.g.size:0}function wm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Pv(t,e){t.g?t.g.add(e):t.h=e}function xI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}vI.prototype.cancel=function(){if(this.i=bI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function bI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return wv(t.i)}var JL=class{stringify(t){return Q.JSON.stringify(t,void 0)}parse(t){return Q.JSON.parse(t,void 0)}};function ZL(){this.g=new JL}function e2(t,e,n){const i=n||"";try{fI(t,function(r,s){let o=r;ff(r)&&(o=kv(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function t2(t,e){const n=new wf;if(Q.Image){const i=new Image;i.onload=ku(Tu,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ku(Tu,n,i,"TestLoadImage: error",!1,e),i.onabort=ku(Tu,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ku(Tu,n,i,"TestLoadImage: timeout",!1,e),Q.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Tu(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Fc(t){this.l=t.fc||null,this.j=t.ob||!1}ut(Fc,Nv);Fc.prototype.g=function(){return new kf(this.l,this.j)};Fc.prototype.i=function(t){return function(){return t}}({});function kf(t,e){ct.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Mv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ut(kf,ct);var Mv=0;B=kf.prototype;B.open=function(t,e){if(this.readyState!=Mv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ic(this)};B.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Q).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$c(this)),this.readyState=Mv};B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ic(this)),this.g&&(this.readyState=3,ic(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;SI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function SI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?$c(this):ic(this),this.readyState==3&&SI(this)}};B.Za=function(t){this.g&&(this.response=this.responseText=t,$c(this))};B.Ya=function(t){this.g&&(this.response=t,$c(this))};B.ka=function(){this.g&&$c(this)};function $c(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ic(t)}B.setRequestHeader=function(t,e){this.v.append(t,e)};B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ic(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(kf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var n2=Q.JSON.parse;function ze(t){ct.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=EI,this.L=this.M=!1}ut(ze,ct);var EI="",i2=/^https?$/i,r2=["POST","PUT"];B=ze.prototype;B.Oa=function(t){this.M=t};B.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gm.g(),this.C=this.u?U_(this.u):U_(gm),this.g.onreadystatechange=Tt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){q_(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=Q.FormData&&t instanceof Q.FormData,!(0<=zk(r2,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{TI(this),0<this.B&&((this.L=s2(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tt(this.ua,this)):this.A=Cv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){q_(this,s)}};function s2(t){return Ko&&typeof t.timeout=="number"&&t.ontimeout!==void 0}B.ua=function(){typeof vv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yt(this,"timeout"),this.abort(8))};function q_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,kI(t),If(t)}function kI(t){t.F||(t.F=!0,yt(t,"complete"),yt(t,"error"))}B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,yt(this,"complete"),yt(this,"abort"),If(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),If(this,!0)),ze.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?II(this):this.kb())};B.kb=function(){II(this)};function II(t){if(t.h&&typeof vv<"u"&&(!t.C[1]||jn(t)!=4||t.da()!=2)){if(t.v&&jn(t)==4)Cv(t.La,0,t);else if(yt(t,"readystatechange"),jn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(pI)[1]||null;!r&&Q.self&&Q.self.location&&(r=Q.self.location.protocol.slice(0,-1)),i=!i2.test(r?r.toLowerCase():"")}n=i}if(n)yt(t,"complete"),yt(t,"success");else{t.m=6;try{var s=2<jn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",kI(t)}}finally{If(t)}}}}function If(t,e){if(t.g){TI(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||yt(t,"ready");try{n.onreadystatechange=i}catch{}}}function TI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Q.clearTimeout(t.A),t.A=null)}B.isActive=function(){return!!this.g};function jn(t){return t.g?t.g.readyState:0}B.da=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),n2(e)}};function K_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case EI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function o2(t){const e={};t=(t.g&&2<=jn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Yl(t[i]))continue;var n=DL(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}SL(e,function(i){return i.join(", ")})}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function CI(t){let e="";return xv(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function Ov(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=CI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Se(t,e,n))}function Ma(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function NI(t){this.Ga=0,this.j=[],this.l=new wf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ma("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ma("baseRetryDelayMs",5e3,t),this.hb=Ma("retryDelaySeedMs",1e4,t),this.eb=Ma("forwardChannelMaxRetries",2,t),this.xa=Ma("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new vI(t&&t.concurrentRequestLimit),this.Ja=new ZL,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}B=NI.prototype;B.ra=8;B.H=1;function Rv(t){if(AI(t),t.H==3){var e=t.W++,n=Ci(t.I);if(Se(n,"SID",t.K),Se(n,"RID",e),Se(n,"TYPE","terminate"),jc(t,n),e=new Rc(t,t.l,e),e.L=2,e.v=Ef(Ci(n)),n=!1,Q.navigator&&Q.navigator.sendBeacon)try{n=Q.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Q.Image&&(new Image().src=e.v,n=!0),n||(e.g=$I(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Lc(e)}LI(t)}function Tf(t){t.g&&(Fv(t),t.g.cancel(),t.g=null)}function AI(t){Tf(t),t.u&&(Q.clearTimeout(t.u),t.u=null),gd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Q.clearTimeout(t.m),t.m=null)}function Cf(t){if(!wI(t.i)&&!t.m){t.m=!0;var e=t.Na;Jl||Zk(),Zl||(Jl(),Zl=!0),Iv.add(e,t),t.C=0}}function a2(t,e){return _I(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Mc(Tt(t.Na,t,e),RI(t,t.C)),t.C++,!0)}B.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new Rc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=qk(s),Kk(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=DI(this,r,e),n=Ci(this.I),Se(n,"RID",t),Se(n,"CVER",22),this.F&&Se(n,"X-HTTP-Session-Id",this.F),jc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(CI(s)))+"&"+e:this.o&&Ov(n,this.o,s)),Pv(this.i,r),this.bb&&Se(n,"TYPE","init"),this.P?(Se(n,"$req",e),Se(n,"SID","null"),r.aa=!0,ym(r,n,null)):ym(r,n,e),this.H=2}}else this.H==3&&(t?G_(this,t):this.j.length==0||wI(this.i)||G_(this))};function G_(t,e){var n;e?n=e.m:n=t.W++;const i=Ci(t.I);Se(i,"SID",t.K),Se(i,"RID",n),Se(i,"AID",t.V),jc(t,i),t.o&&t.s&&Ov(i,t.o,t.s),n=new Rc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=DI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Pv(t.i,n),ym(n,i,e)}function jc(t,e){t.na&&xv(t.na,function(n,i){Se(e,i,n)}),t.h&&fI({},function(n,i){Se(e,i,n)})}function DI(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Tt(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].g;const u=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{e2(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function PI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Jl||Zk(),Zl||(Jl(),Zl=!0),Iv.add(e,t),t.A=0}}function Lv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Mc(Tt(t.Ma,t),RI(t,t.A)),t.A++,!0)}B.Ma=function(){if(this.u=null,MI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Mc(Tt(this.jb,this),t)}};B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ot(10),Tf(this),MI(this))};function Fv(t){t.B!=null&&(Q.clearTimeout(t.B),t.B=null)}function MI(t){t.g=new Rc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ci(t.wa);Se(e,"RID","rpc"),Se(e,"SID",t.K),Se(e,"AID",t.V),Se(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Se(e,"TO",t.qa),Se(e,"TYPE","xmlhttp"),jc(t,e),t.o&&t.s&&Ov(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Ef(Ci(e)),n.s=null,n.S=!0,cI(n,t)}B.ib=function(){this.v!=null&&(this.v=null,Tf(this),Lv(this),Ot(19))};function gd(t){t.v!=null&&(Q.clearTimeout(t.v),t.v=null)}function OI(t,e){var n=null;if(t.g==e){gd(t),Fv(t),t.g=null;var i=2}else if(wm(t.i,e))n=e.F,xI(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=_f(),yt(i,new sI(i,n)),Cf(t)}else PI(t);else if(r=e.o,r==3||r==0&&0<e.ca||!(i==1&&a2(t,e)||i==2&&Lv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:ps(t,5);break;case 4:ps(t,10);break;case 3:ps(t,6);break;default:ps(t,2)}}}function RI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ps(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Tt(t.pb,t);n||(n=new xs("//www.google.com/images/cleardot.gif"),Q.location&&Q.location.protocol=="http"||fd(n,"https"),Ef(n)),t2(n.toString(),i)}else Ot(2);t.H=0,t.h&&t.h.za(e),LI(t),AI(t)}B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ot(2)):(this.l.info("Failed to ping google.com"),Ot(1))};function LI(t){if(t.H=0,t.ma=[],t.h){const e=bI(t.i);(e.length!=0||t.j.length!=0)&&($_(t.ma,e),$_(t.ma,t.j),t.i.i.length=0,wv(t.j),t.j.length=0),t.h.ya()}}function FI(t,e,n){var i=n instanceof xs?Ci(n):new xs(n);if(i.g!="")e&&(i.g=e+"."+i.g),pd(i,i.m);else{var r=Q.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new xs(null);i&&fd(s,i),e&&(s.g=e),r&&pd(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Se(i,n,e),Se(i,"VER",t.ra),jc(t,i),i}function $I(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ze(new Fc({ob:!0})):new ze(t.va),e.Oa(t.J),e}B.isActive=function(){return!!this.h&&this.h.isActive(this)};function jI(){}B=jI.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.isActive=function(){return!0};B.Va=function(){};function md(){if(Ko&&!(10<=Number(wL)))throw Error("Environmental error: no available transport.")}md.prototype.g=function(t,e){return new on(t,e)};function on(t,e){ct.call(this),this.g=new NI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Yl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ma(this)}ut(on,ct);on.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ot(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=FI(t,null,t.Y),Cf(t)};on.prototype.close=function(){Rv(this.g)};on.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=kv(t),t=n);e.j.push(new YL(e.fb++,t)),e.H==3&&Cf(e)};on.prototype.N=function(){this.g.h=null,delete this.j,Rv(this.g),delete this.g,on.$.N.call(this)};function BI(t){Av.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ut(BI,Av);function VI(){Dv.call(this),this.status=1}ut(VI,Dv);function ma(t){this.g=t}ut(ma,jI);ma.prototype.Ba=function(){yt(this.g,"a")};ma.prototype.Aa=function(t){yt(this.g,new BI(t))};ma.prototype.za=function(t){yt(this.g,new VI)};ma.prototype.ya=function(){yt(this.g,"b")};function l2(){this.blockSize=-1}function Nn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ut(Nn,l2);Nn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Wp(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Nn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)Wp(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Wp(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Wp(this,i),r=0;break}}this.h=r,this.i+=e};Nn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function pe(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var c2={};function $v(t){return-128<=t&&128>t?mL(t,function(e){return new pe([e|0],0>e?-1:0)}):new pe([t|0],0>t?-1:0)}function Bn(t){if(isNaN(t)||!isFinite(t))return Mo;if(0>t)return pt(Bn(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=_m;return new pe(e,0)}function zI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return pt(zI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Bn(Math.pow(e,8)),i=Mo,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Bn(Math.pow(e,s)),i=i.R(s).add(Bn(o))):(i=i.R(n),i=i.add(Bn(o)))}return i}var _m=4294967296,Mo=$v(0),xm=$v(1),Q_=$v(16777216);B=pe.prototype;B.ea=function(){if(fn(this))return-pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:_m+i)*e,e*=_m}return t};B.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(fi(this))return"0";if(fn(this))return"-"+pt(this).toString(t);for(var e=Bn(Math.pow(t,6)),n=this,i="";;){var r=vd(n,e).g;n=yd(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,fi(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function fi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function fn(t){return t.h==-1}B.X=function(t){return t=yd(this,t),fn(t)?-1:fi(t)?0:1};function pt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new pe(n,~t.h).add(xm)}B.abs=function(){return fn(this)?pt(this):this};B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new pe(n,n[n.length-1]&-2147483648?-1:0)};function yd(t,e){return t.add(pt(e))}B.R=function(t){if(fi(this)||fi(t))return Mo;if(fn(this))return fn(t)?pt(this).R(pt(t)):pt(pt(this).R(t));if(fn(t))return pt(this.R(pt(t)));if(0>this.X(Q_)&&0>t.X(Q_))return Bn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,l=t.D(r)&65535;n[2*i+2*r]+=o*l,Cu(n,2*i+2*r),n[2*i+2*r+1]+=s*l,Cu(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Cu(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Cu(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new pe(n,0)};function Cu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Oa(t,e){this.g=t,this.h=e}function vd(t,e){if(fi(e))throw Error("division by zero");if(fi(t))return new Oa(Mo,Mo);if(fn(t))return e=vd(pt(t),e),new Oa(pt(e.g),pt(e.h));if(fn(e))return e=vd(t,pt(e)),new Oa(pt(e.g),e.h);if(30<t.g.length){if(fn(t)||fn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xm,i=e;0>=i.X(t);)n=Y_(n),i=Y_(i);var r=ro(n,1),s=ro(i,1);for(i=ro(i,2),n=ro(n,2);!fi(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=ro(i,1),n=ro(n,1)}return e=yd(t,r.R(e)),new Oa(r,e)}for(r=Mo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Bn(n),o=s.R(e);fn(o)||0<o.X(t);)n-=i,s=Bn(n),o=s.R(e);fi(s)&&(s=xm),r=r.add(s),t=yd(t,o)}return new Oa(r,t)}B.gb=function(t){return vd(this,t).h};B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new pe(n,this.h&t.h)};B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new pe(n,this.h|t.h)};B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new pe(n,this.h^t.h)};function Y_(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new pe(n,t.h)}function ro(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new pe(r,t.h)}md.prototype.createWebChannel=md.prototype.g;on.prototype.send=on.prototype.u;on.prototype.open=on.prototype.m;on.prototype.close=on.prototype.close;xf.NO_ERROR=0;xf.TIMEOUT=8;xf.HTTP_ERROR=6;oI.COMPLETE="complete";aI.EventType=Oc;Oc.OPEN="a";Oc.CLOSE="b";Oc.ERROR="c";Oc.MESSAGE="d";ct.prototype.listen=ct.prototype.O;ze.prototype.listenOnce=ze.prototype.P;ze.prototype.getLastError=ze.prototype.Sa;ze.prototype.getLastErrorCode=ze.prototype.Ia;ze.prototype.getStatus=ze.prototype.da;ze.prototype.getResponseJson=ze.prototype.Wa;ze.prototype.getResponseText=ze.prototype.ja;ze.prototype.send=ze.prototype.ha;ze.prototype.setWithCredentials=ze.prototype.Oa;Nn.prototype.digest=Nn.prototype.l;Nn.prototype.reset=Nn.prototype.reset;Nn.prototype.update=Nn.prototype.j;pe.prototype.add=pe.prototype.add;pe.prototype.multiply=pe.prototype.R;pe.prototype.modulo=pe.prototype.gb;pe.prototype.compare=pe.prototype.X;pe.prototype.toNumber=pe.prototype.ea;pe.prototype.toString=pe.prototype.toString;pe.prototype.getBits=pe.prototype.D;pe.fromNumber=Bn;pe.fromString=zI;var u2=function(){return new md},h2=function(){return _f()},Hp=xf,d2=oI,f2=Ys,X_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},p2=Fc,Nu=aI,g2=ze,m2=Nn,Oo=pe,y2={};const J_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new uf("@firebase/firestore");function bm(){return kr.logLevel}function v2(t){kr.setLogLevel(t)}function M(t,...e){if(kr.logLevel<=ae.DEBUG){const n=e.map(jv);kr.debug(`Firestore (${ya}): ${t}`,...n)}}function He(t,...e){if(kr.logLevel<=ae.ERROR){const n=e.map(jv);kr.error(`Firestore (${ya}): ${t}`,...n)}}function An(t,...e){if(kr.logLevel<=ae.WARN){const n=e.map(jv);kr.warn(`Firestore (${ya}): ${t}`,...n)}}function jv(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t="Unexpected state"){const e=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: `+t;throw He(e),new Error(e)}function q(t,e){t||V()}function w2(t,e){t||V()}function j(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class P extends ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}}let x2=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}};class b2{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new lt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lt,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(q(typeof i.accessToken=="string"),new UI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return q(e===null||typeof e=="string"),new st(e)}}let S2=class{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=st.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}};class E2{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new S2(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I2{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=s=>{s.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,M("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(q(typeof n.token=="string"),this.T=n.token,new k2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=T2(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function X(t,e){return t<e?-1:t>e?1:0}function Go(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function HI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new P(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new P(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new P(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Me(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.timestamp=e}static fromTimestamp(e){return new H(e)}static min(){return new H(new Me(0,0))}static max(){return new H(new Me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,i){n===void 0?n=0:n>e.length&&V(),i===void 0?i=e.length-n:i>e.length-n&&V(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return rc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rc?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class le extends rc{construct(e,n,i){return new le(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new P(C.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new le(n)}static emptyPath(){return new le([])}}const C2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends rc{construct(e,n,i){return new qe(e,n,i)}static isValidIdentifier(e){return C2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qe(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new P(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new P(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new P(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new P(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.path=e}static fromPath(e){return new F(le.fromString(e))}static fromName(e){return new F(le.fromString(e).popFirst(5))}static empty(){return new F(le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new le(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function Sm(t){return t.fields.find(e=>e.kind===2)}function ns(t){return t.fields.filter(e=>e.kind!==2)}qI.UNKNOWN_ID=-1;class N2{constructor(e,n){this.fieldPath=e,this.kind=n}}class wd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new wd(0,an.min())}}function KI(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=H.fromTimestamp(i===1e9?new Me(n+1,0):new Me(n,i));return new an(r,F.empty(),e)}function GI(t){return new an(t.readTime,t.key,-1)}class an{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new an(H.min(),F.empty(),-1)}static max(){return new an(H.max(),F.empty(),-1)}}function Bv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=F.comparator(t.documentKey,e.documentKey),n!==0?n:X(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zr(t){if(t.code!==C.FAILED_PRECONDITION||t.message!==QI)throw t;M("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&V(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new T((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof T?n:T.resolve(n)}catch(n){return T.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):T.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):T.reject(n)}static resolve(e){return new T((n,i)=>{n(e)})}static reject(e){return new T((n,i)=>{i(e)})}static waitFor(e){return new T((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=T.resolve(!1);for(const i of e)n=n.next(r=>r?T.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new T((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new T((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new lt,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new ml(e,n.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=Vv(i.target.error);this.v.reject(new ml(e,r))}}static open(e,n,i,r){try{return new Nf(n,e.transaction(r,i))}catch(s){throw new ml(n,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(M("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new D2(n)}}class Sn{constructor(e,n,i){this.name=e,this.version=n,this.V=i,Sn.S(tt())===12.2&&He("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return M("SimpleDb","Removing database:",e),ss(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Nk())return!1;if(Sn.C())return!0;const e=tt(),n=Sn.S(e),i=0<n&&n<10,r=Sn.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=y2)===null||e===void 0?void 0:e.k)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async $(e){return this.db||(M("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const o=s.target.result;n(o)},r.onblocked=()=>{i(new ml(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const o=s.target.error;o.name==="VersionError"?i(new P(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new P(C.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new ml(e,o))},r.onupgradeneeded=s=>{M("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.V.O(o,r.transaction,s.oldVersion,this.version).next(()=>{M("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=n=>this.F(n)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.$(e);const a=Nf.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.P(),c)).catch(c=>(a.abort(c),T.reject(c))).toPromise();return l.catch(()=>{}),await a.R,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(M("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class A2{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ss(this.L.delete())}}class ml extends P{constructor(e,n){super(C.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ur(t){return t.name==="IndexedDbTransactionError"}class D2{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(M("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(M("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ss(i)}add(e){return M("SimpleDb","ADD",this.store.name,e,e),ss(this.store.add(e))}get(e){return ss(this.store.get(e)).next(n=>(n===void 0&&(n=null),M("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return M("SimpleDb","DELETE",this.store.name,e),ss(this.store.delete(e))}count(){return M("SimpleDb","COUNT",this.store.name),ss(this.store.count())}j(e,n){const i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){const r=this.cursor(i),s=[];return this.W(r,(o,a)=>{s.push(a)}).next(()=>s)}{const r=this.store.getAll(i.range);return new T((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}H(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new T((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}J(e,n){M("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}X(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.W(r,n)}Z(e){const n=this.cursor({});return new T((i,r)=>{n.onerror=s=>{const o=Vv(s.target.error);r(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,n){const i=[];return new T((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new A2(a),c=n(a.primaryKey,a.value,l);if(c instanceof T){const u=c.catch(h=>(l.done(),T.reject(h)));i.push(u)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>T.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ss(t){return new T((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=Vv(i.target.error);n(r)}})}let Z_=!1;function Vv(t){const e=Sn.S(tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Z_||(Z_=!0,setTimeout(()=>{throw i},0)),i}}return t}class P2{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){M("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{M("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(n){Ur(n)?M("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await zr(n)}await this.et(6e4)})}}class M2{constructor(e,n){this.localStore=e,this.persistence=n}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.st(n,e))}st(e,n){const i=new Set;let r=n,s=!0;return T.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return M("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>n-r)}it(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(r,s)).next(a=>(M("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}rt(e,n){let i=e;return n.changes.forEach((r,s)=>{const o=GI(s);Bv(o,i)>0&&(i=o)}),new an(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Wt.ct=-1;function Bc(t){return t==null}function sc(t){return t===0&&1/t==-1/0}function XI(t){return typeof t=="number"&&Number.isInteger(t)&&!sc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ex(e)),e=O2(t.get(n),e);return ex(e)}function O2(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function ex(t){return t+""}function Vn(t){const e=t.length;if(q(e>=2),e===2)return q(t.charAt(0)===""&&t.charAt(1)===""),le.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&V(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,o),r+="\0";break;case"":r+=t.substring(s,o+1);break;default:V()}s=o+2}return new le(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t,e){return[t,Lt(e)]}function JI(t,e,n){return[t,Lt(e),n]}const R2={},L2=["prefixPath","collectionGroup","readTime","documentId"],F2=["prefixPath","collectionGroup","documentId"],$2=["collectionGroup","readTime","prefixPath","documentId"],j2=["canonicalId","targetId"],B2=["targetId","path"],V2=["path","targetId"],z2=["collectionId","parent"],U2=["indexId","uid"],W2=["uid","sequenceNumber"],H2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],q2=["indexId","uid","orderedDocumentKey"],K2=["userId","collectionPath","documentId"],G2=["userId","collectionPath","largestBatchId"],Q2=["userId","collectionGroup","largestBatchId"],ZI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Y2=[...ZI,"documentOverlays"],eT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tT=eT,X2=[...tT,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends YI{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function ht(t,e){const n=j(t);return Sn.M(n.ht,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $e=class km{constructor(e,n){this.comparator=e,this.root=n||vr.EMPTY}insert(e,n){return new km(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new km(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Au(this.root,e,this.comparator,!1)}getReverseIterator(){return new Au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Au(this.root,e,this.comparator,!0)}};class Au{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}let vr=class ri{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??ri.RED,this.left=r??ri.EMPTY,this.right=s??ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new ri(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ri.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw V();const e=this.left.check();if(e!==this.right.check())throw V();return e+(this.isRed()?0:1)}};vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1;vr.EMPTY=new class{constructor(){this.size=0}get key(){throw V()}get value(){throw V()}get color(){throw V()}get left(){throw V()}get right(){throw V()}copy(t,e,n,i,r){return this}insert(t,e,n){return new vr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ix(this.data.getIterator())}getIteratorFrom(e){return new ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ce)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ce(this.comparator);return n.data=e,n}}let ix=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function so(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new Ce(qe.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new iT("Invalid base64 string: "+r):r}}(e);return new nt(n)}static fromUint8Array(e){const n=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const Z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(t){if(q(!!t),typeof t=="string"){let e=0;const n=Z2.exec(t);if(q(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tr(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zv(t){const e=t.mapValue.fields.__previous_value__;return Af(e)?zv(e):e}function oc(t){const e=Ir(t.mapValue.fields.__local_write_time__.timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Cr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Cr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Cr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mh={nullValue:"NULL_VALUE"};function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Af(t)?4:rT(t)?9007199254740991:10:V()}function Xn(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oc(t).isEqual(oc(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Ir(i.timestampValue),o=Ir(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Tr(i.bytesValue).isEqual(Tr(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Be(i.geoPointValue.latitude)===Be(r.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Be(i.integerValue)===Be(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Be(i.doubleValue),o=Be(r.doubleValue);return s===o?sc(s)===sc(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Go(t.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(nx(s)!==nx(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Xn(s[a],o[a])))return!1;return!0}(t,e);default:return V()}}function ac(t,e){return(t.values||[]).find(n=>Xn(n,e))!==void 0}function Nr(t,e){if(t===e)return 0;const n=Ps(t),i=Ps(e);if(n!==i)return X(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return X(t.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Be(r.integerValue||r.doubleValue),a=Be(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return rx(t.timestampValue,e.timestampValue);case 4:return rx(oc(t),oc(e));case 5:return X(t.stringValue,e.stringValue);case 6:return function(r,s){const o=Tr(r),a=Tr(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=X(o[l],a[l]);if(c!==0)return c}return X(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,s){const o=X(Be(r.latitude),Be(s.latitude));return o!==0?o:X(Be(r.longitude),Be(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Nr(o[l],a[l]);if(c)return c}return X(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===ir.mapValue&&s===ir.mapValue)return 0;if(r===ir.mapValue)return 1;if(s===ir.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=X(a[u],c[u]);if(h!==0)return h;const d=Nr(o[a[u]],l[c[u]]);if(d!==0)return d}return X(a.length,c.length)}(t.mapValue,e.mapValue);default:throw V()}}function rx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return X(t,e);const n=Ir(t),i=Ir(e),r=X(n.seconds,i.seconds);return r!==0?r:X(n.nanos,i.nanos)}function Qo(t){return Im(t)}function Im(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=Ir(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Tr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,F.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=Im(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${Im(i.fields[a])}`;return s+"}"}(t.mapValue):V();var e,n}function Ms(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tm(t){return!!t&&"integerValue"in t}function lc(t){return!!t&&"arrayValue"in t}function sx(t){return!!t&&"nullValue"in t}function ox(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yh(t){return!!t&&"mapValue"in t}function yl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=yl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function tF(t){return"nullValue"in t?mh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ms(Cr.empty(),F.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:V()}function nF(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ms(Cr.empty(),F.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ir:V()}function ax(t,e){const n=Nr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function lx(t,e){const n=Nr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.value=e}static empty(){return new gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(n)}setAll(e){let n=qe.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=yl(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];yh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Xs(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new gt(yl(this.value))}}function sT(t){const e=[];return Xs(t.fields,(n,i)=>{const r=new qe([n]);if(yh(i)){const s=sT(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ee(e,0,H.min(),H.min(),H.min(),gt.empty(),0)}static newFoundDocument(e,n,i,r){return new Ee(e,1,n,H.min(),i,r,0)}static newNoDocument(e,n){return new Ee(e,2,n,H.min(),H.min(),gt.empty(),0)}static newUnknownDocument(e,n){return new Ee(e,3,n,H.min(),H.min(),gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ee&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){this.position=e,this.inclusive=n}}function cx(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=F.comparator(F.fromName(o.referenceValue),n.key):i=Nr(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function ux(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n="asc"){this.field=e,this.dir=n}}function iF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{}class te extends oT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new rF(e,n,i):n==="array-contains"?new aF(e,i):n==="in"?new dT(e,i):n==="not-in"?new lF(e,i):n==="array-contains-any"?new cF(e,i):new te(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new sF(e,i):new oF(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Nr(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(Nr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class de extends oT{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new de(e,n)}matches(e){return Yo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Yo(t){return t.op==="and"}function Cm(t){return t.op==="or"}function Uv(t){return aT(t)&&Yo(t)}function aT(t){for(const e of t.filters)if(e instanceof de)return!1;return!0}function Nm(t){if(t instanceof te)return t.field.canonicalString()+t.op.toString()+Qo(t.value);if(Uv(t))return t.filters.map(e=>Nm(e)).join(",");{const e=t.filters.map(n=>Nm(n)).join(",");return`${t.op}(${e})`}}function lT(t,e){return t instanceof te?function(n,i){return i instanceof te&&n.op===i.op&&n.field.isEqual(i.field)&&Xn(n.value,i.value)}(t,e):t instanceof de?function(n,i){return i instanceof de&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((r,s,o)=>r&&lT(s,i.filters[o]),!0):!1}(t,e):void V()}function cT(t,e){const n=t.filters.concat(e);return de.create(n,t.op)}function uT(t){return t instanceof te?function(e){return`${e.field.canonicalString()} ${e.op} ${Qo(e.value)}`}(t):t instanceof de?function(e){return e.op.toString()+" {"+e.getFilters().map(uT).join(" ,")+"}"}(t):"Filter"}class rF extends te{constructor(e,n,i){super(e,n,i),this.key=F.fromName(i.referenceValue)}matches(e){const n=F.comparator(e.key,this.key);return this.matchesComparison(n)}}class sF extends te{constructor(e,n){super(e,"in",n),this.keys=hT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oF extends te{constructor(e,n){super(e,"not-in",n),this.keys=hT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>F.fromName(i.referenceValue))}class aF extends te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lc(n)&&ac(n.arrayValue,this.value)}}class dT extends te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ac(this.value.arrayValue,n)}}class lF extends te{constructor(e,n){super(e,"not-in",n)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ac(this.value.arrayValue,n)}}class cF extends te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ac(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function Am(t,e=null,n=[],i=[],r=null,s=null,o=null){return new uF(t,e,n,i,r,s,o)}function Os(t){const e=j(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Nm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Bc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Qo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Qo(i)).join(",")),e.dt=n}return e.dt}function Vc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ux(t.startAt,e.startAt)&&ux(t.endAt,e.endAt)}function _d(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function xd(t,e){return t.filters.filter(n=>n instanceof te&&n.field.isEqual(e))}function hx(t,e,n){let i=mh,r=!0;for(const s of xd(t,e)){let o=mh,a=!0;switch(s.op){case"<":case"<=":o=tF(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=mh}ax({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];ax({value:i,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}function dx(t,e,n){let i=ir,r=!0;for(const s of xd(t,e)){let o=ir,a=!0;switch(s.op){case">=":case">":o=nF(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ir}lx({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];lx({value:i,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function fT(t,e,n,i,r,s,o,a){return new Mi(t,e,n,i,r,s,o,a)}function va(t){return new Mi(t)}function fx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Wv(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Df(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Hv(t){return t.collectionGroup!==null}function bs(t){const e=j(t);if(e.wt===null){e.wt=[];const n=Df(e),i=Wv(e);if(n!==null&&i===null)n.isKeyField()||e.wt.push(new Ro(n)),e.wt.push(new Ro(qe.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ro(qe.keyField(),s))}}}return e.wt}function Yt(t){const e=j(t);if(!e._t)if(e.limitType==="F")e._t=Am(e.path,e.collectionGroup,bs(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of bs(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Ro(s.field,o))}const i=e.endAt?new Ar(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ar(e.startAt.position,e.startAt.inclusive):null;e._t=Am(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e._t}function Dm(t,e){e.getFirstInequalityField(),Df(t);const n=t.filters.concat([e]);return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bd(t,e,n){return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zc(t,e){return Vc(Yt(t),Yt(e))&&t.limitType===e.limitType}function pT(t){return`${Os(Yt(t))}|lt:${t.limitType}`}function Pm(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>uT(i)).join(", ")}]`),Bc(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Qo(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Qo(i)).join(",")),`Target(${n})`}(Yt(t))}; limitType=${t.limitType})`}function Uc(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):F.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of bs(n))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(r,s,o){const a=cx(r,s,o);return r.inclusive?a<=0:a<0}(n.startAt,bs(n),i)||n.endAt&&!function(r,s,o){const a=cx(r,s,o);return r.inclusive?a>=0:a>0}(n.endAt,bs(n),i))}(t,e)}function gT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mT(t){return(e,n)=>{let i=!1;for(const r of bs(t)){const s=hF(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function hF(t,e,n){const i=t.field.isKeyField()?F.comparator(e.key,n.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return a!==null&&l!==null?Nr(a,l):V()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return V()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return nT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new $e(F.comparator);function qt(){return dF}const yT=new $e(F.comparator);function Za(...t){let e=yT;for(const n of t)e=e.insert(n.key,n);return e}function vT(t){let e=yT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function zn(){return vl()}function wT(){return vl()}function vl(){return new Wr(t=>t.toString(),(t,e)=>t.isEqual(e))}const fF=new $e(F.comparator),pF=new Ce(F.comparator);function Z(...t){let e=pF;for(const n of t)e=e.add(n);return e}const gF=new Ce(X);function qv(){return gF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sc(e)?"-0":e}}function xT(t){return{integerValue:""+t}}function bT(t,e){return XI(e)?xT(e):_T(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this._=void 0}}function mF(t,e,n){return t instanceof Xo?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Af(r)&&(r=zv(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(n,e):t instanceof Rs?ET(t,e):t instanceof Ls?kT(t,e):function(i,r){const s=ST(i,r),o=px(s)+px(i.gt);return Tm(s)&&Tm(i.gt)?xT(o):_T(i.serializer,o)}(t,e)}function yF(t,e,n){return t instanceof Rs?ET(t,e):t instanceof Ls?kT(t,e):n}function ST(t,e){return t instanceof Jo?Tm(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class Xo extends Pf{}class Rs extends Pf{constructor(e){super(),this.elements=e}}function ET(t,e){const n=IT(e);for(const i of t.elements)n.some(r=>Xn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ls extends Pf{constructor(e){super(),this.elements=e}}function kT(t,e){let n=IT(e);for(const i of t.elements)n=n.filter(r=>!Xn(r,i));return{arrayValue:{values:n}}}class Jo extends Pf{constructor(e,n){super(),this.serializer=e,this.gt=n}}function px(t){return Be(t.integerValue||t.doubleValue)}function IT(t){return lc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.field=e,this.transform=n}}function vF(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Rs&&i instanceof Rs||n instanceof Ls&&i instanceof Ls?Go(n.elements,i.elements,Xn):n instanceof Jo&&i instanceof Jo?Xn(n.gt,i.gt):n instanceof Xo&&i instanceof Xo}(t.transform,e.transform)}class wF{constructor(e,n){this.version=e,this.transformResults=n}}class Pe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pe}static exists(e){return new Pe(void 0,e)}static updateTime(e){return new Pe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mf{}function TT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _a(t.key,Pe.none()):new wa(t.key,t.data,Pe.none());{const n=t.data,i=gt.empty();let r=new Ce(qe.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Oi(t.key,i,new Ht(r.toArray()),Pe.none())}}function _F(t,e,n){t instanceof wa?function(i,r,s){const o=i.value.clone(),a=mx(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Oi?function(i,r,s){if(!vh(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=mx(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(CT(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function wl(t,e,n,i){return t instanceof wa?function(r,s,o,a){if(!vh(r.precondition,s))return o;const l=r.value.clone(),c=yx(r.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Oi?function(r,s,o,a){if(!vh(r.precondition,s))return o;const l=yx(r.fieldTransforms,a,s),c=s.data;return c.setAll(CT(r)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(t,e,n,i):function(r,s,o){return vh(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function xF(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=ST(i.transform,r||null);s!=null&&(n===null&&(n=gt.empty()),n.set(i.field,s))}return n||null}function gx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Go(n,i,(r,s)=>vF(r,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wa extends Mf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Oi extends Mf{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function mx(t,e,n){const i=new Map;q(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,yF(o,a,n[r]))}return i}function yx(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,mF(s,o,e))}return i}class _a extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kv extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&_F(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=wl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=wl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=wT();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=TT(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(H.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(n,i)=>gx(n,i))&&Go(this.baseMutations,e.baseMutations,(n,i)=>gx(n,i))}}class Qv{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){q(e.mutations.length===i.length);let r=fF;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Qv(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,oe;function NT(t){switch(t){default:return V();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function AT(t){if(t===void 0)return He("GRPC error has no .code"),C.UNKNOWN;switch(t){case Qe.OK:return C.OK;case Qe.CANCELLED:return C.CANCELLED;case Qe.UNKNOWN:return C.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return C.INTERNAL;case Qe.UNAVAILABLE:return C.UNAVAILABLE;case Qe.UNAUTHENTICATED:return C.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case Qe.NOT_FOUND:return C.NOT_FOUND;case Qe.ALREADY_EXISTS:return C.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return C.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case Qe.ABORTED:return C.ABORTED;case Qe.OUT_OF_RANGE:return C.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return C.UNIMPLEMENTED;case Qe.DATA_LOSS:return C.DATA_LOSS;default:return V()}}(oe=Qe||(Qe={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Du}static getOrCreateInstance(){return Du===null&&(Du=new Xv),Du}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Du=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=new Oo([4294967295,4294967295],0);function vx(t){const e=DT().encode(t),n=new m2;return n.update(e),new Uint8Array(n.digest())}function wx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Oo([n,i],0),new Oo([r,s],0)]}class Jv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new el(`Invalid padding: ${n}`);if(i<0)throw new el(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new el(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new el(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Oo.fromNumber(this.It)}Et(e,n,i){let r=e.add(n.multiply(Oo.fromNumber(i)));return r.compare(SF)===1&&(r=new Oo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=vx(e),[i,r]=wx(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);if(!this.At(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Jv(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=vx(e),[i,r]=wx(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,qc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Hc(H.min(),r,new $e(X),qt(),Z())}}class qc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new qc(i,n,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,i,r){this.Pt=e,this.removedTargetIds=n,this.key=i,this.bt=r}}class PT{constructor(e,n){this.targetId=e,this.Vt=n}}class MT{constructor(e,n,i=nt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class _x{constructor(){this.St=0,this.Dt=bx(),this.Ct=nt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Z(),n=Z(),i=Z();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:V()}}),new qc(this.Ct,this.xt,e,n,i)}Ft(){this.Nt=!1,this.Dt=bx()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class EF{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=qt(),this.zt=xx(),this.Wt=new $e(X)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const i=this.Zt(n);switch(e.state){case 0:this.te(n)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(n);break;case 3:this.te(n)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),i.$t(e.resumeToken));break;default:V()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((i,r)=>{this.te(r)&&n(r)})}ne(e){var n;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const o=s.target;if(_d(o))if(r===0){const a=new F(o.path);this.Yt(i,a,Ee.newNoDocument(a,H.min()))}else q(r===1);else{const a=this.ie(i);if(a!==r){const l=this.re(e,a);if(l!==0){this.ee(i);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(i,c)}(n=Xv.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(c,u,h){var d,f,g,y,w,p;const m={localCacheCount:u,existenceFilterCount:h.count},v=h.unchangedNames;return v&&(m.bloomFilter={applied:c===0,hashCount:(d=v==null?void 0:v.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(y=(g=(f=v==null?void 0:v.bits)===null||f===void 0?void 0:f.bitmap)===null||g===void 0?void 0:g.length)!==null&&y!==void 0?y:0,padding:(p=(w=v==null?void 0:v.bits)===null||w===void 0?void 0:w.padding)!==null&&p!==void 0?p:0}),m}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=i;let l,c;try{l=Tr(s).toUint8Array()}catch(u){if(u instanceof iT)return An("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new Jv(l,o,a)}catch(u){return An(u instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return c.It===0?1:r!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),r++)}),r}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&_d(a.target)){const l=new F(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,Ee.newNoDocument(l,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let i=Z();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.se(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const r=new Hc(e,n,this.Wt,this.jt,i);return this.jt=qt(),this.zt=xx(),this.Wt=new $e(X),r}Jt(e,n){if(!this.te(e))return;const i=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,i),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,n)?r.Bt(n,1):r.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),i&&(this.jt=this.jt.insert(n,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new _x,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Ce(X),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||M("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new _x),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function xx(){return new $e(F.comparator)}function bx(){return new $e(F.comparator)}const kF={asc:"ASCENDING",desc:"DESCENDING"},IF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TF={and:"AND",or:"OR"};class CF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mm(t,e){return t.useProto3Json||Bc(e)?e:{value:e}}function Zo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NF(t,e){return Zo(t,e.toTimestamp())}function Ge(t){return q(!!t),H.fromTimestamp(function(e){const n=Ir(e);return new Me(n.seconds,n.nanos)}(t))}function Zv(t,e){return function(n){return new le(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function RT(t){const e=le.fromString(t);return q(WT(e)),e}function cc(t,e){return Zv(t.databaseId,e.path)}function qn(t,e){const n=RT(e);if(n.get(1)!==t.databaseId.projectId)throw new P(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new P(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(FT(n))}function Om(t,e){return Zv(t.databaseId,e)}function LT(t){const e=RT(t);return e.length===4?le.emptyPath():FT(e)}function uc(t){return new le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FT(t){return q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Sx(t,e,n){return{name:cc(t,e),fields:n.value.mapValue.fields}}function $T(t,e,n){const i=qn(t,e.name),r=Ge(e.updateTime),s=e.createTime?Ge(e.createTime):H.min(),o=new gt({mapValue:{fields:e.fields}}),a=Ee.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function AF(t,e){return"found"in e?function(n,i){q(!!i.found),i.found.name,i.found.updateTime;const r=qn(n,i.found.name),s=Ge(i.found.updateTime),o=i.found.createTime?Ge(i.found.createTime):H.min(),a=new gt({mapValue:{fields:i.found.fields}});return Ee.newFoundDocument(r,s,o,a)}(t,e):"missing"in e?function(n,i){q(!!i.missing),q(!!i.readTime);const r=qn(n,i.missing),s=Ge(i.readTime);return Ee.newNoDocument(r,s)}(t,e):V()}function DF(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:V()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(q(c===void 0||typeof c=="string"),nt.fromBase64String(c||"")):(q(c===void 0||c instanceof Uint8Array),nt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?C.UNKNOWN:AT(l.code);return new P(c,l.message||"")}(o);n=new MT(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qn(t,i.document.name),s=Ge(i.document.updateTime),o=i.document.createTime?Ge(i.document.createTime):H.min(),a=new gt({mapValue:{fields:i.document.fields}}),l=Ee.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new wh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qn(t,i.document),s=i.readTime?Ge(i.readTime):H.min(),o=Ee.newNoDocument(r,s),a=i.removedTargetIds||[];n=new wh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qn(t,i.document),s=i.removedTargetIds||[];n=new wh([],s,r,null)}else{if(!("filter"in e))return V();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new bF(r,s),a=i.targetId;n=new PT(a,o)}}return n}function hc(t,e){let n;if(e instanceof wa)n={update:Sx(t,e.key,e.value)};else if(e instanceof _a)n={delete:cc(t,e.key)};else if(e instanceof Oi)n={update:Sx(t,e.key,e.data),updateMask:FF(e.fieldMask)};else{if(!(e instanceof Kv))return V();n={verify:cc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof Xo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Rs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ls)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Jo)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw V()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:NF(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:V()}(t,e.precondition)),n}function Rm(t,e){const n=e.currentDocument?function(r){return r.updateTime!==void 0?Pe.updateTime(Ge(r.updateTime)):r.exists!==void 0?Pe.exists(r.exists):Pe.none()}(e.currentDocument):Pe.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,o){let a=null;if("setToServerValue"in o)q(o.setToServerValue==="REQUEST_TIME"),a=new Xo;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new Rs(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new Ls(c)}else"increment"in o?a=new Jo(s,o.increment):V();const l=qe.fromServerFormat(o.fieldPath);return new Wc(l,a)}(t,r)):[];if(e.update){e.update.name;const r=qn(t,e.update.name),s=new gt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new Ht(l.map(c=>qe.fromServerFormat(c)))}(e.updateMask);return new Oi(r,s,o,n,i)}return new wa(r,s,n,i)}if(e.delete){const r=qn(t,e.delete);return new _a(r,n)}if(e.verify){const r=qn(t,e.verify);return new Kv(r,n)}return V()}function PF(t,e){return t&&t.length>0?(q(e!==void 0),t.map(n=>function(i,r){let s=i.updateTime?Ge(i.updateTime):Ge(r);return s.isEqual(H.min())&&(s=Ge(r)),new wF(s,i.transformResults||[])}(n,e))):[]}function jT(t,e){return{documents:[Om(t,e.path)]}}function BT(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Om(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Om(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(l.length!==0)return UT(de.create(l,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:co(u.field),direction:OF(u.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Mm(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function VT(t){let e=LT(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){q(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(u){const h=zT(u);return h instanceof de&&Uv(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new Ro(uo(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Bc(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(u){const h=!!u.before,d=u.values||[];return new Ar(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const h=!u.before,d=u.values||[];return new Ar(d,h)}(n.endAt)),fT(e,r,o,s,a,"F",l,c)}function MF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zT(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=uo(e.unaryFilter.field);return te.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=uo(e.unaryFilter.field);return te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=uo(e.unaryFilter.field);return te.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=uo(e.unaryFilter.field);return te.create(s,"!=",{nullValue:"NULL_VALUE"});default:return V()}}(t):t.fieldFilter!==void 0?function(e){return te.create(uo(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return V()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return de.create(e.compositeFilter.filters.map(n=>zT(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return V()}}(e.compositeFilter.op))}(t):V()}function OF(t){return kF[t]}function RF(t){return IF[t]}function LF(t){return TF[t]}function co(t){return{fieldPath:t.canonicalString()}}function uo(t){return qe.fromServerFormat(t.fieldPath)}function UT(t){return t instanceof te?function(e){if(e.op==="=="){if(ox(e.value))return{unaryFilter:{field:co(e.field),op:"IS_NAN"}};if(sx(e.value))return{unaryFilter:{field:co(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ox(e.value))return{unaryFilter:{field:co(e.field),op:"IS_NOT_NAN"}};if(sx(e.value))return{unaryFilter:{field:co(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:co(e.field),op:RF(e.op),value:e.value}}}(t):t instanceof de?function(e){const n=e.getFilters().map(i=>UT(i));return n.length===1?n[0]:{compositeFilter:{op:LF(e.op),filters:n}}}(t):V()}function FF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function WT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,i,r,s=H.min(),o=H.min(),a=nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.fe=e}}function $F(t,e){let n;if(e.document)n=$T(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=F.fromSegments(e.noDocument.path),r=$s(e.noDocument.readTime);n=Ee.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return V();{const i=F.fromSegments(e.unknownDocument.path),r=$s(e.unknownDocument.version);n=Ee.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(i){const r=new Me(i[0],i[1]);return H.fromTimestamp(r)}(e.readTime)),n}function Ex(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Sd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(r,s){return{name:cc(r,s.key),fields:s.data.value.mapValue.fields,updateTime:Zo(r,s.version.toTimestamp()),createTime:Zo(r,s.createTime.toTimestamp())}}(t.fe,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Fs(e.version)};else{if(!e.isUnknownDocument())return V();i.unknownDocument={path:n.path.toArray(),version:Fs(e.version)}}return i}function Sd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $s(t){const e=new Me(t.seconds,t.nanoseconds);return H.fromTimestamp(e)}function os(t,e){const n=(e.baseMutations||[]).map(s=>Rm(t.fe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>Rm(t.fe,s)),r=Me.fromMillis(e.localWriteTimeMs);return new Gv(e.batchId,r,n,i)}function tl(t){const e=$s(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$s(t.lastLimboFreeSnapshotVersion):H.min();let i;var r;return t.query.documents!==void 0?(q((r=t.query).documents.length===1),i=Yt(va(LT(r.documents[0])))):i=function(s){return Yt(VT(s))}(t.query),new pi(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,nt.fromBase64String(t.resumeToken))}function qT(t,e){const n=Fs(e.snapshotVersion),i=Fs(e.lastLimboFreeSnapshotVersion);let r;r=_d(e.target)?jT(t.fe,e.target):BT(t.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Os(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function e0(t){const e=VT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bd(e,e.limit,"L"):e}function qp(t,e){return new Yv(e.largestBatchId,Rm(t.fe,e.overlayMutation))}function kx(t,e){const n=e.path.lastSegment();return[t,Lt(e.path.popLast()),n]}function Ix(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Fs(i.readTime),documentKey:Lt(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{getBundleMetadata(e,n){return Tx(e).get(n).next(i=>{if(i)return{id:(r=i).bundleId,createTime:$s(r.createTime),version:r.version};var r})}saveBundleMetadata(e,n){return Tx(e).put({bundleId:(i=n).id,createTime:Fs(Ge(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return Cx(e).get(n).next(i=>{if(i)return{name:(r=i).name,query:e0(r.bundledQuery),readTime:$s(r.readTime)};var r})}saveNamedQuery(e,n){return Cx(e).put(function(i){return{name:i.name,readTime:Fs(Ge(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function Tx(t){return ht(t,"bundles")}function Cx(t){return ht(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){const i=n.uid||"";return new Of(e,i)}getOverlay(e,n){return Ra(e).get(kx(this.userId,n)).next(i=>i?qp(this.serializer,i):null)}getOverlays(e,n){const i=zn();return T.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,o)=>{const a=new Yv(n,o);r.push(this.we(e,a))}),T.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(o=>r.add(Lt(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Ra(e).J("collectionPathOverlayIndex",a))}),T.waitFor(s)}getOverlaysForCollection(e,n,i){const r=zn(),s=Lt(n),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ra(e).j("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=qp(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=zn();let o;const a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ra(e).X({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=qp(this.serializer,c);s.size()<r||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}we(e,n){return Ra(e).put(function(i,r,s){const[o,a,l]=kx(r,s.mutation.key);return{userId:r,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:hc(i.fe,s.mutation)}}(this.serializer,this.userId,n))}}function Ra(t){return ht(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Be(e.integerValue));else if("doubleValue"in e){const i=Be(e.doubleValue);isNaN(i)?this.ye(n,13):(this.ye(n,15),sc(i)?n.pe(0):n.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(n,20),typeof i=="string"?n.Ie(i):(n.Ie(`${i.seconds||""}`),n.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Tr(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(n,45),n.pe(i.latitude||0),n.pe(i.longitude||0)}else"mapValue"in e?rT(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):V()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const i=e.fields||{};this.ye(n,55);for(const r of Object.keys(i))this.Te(r,n),this.me(i[r],n)}Pe(e,n){const i=e.values||[];this.ye(n,50);for(const r of i)this.me(r,n)}ve(e,n){this.ye(n,37),F.fromName(e).path.forEach(i=>{this.ye(n,60),this.be(i,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}as.Ve=new as;function BF(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Nx(t){const e=64-function(n){let i=0;for(let r=0;r<8;++r){const s=BF(255&n[r]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}class VF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.De(i.value),i=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ne(i.value),i=n.next();this.ke()}Me(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=n.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=n.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(e){const n=this.Fe(e),i=Nx(n);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}Le(e){const n=this.Fe(e),i=Nx(n);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}De(e){const n=255&e;n===0?(this.Ue(0),this.Ue(255)):n===255?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;n===0?(this.Ge(0),this.Ge(255)):n===255?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class zF{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class UF{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class La{constructor(){this.je=new VF,this.ze=new zF(this.je),this.We=new UF(this.je)}seed(e){this.je.seed(e)}He(e){return e===0?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Je(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ls(this.indexId,this.documentKey,this.arrayValue,i)}}function $i(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Ax(t.arrayValue,e.arrayValue),n!==0?n:(n=Ax(t.directionalValue,e.directionalValue),n!==0?n:F.comparator(t.documentKey,e.documentKey)))}function Ax(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const i=n;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){q(e.collectionGroup===this.collectionId);const n=Sm(e);if(n!==void 0&&!this.en(n))return!1;const i=ns(e);let r=new Set,s=0,o=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Ze!==void 0){if(!r.has(this.Ze.field.canonicalString())){const a=i[s];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[o++],a))return!1}++s}for(;s<i.length;++s){const a=i[s];if(o>=this.Ye.length||!this.sn(this.Ye[o++],a))return!1}return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){var e,n;if(q(t instanceof te||t instanceof de),t instanceof te){if(t instanceof dT){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>te.create(t.field,"==",s)))||[];return de.create(r,"or")}return t}const i=t.filters.map(r=>KT(r));return de.create(i,t.op)}function HF(t){if(t.getFilters().length===0)return[];const e=$m(KT(t));return q(GT(e)),Lm(e)||Fm(e)?[e]:e.getFilters()}function Lm(t){return t instanceof te}function Fm(t){return t instanceof de&&Uv(t)}function GT(t){return Lm(t)||Fm(t)||function(e){if(e instanceof de&&Cm(e)){for(const n of e.getFilters())if(!Lm(n)&&!Fm(n))return!1;return!0}return!1}(t)}function $m(t){if(q(t instanceof te||t instanceof de),t instanceof te)return t;if(t.filters.length===1)return $m(t.filters[0]);const e=t.filters.map(i=>$m(i));let n=de.create(e,t.op);return n=Ed(n),GT(n)?n:(q(n instanceof de),q(Yo(n)),q(n.filters.length>1),n.filters.reduce((i,r)=>t0(i,r)))}function t0(t,e){let n;return q(t instanceof te||t instanceof de),q(e instanceof te||e instanceof de),n=t instanceof te?e instanceof te?function(i,r){return de.create([i,r],"and")}(t,e):Dx(t,e):e instanceof te?Dx(e,t):function(i,r){if(q(i.filters.length>0&&r.filters.length>0),Yo(i)&&Yo(r))return cT(i,r.getFilters());const s=Cm(i)?i:r,o=Cm(i)?r:i,a=s.filters.map(l=>t0(l,o));return de.create(a,"or")}(t,e),Ed(n)}function Dx(t,e){if(Yo(e))return cT(e,t.getFilters());{const n=e.filters.map(i=>t0(t,i));return de.create(n,"or")}}function Ed(t){if(q(t instanceof te||t instanceof de),t instanceof te)return t;const e=t.getFilters();if(e.length===1)return Ed(e[0]);if(aT(t))return t;const n=e.map(r=>Ed(r)),i=[];return n.forEach(r=>{r instanceof te?i.push(r):r instanceof de&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:de.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(){this.rn=new n0}addToCollectionParentIndex(e,n){return this.rn.add(n),T.resolve()}getCollectionParents(e,n){return T.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return T.resolve()}deleteFieldIndex(e,n){return T.resolve()}getDocumentsMatchingTarget(e,n){return T.resolve(null)}getIndexType(e,n){return T.resolve(0)}getFieldIndexes(e,n){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,n){return T.resolve(an.min())}getMinOffsetFromCollectionGroup(e,n){return T.resolve(an.min())}updateCollectionGroup(e,n,i){return T.resolve()}updateIndexEntries(e,n){return T.resolve()}}class n0{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ce(le.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ce(le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new Uint8Array(0);class KF{constructor(e,n){this.user=e,this.databaseId=n,this.on=new n0,this.un=new Wr(i=>Os(i),(i,r)=>Vc(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const s={collectionId:i,parent:Lt(r)};return Px(e).put(s)}return T.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[HI(n),""],!1,!0);return Px(e).j(r).next(s=>{for(const o of s){if(o.collectionId!==n)break;i.push(Vn(o.parent))}return i})}addFieldIndex(e,n){const i=Mu(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const o=$a(e);return s.next(a=>{o.put(Ix(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=Mu(e),r=$a(e),s=Fa(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const i=Fa(e);let r=!0;const s=new Map;return T.forEach(this.cn(n),o=>this.an(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Z();const a=[];return T.forEach(s,(l,c)=>{var u;M("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(v=>`${v.fieldPath}:${v.kind}`).join(",")}`} to execute ${Os(n)}`);const h=function(v,x){const b=Sm(x);if(b===void 0)return null;for(const E of xd(v,b.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null}(c,l),d=function(v,x){const b=new Map;for(const E of ns(x))for(const k of xd(v,E.fieldPath))switch(k.op){case"==":case"in":b.set(E.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return b.set(E.fieldPath.canonicalString(),k.value),Array.from(b.values())}return null}(c,l),f=function(v,x){const b=[];let E=!0;for(const k of ns(x)){const S=k.kind===0?hx(v,k.fieldPath,v.startAt):dx(v,k.fieldPath,v.startAt);b.push(S.value),E&&(E=S.inclusive)}return new Ar(b,E)}(c,l),g=function(v,x){const b=[];let E=!0;for(const k of ns(x)){const S=k.kind===0?dx(v,k.fieldPath,v.endAt):hx(v,k.fieldPath,v.endAt);b.push(S.value),E&&(E=S.inclusive)}return new Ar(b,E)}(c,l),y=this.hn(l,c,f),w=this.hn(l,c,g),p=this.ln(l,c,d),m=this.fn(l.indexId,h,y,f.inclusive,w,g.inclusive,p);return T.forEach(m,v=>i.H(v,n.limit).next(x=>{x.forEach(b=>{const E=F.fromSegments(b.documentKey);o.has(E)||(o=o.add(E),a.push(E))})}))}).next(()=>a)}return T.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=HF(de.create(e.filters,"and")).map(i=>Am(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,i,r,s,o,a){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const d=n?this.dn(n[h/c]):Pu,f=this.wn(e,d,i[h%c],r),g=this._n(e,d,s[h%c],o),y=a.map(w=>this.wn(e,d,w,!0));u.push(...this.createRange(f,g,y))}return u}wn(e,n,i,r){const s=new ls(e,F.empty(),n,i);return r?s:s.Je()}_n(e,n,i,r){const s=new ls(e,F.empty(),n,i);return r?s.Je():s}an(e,n){const i=new WF(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let i=2;const r=this.cn(n);return T.forEach(r,s=>this.an(e,s).next(o=>{o?i!==0&&o.fields.length<function(a){let l=new Ce(qe.comparator),c=!1;for(const u of a.filters)for(const h of u.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:l=l.add(h.field));for(const u of a.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(c?1:0)}(s)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}mn(e,n){const i=new La;for(const r of ns(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const o=i.He(r.kind);as.Ve._e(s,o)}return i.Qe()}dn(e){const n=new La;return as.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const i=new La;return as.Ve._e(Ms(this.databaseId,n),i.He(function(r){const s=ns(r);return s.length===0?0:s[s.length-1].kind}(e))),i.Qe()}ln(e,n,i){if(i===null)return[];let r=[];r.push(new La);let s=0;for(const o of ns(e)){const a=i[s++];for(const l of r)if(this.yn(n,o.fieldPath)&&lc(a))r=this.pn(r,o,a);else{const c=l.He(o.kind);as.Ve._e(a,c)}}return this.In(r)}hn(e,n,i){return this.ln(e,n,i.position)}In(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Qe();return n}pn(e,n,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new La;l.seed(a.Qe()),as.Ve._e(o,l.He(n.kind)),s.push(l)}return s}yn(e,n){return!!e.filters.find(i=>i instanceof te&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=Mu(e),r=$a(e);return(n?i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.j()).next(s=>{const o=[];return T.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const h=u?new wd(u.sequenceNumber,new an($s(u.readTime),new F(Vn(u.documentKey)),u.largestBatchId)):wd.empty(),d=c.fields.map(([f,g])=>new N2(qe.fromServerFormat(f),g));return new qI(c.indexId,c.collectionGroup,d,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:X(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=Mu(e),s=$a(e);return this.Tn(e).next(o=>r.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>T.forEach(a,l=>s.put(Ix(l.indexId,this.user,o,i)))))}updateIndexEntries(e,n){const i=new Map;return T.forEach(n,(r,s)=>{const o=i.get(r.collectionGroup);return(o?T.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),T.forEach(a,l=>this.En(e,r,l).next(c=>{const u=this.An(s,l);return c.isEqual(u)?T.resolve():this.vn(e,s,l,c,u)}))))})}Rn(e,n,i,r){return Fa(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,i,r){return Fa(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,n.key),n.key.path.toArray()])}En(e,n,i){const r=Fa(e);let s=new Ce($i);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,n)])},(o,a)=>{s=s.add(new ls(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}An(e,n){let i=new Ce($i);const r=this.mn(n,e);if(r==null)return i;const s=Sm(n);if(s!=null){const o=e.data.field(s.fieldPath);if(lc(o))for(const a of o.arrayValue.values||[])i=i.add(new ls(n.indexId,e.key,this.dn(a),r))}else i=i.add(new ls(n.indexId,e.key,Pu,r));return i}vn(e,n,i,r,s){M("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,c,u,h){const d=a.getIterator(),f=l.getIterator();let g=so(d),y=so(f);for(;g||y;){let w=!1,p=!1;if(g&&y){const m=c(g,y);m<0?p=!0:m>0&&(w=!0)}else g!=null?p=!0:w=!0;w?(u(y),y=so(f)):p?(h(g),g=so(d)):(g=so(d),y=so(f))}}(r,s,$i,a=>{o.push(this.Rn(e,n,i,a))},a=>{o.push(this.Pn(e,n,i,a))}),T.waitFor(o)}Tn(e){let n=1;return $a(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((o,a)=>$i(o,a)).filter((o,a,l)=>!a||$i(o,l[a-1])!==0);const r=[];r.push(e);for(const o of i){const a=$i(o,e),l=$i(o,n);if(a===0)r[0]=e.Je();else if(a>0&&l<0)r.push(o),r.push(o.Je());else if(l>0)break}r.push(n);const s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];const a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Pu,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Pu,[]];s.push(IDBKeyRange.bound(a,l))}return s}bn(e,n){return $i(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Mx)}getMinOffset(e,n){return T.mapArray(this.cn(n),i=>this.an(e,i).next(r=>r||V())).next(Mx)}}function Px(t){return ht(t,"collectionParents")}function Fa(t){return ht(t,"indexEntries")}function Mu(t){return ht(t,"indexConfiguration")}function $a(t){return ht(t,"indexState")}function Mx(t){q(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;Bv(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new an(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bt{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Bt(e,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=i.X({range:o},(u,h,d)=>(a++,d.delete()));s.push(l.next(()=>{q(a===1)}));const c=[];for(const u of n.mutations){const h=JI(e,u.key.path,n.batchId);s.push(r.delete(h)),c.push(u.key)}return T.waitFor(s).next(()=>c)}function kd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw V();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(41943040,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);class Rf{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(e,n,i,r){q(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Rf(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ji(e).X({index:"userMutationsIndex",range:i},(r,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=ho(e),o=ji(e);return o.add({}).next(a=>{q(typeof a=="number");const l=new Gv(a,n,i,r),c=function(d,f,g){const y=g.baseMutations.map(p=>hc(d.fe,p)),w=g.mutations.map(p=>hc(d.fe,p));return{userId:f,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:y,mutations:w}}(this.serializer,this.userId,l),u=[];let h=new Ce((d,f)=>X(d.canonicalString(),f.canonicalString()));for(const d of r){const f=JI(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,R2))}return h.forEach(d=>{u.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.Vn[a]=l.keys()}),T.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return ji(e).get(n).next(i=>i?(q(i.userId===this.userId),os(this.serializer,i)):null)}Sn(e,n){return this.Vn[n]?T.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Vn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ji(e).X({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(q(a.batchId>=i),s=os(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ji(e).X({index:"userMutationsIndex",range:n,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ji(e).j("userMutationsIndex",n).next(i=>i.map(r=>os(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=gh(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return ho(e).X({range:r},(o,a,l)=>{const[c,u,h]=o,d=Vn(u);if(c===this.userId&&n.path.isEqual(d))return ji(e).get(h).next(f=>{if(!f)throw V();q(f.userId===this.userId),s.push(os(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ce(X);const r=[];return n.forEach(s=>{const o=gh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ho(e).X({range:a},(c,u,h)=>{const[d,f,g]=c,y=Vn(f);d===this.userId&&s.path.isEqual(y)?i=i.add(g):h.done()});r.push(l)}),T.waitFor(r).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=gh(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new Ce(X);return ho(e).X({range:o},(l,c,u)=>{const[h,d,f]=l,g=Vn(d);h===this.userId&&i.isPrefixOf(g)?g.length===r&&(a=a.add(f)):u.done()}).next(()=>this.Dn(e,a))}Dn(e,n){const i=[],r=[];return n.forEach(s=>{r.push(ji(e).get(s).next(o=>{if(o===null)throw V();q(o.userId===this.userId),i.push(os(this.serializer,o))}))}),T.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return QT(e.ht,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),T.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return T.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return ho(e).X({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Vn(s[1]);r.push(l)}else a.done()}).next(()=>{q(r.length===0)})})}containsKey(e,n){return YT(e,this.userId,n)}xn(e){return XT(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function YT(t,e,n){const i=gh(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return ho(t).X({range:s,Y:!0},(a,l,c)=>{const[u,h,d]=a;u===e&&h===r&&(o=!0),c.done()}).next(()=>o)}function ji(t){return ht(t,"mutations")}function ho(t){return ht(t,"documentMutations")}function XT(t){return ht(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new js(0)}static Mn(){return new js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const i=new js(n.highestTargetId);return n.highestTargetId=i.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>H.fromTimestamp(new Me(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.$n(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.On(e,r)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(n,i),this.On(e,i))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>oo(e).delete(n.targetId)).next(()=>this.$n(e)).next(i=>(q(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return oo(e).X((o,a)=>{const l=tl(a);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>T.waitFor(s)).next(()=>r)}forEachTarget(e,n){return oo(e).X((i,r)=>{const s=tl(r);n(s)})}$n(e){return Rx(e).get("targetGlobalKey").next(n=>(q(n!==null),n))}On(e,n){return Rx(e).put("targetGlobalKey",n)}Fn(e,n){return oo(e).put(qT(this.serializer,n))}Bn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Os(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return oo(e).X({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=tl(a);Vc(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=Gi(e);return n.forEach(o=>{const a=Lt(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),T.waitFor(r)}removeMatchingKeys(e,n,i){const r=Gi(e);return T.forEach(n,s=>{const o=Lt(s.path);return T.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=Gi(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Gi(e);let s=Z();return r.X({range:i,Y:!0},(o,a,l)=>{const c=Vn(o[1]),u=new F(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const i=Lt(n.path),r=IDBKeyRange.bound([i],[HI(i)],!1,!0);let s=0;return Gi(e).X({index:"documentTargetsIndex",Y:!0,range:r},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}le(e,n){return oo(e).get(n).next(i=>i?tl(i):null)}}function oo(t){return ht(t,"targets")}function Rx(t){return ht(t,"targetGlobal")}function Gi(t){return ht(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx([t,e],[n,i]){const r=X(t,n);return r===0?X(e,i):r}class QF{constructor(e){this.Ln=e,this.buffer=new Ce(Lx),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Lx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YF{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}Qn(e){M("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ur(n)?M("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await zr(n)}await this.Qn(3e5)})}}class XF{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return T.resolve(Wt.ct);const i=new QF(n);return this.jn.forEachTarget(e,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(e,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(M("LruGarbageCollector","Garbage collection skipped; disabled"),T.resolve(Ox)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(M("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ox):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(M("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,o=Date.now(),this.nthSequenceNumber(e,r))).next(h=>(i=h,a=Date.now(),this.removeTargets(e,i,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),bm()<=ae.DEBUG&&M("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),T.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:h})))}}function JF(t,e){return new XF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n){this.db=e,this.garbageCollector=JF(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Jn(e){let n=0;return this.Wn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(i,r)=>n(r))}addReference(e,n,i){return Ou(e,i)}removeReference(e,n,i){return Ou(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Ou(e,n)}Xn(e,n){return function(i,r){let s=!1;return XT(i).Z(o=>YT(i,o,r).next(a=>(a&&(s=!0),T.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(o,a)=>{if(a<=n){const l=this.Xn(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,H.min()),Gi(e).delete([0,Lt(o.path)])))});r.push(l)}}).next(()=>T.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Ou(e,n)}Yn(e,n){const i=Gi(e);let r,s=Wt.ct;return i.X({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Wt.ct&&n(new F(Vn(r)),s),s=c,r=l):s=Wt.ct}).next(()=>{s!==Wt.ct&&n(new F(Vn(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ou(t,e){return Gi(t).put(function(n,i){return{targetId:0,path:Lt(n.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.changes=new Wr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ee.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?T.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Gr(e).put(i)}removeEntry(e,n,i){return Gr(e).delete(function(r,s){const o=r.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Sd(s),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Zn(e,i)))}getEntry(e,n){let i=Ee.newInvalidDocument(n);return Gr(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ja(n))},(r,s)=>{i=this.ts(n,s)}).next(()=>i)}es(e,n){let i={size:0,document:Ee.newInvalidDocument(n)};return Gr(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ja(n))},(r,s)=>{i={document:this.ts(n,s),size:kd(s)}}).next(()=>i)}getEntries(e,n){let i=qt();return this.ns(e,n,(r,s)=>{const o=this.ts(r,s);i=i.insert(r,o)}).next(()=>i)}ss(e,n){let i=qt(),r=new $e(F.comparator);return this.ns(e,n,(s,o)=>{const a=this.ts(s,o);i=i.insert(s,a),r=r.insert(s,kd(o))}).next(()=>({documents:i,rs:r}))}ns(e,n,i){if(n.isEmpty())return T.resolve();let r=new Ce(jx);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(ja(r.first()),ja(r.last())),o=r.getIterator();let a=o.getNext();return Gr(e).X({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=F.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&jx(a,h)<0;)i(a,null),a=o.getNext();a&&a.isEqual(h)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.G(ja(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,i,r){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Sd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gr(e).j(IDBKeyRange.bound(o,a,!0)).next(l=>{let c=qt();for(const u of l){const h=this.ts(F.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(Uc(n,h)||r.has(h.key))&&(c=c.insert(h.key,h))}return c})}getAllFromCollectionGroup(e,n,i,r){let s=qt();const o=$x(n,i),a=$x(n,an.max());return Gr(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.ts(F.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new t$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Fx(e).get("remoteDocumentGlobalKey").next(n=>(q(!!n),n))}Zn(e,n){return Fx(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const i=$F(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(H.min())))return i}return Ee.newInvalidDocument(e)}}function ZT(t){return new e$(t)}class t$ extends JT{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new Wr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new Ce((s,o)=>X(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.us.get(s);if(n.push(this.os.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=Ex(this.os.serializer,o);r=r.add(s.path.popLast());const c=kd(l);i+=c-a.size,n.push(this.os.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){const l=Ex(this.os.serializer,o.convertToNoDocument(H.min()));n.push(this.os.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.os.updateMetadata(e,i)),T.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(i=>(this.us.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:i,rs:r})=>(r.forEach((s,o)=>{this.us.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function Fx(t){return ht(t,"remoteDocumentGlobal")}function Gr(t){return ht(t,"remoteDocumentsV14")}function ja(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $x(t,e){const n=e.documentKey.path.toArray();return[t,Sd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jx(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=X(n[s],i[s]),r)return r;return r=X(n.length,i.length),r||(r=X(n[n.length-2],i[i.length-2]),r||X(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&wl(i.mutation,r,Ht.empty(),Me.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Z()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Z()){const r=zn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Za();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=zn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Z()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=qt();const o=vl(),a=vl();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Oi)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),wl(u.mutation,c,u.mutation.getFieldMask(),Me.now())):o.set(c.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new n$(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const i=vl();let r=new $e((o,a)=>o-a),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||Ht.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(r.get(a.batchId)||Z()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=wT();u.forEach(d=>{if(!s.has(d)){const f=TT(n.get(d),i.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return T.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return F.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Hv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):T.resolve(zn());let a=-1,l=s;return o.next(c=>T.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?T.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Z())).next(u=>({batchId:a,changes:vT(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(i=>{let r=Za();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const r=n.collectionGroup;let s=Za();return this.indexManager.getCollectionParents(e,r).next(o=>T.forEach(o,a=>{const l=function(c,u){return new Mi(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r))).next(s=>{r.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,Ee.newInvalidDocument(c)))});let o=Za();return s.forEach((a,l)=>{const c=r.get(a);c!==void 0&&wl(c.mutation,l,Ht.empty(),Me.now()),Uc(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return T.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var i;return this.cs.set(n.id,{id:(i=n).id,version:i.version,createTime:Ge(i.createTime)}),T.resolve()}getNamedQuery(e,n){return T.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(i){return{name:i.name,query:e0(i.bundledQuery),readTime:Ge(i.readTime)}}(n)),T.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(){this.overlays=new $e(F.comparator),this.ls=new Map}getOverlay(e,n){return T.resolve(this.overlays.get(n))}getOverlays(e,n){const i=zn();return T.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.we(e,n,s)}),T.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.ls.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),T.resolve()}getOverlaysForCollection(e,n,i){const r=zn(),s=n.length+1,o=new F(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return T.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new $e((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=zn(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=zn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return T.resolve(a)}we(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Yv(n,i));let s=this.ls.get(n);s===void 0&&(s=Z(),this.ls.set(n,s)),this.ls.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.fs=new Ce(it.ds),this.ws=new Ce(it._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const i=new it(e,n);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.ys(new it(e,n))}ps(e,n){e.forEach(i=>this.removeReference(i,n))}Is(e){const n=new F(new le([])),i=new it(n,e),r=new it(n,e+1),s=[];return this.ws.forEachInRange([i,r],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new F(new le([])),i=new it(n,e),r=new it(n,e+1);let s=Z();return this.ws.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new it(e,0),i=this.fs.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class it{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return F.comparator(e.key,n.key)||X(e.As,n.As)}static _s(e,n){return X(e.As,n.As)||F.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Ce(it.ds)}checkEmpty(e){return T.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Gv(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Rs=this.Rs.add(new it(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,n){return T.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.bs(i),s=r<0?0:r;return T.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new it(n,0),r=new it(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],o=>{const a=this.Ps(o.As);s.push(a)}),T.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ce(X);return n.forEach(r=>{const s=new it(r,0),o=new it(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{i=i.add(a.As)})}),T.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;F.isDocumentKey(s)||(s=s.child(""));const o=new it(new F(s),0);let a=new Ce(X);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.As)),!0)},o),T.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(i=>{const r=this.Ps(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){q(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return T.forEach(n.mutations,r=>{const s=new it(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,n){const i=new it(n,0),r=this.Rs.firstAfterOrEqual(i);return T.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,T.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.Ds=e,this.docs=new $e(F.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Ds(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return T.resolve(i?i.document.mutableCopy():Ee.newInvalidDocument(n))}getEntries(e,n){let i=qt();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ee.newInvalidDocument(r))}),T.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=qt();const o=n.path,a=new F(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Bv(GI(u),i)<=0||(r.has(u.key)||Uc(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return T.resolve(s)}getAllFromCollectionGroup(e,n,i,r){V()}Cs(e,n){return T.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new a$(this)}getSize(e){return T.resolve(this.size)}}class a$ extends JT{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),T.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e){this.persistence=e,this.xs=new Wr(n=>Os(n),Vc),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Ns=0,this.ks=new i0,this.targetCount=0,this.Ms=js.kn()}forEachTarget(e,n){return this.xs.forEach((i,r)=>n(r)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Ns&&(this.Ns=n),T.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new js(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,T.resolve()}updateTargetData(e,n){return this.Fn(n),T.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),T.waitFor(s).next(()=>r)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,n){const i=this.xs.get(n)||null;return T.resolve(i)}addMatchingKeys(e,n,i){return this.ks.gs(n,i),T.resolve()}removeMatchingKeys(e,n,i){this.ks.ps(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),T.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),T.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ks.Es(n);return T.resolve(i)}containsKey(e,n){return T.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n){this.$s={},this.overlays={},this.Os=new Wt(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new l$(this),this.indexManager=new qF,this.remoteDocumentCache=function(i){return new o$(i)}(i=>this.referenceDelegate.Ls(i)),this.serializer=new HT(n),this.qs=new i$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new r$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.$s[e.toKey()];return i||(i=new s$(n,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,i){M("MemoryPersistence","Starting transaction:",e);const r=new c$(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,n){return T.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,n)))}}class c$ extends YI{constructor(e){super(),this.currentSequenceNumber=e}}class Lf{constructor(e){this.persistence=e,this.Qs=new i0,this.js=null}static zs(e){return new Lf(e)}get Ws(){if(this.js)return this.js;throw V()}addReference(e,n,i){return this.Qs.addReference(i,n),this.Ws.delete(i.toString()),T.resolve()}removeReference(e,n,i){return this.Qs.removeReference(i,n),this.Ws.add(i.toString()),T.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),T.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.Ws,i=>{const r=F.fromPath(i);return this.Hs(e,r).next(s=>{s||n.removeEntry(r,H.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(i=>{i?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return T.or([()=>T.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(e){this.serializer=e}O(e,n,i,r){const s=new Nf("createOrUpgrade",n);i<1&&r>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tx,{unique:!0}),a.createObjectStore("documentMutations")}(e),Bx(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=T.resolve();return i<3&&r>=3&&(i!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),Bx(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:H.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").j().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tx,{unique:!0});const u=l.store("mutations"),h=c.map(d=>u.put(d));return T.waitFor(h)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.Ys(s))),i<6&&r>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),i<7&&r>=7&&(o=o.next(()=>this.Zs(s))),i<8&&r>=8&&(o=o.next(()=>this.ti(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.ei(s))),i<11&&r>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:K2});l.createIndex("collectionPathOverlayIndex",G2,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Q2,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:L2});l.createIndex("documentKeyIndex",F2),l.createIndex("collectionGroupIndex",$2)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(e,s))),i<15&&r>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:U2}).createIndex("sequenceNumberIndex",W2,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:H2}).createIndex("documentKeyIndex",q2,{unique:!1})}(e))),o}Xs(e){let n=0;return e.store("remoteDocuments").X((i,r)=>{n+=kd(r)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.j().next(r=>T.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",o).next(a=>T.forEach(a,l=>{q(l.userId===s.userId);const c=os(this.serializer,l);return QT(e,s.userId,c).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((o,a)=>{const l=new le(o),c=function(u){return[0,Lt(u)]}(l);s.push(n.get(c).next(u=>u?T.resolve():(h=>n.put({targetId:0,path:Lt(h),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>T.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:z2});const i=n.store("collectionParents"),r=new n0,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Lt(l)})}};return n.store("remoteDocuments").X({Y:!0},(o,a)=>{const l=new le(o);return s(l.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([o,a,l],c)=>{const u=Vn(a);return s(u.popLast())}))}ei(e){const n=e.store("targets");return n.X((i,r)=>{const s=tl(r),o=qT(this.serializer,s);return n.put(o)})}ni(e,n){const i=n.store("remoteDocuments"),r=[];return i.X((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(c=o,c.document?new F(le.fromString(c.document.name).popFirst(5)):c.noDocument?F.fromSegments(c.noDocument.path):c.unknownDocument?F.fromSegments(c.unknownDocument.path):V()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(u))}).next(()=>T.waitFor(r))}si(e,n){const i=n.store("mutations"),r=ZT(this.serializer),s=new tC(Lf.zs,this.serializer.fe);return i.j().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:Z();os(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),T.forEach(a,(l,c)=>{const u=new st(c),h=Of.de(this.serializer,u),d=s.getIndexManager(u),f=Rf.de(u,this.serializer,d,s.referenceDelegate);return new eC(r,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new Em(n,Wt.ct),l).next()})})}}function Bx(t){t.createObjectStore("targetDocuments",{keyPath:B2}).createIndex("documentTargetsIndex",V2,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",j2,{unique:!0}),t.createObjectStore("targetGlobal")}const Kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class r0{constructor(e,n,i,r,s,o,a,l,c,u,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.ii=s,this.window=o,this.document=a,this.ri=c,this.oi=u,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=d=>Promise.resolve(),!r0.D())throw new P(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZF(this,r),this.di=n+"main",this.serializer=new HT(l),this.wi=new Sn(this.di,this.ui,new u$(this.serializer)),this.Bs=new GF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZT(this.serializer),this.qs=new jF,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,u===!1&&He("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(C.FAILED_PRECONDITION,Kp);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Wt(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ru(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(Ur(e))return M("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return M("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Ba(e).get("owner").next(n=>T.resolve(this.Ri(n)))}Pi(e){return Ru(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=ht(n,"clientMetadata");return i.j().next(r=>{const s=this.Si(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return T.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this._i)for(const n of e)this._i.removeItem(this.Di(n.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?T.resolve(!0):Ba(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new P(C.FAILED_PRECONDITION,Kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ru(e).j().next(i=>this.Si(i,5e3).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&M("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Em(e,Wt.ct);return this.Ai(n).next(()=>this.Pi(n))}),this.wi.close(),this.Mi()}Si(e,n){return e.filter(i=>this.Vi(i.updateTimeMs,n)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Ru(e).j().next(n=>this.Si(n,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return Rf.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KF(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Of.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,i){M("IndexedDbPersistence","Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=(o=this.ui)===15?X2:o===14?tT:o===13?eT:o===12?Y2:o===11?ZI:void V();var o;let a;return this.wi.runTransaction(e,r,s,l=>(a=new Em(l,this.Os?this.Os.next():Wt.ct),n==="readwrite-primary"?this.Ti(a).next(c=>!!c||this.Ei(a)).next(c=>{if(!c)throw He(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new P(C.FAILED_PRECONDITION,QI);return i(a)}).next(c=>this.vi(a).next(()=>c)):this.Oi(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Oi(e){return Ba(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new P(C.FAILED_PRECONDITION,Kp)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ba(e).put("owner",n)}static D(){return Sn.D()}Ai(e){const n=Ba(e);return n.get("owner").next(i=>this.Ri(i)?(M("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):T.resolve())}Vi(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(He(`Detected an update time that is in the future: ${e} > ${i}`),!1))}gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;FO()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const i=((n=this._i)===null||n===void 0?void 0:n.getItem(this.Di(e)))!==null;return M("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return He("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){He("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ba(t){return ht(t,"owner")}function Ru(t){return ht(t,"clientMetadata")}function s0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Fi=i,this.Bi=r}static Li(e,n){let i=Z(),r=Z();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new o0(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,i,r){return this.Ki(e,n).next(s=>s||this.Gi(e,n,r,i)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(fx(n))return T.resolve(null);let i=Yt(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=bd(n,null,"F"),i=Yt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Z(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ji(n,a);return this.zi(n,c,o,l.readTime)?this.Ki(e,bd(n,null,"F")):this.Wi(e,c,n,l)}))})))}Gi(e,n,i,r){return fx(n)||r.isEqual(H.min())?this.Qi(e,n):this.Ui.getDocuments(e,i).next(s=>{const o=this.ji(n,s);return this.zi(n,o,i,r)?this.Qi(e,n):(bm()<=ae.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Pm(n)),this.Wi(e,o,n,KI(r,-1)))})}ji(e,n){let i=new Ce(mT(e));return n.forEach((r,s)=>{Uc(e,s)&&(i=i.add(s))}),i}zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,n){return bm()<=ae.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",Pm(n)),this.Ui.getDocumentsMatchingQuery(e,n,an.min())}Wi(e,n,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e,n,i,r){this.persistence=e,this.Hi=n,this.serializer=r,this.Ji=new $e(X),this.Yi=new Wr(s=>Os(s),Vc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eC(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function iC(t,e,n,i){return new h$(t,e,n,i)}async function rC(t,e){const n=j(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.tr(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Z();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}function d$(t,e){const n=j(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,h=u.keys();let d=T.resolve();return h.forEach(f=>{d=d.next(()=>c.getEntry(a,f)).next(g=>{const y=l.docVersions.get(f);q(y!==null),g.version.compareTo(y)<0&&(u.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),c.addEntry(g)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=Z();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function sC(t){const e=j(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function f$(t,e){const n=j(t),i=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const a=[];e.targetChanges.forEach((u,h)=>{const d=r.get(h);if(!d)return;a.push(n.Bs.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(nt.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(h,f),function(g,y,w){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,f,u)&&a.push(n.Bs.updateTargetData(s,f))});let l=qt(),c=Z();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(oC(s,o,e.documentUpdates).next(u=>{l=u.nr,c=u.sr})),!i.isEqual(H.min())){const u=n.Bs.getLastRemoteSnapshotVersion(s).next(h=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return T.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ji=r,s))}function oC(t,e,n){let i=Z(),r=Z();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=qt();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(H.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):M("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{nr:o,sr:r}})}function p$(t,e){const n=j(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ea(t,e){const n=j(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Bs.getTargetData(i,e).next(s=>s?(r=s,T.resolve(r)):n.Bs.allocateTargetId(i).next(o=>(r=new pi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ji.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(i.targetId,i),n.Yi.set(e,i.targetId)),i})}async function ta(t,e,n){const i=j(t),r=i.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ur(o))throw o;M("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}function Id(t,e,n){const i=j(t);let r=H.min(),s=Z();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=j(a),h=u.Yi.get(c);return h!==void 0?T.resolve(u.Ji.get(h)):u.Bs.getTargetData(l,c)}(i,o,Yt(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Hi.getDocumentsMatchingQuery(o,e,n?r:H.min(),n?s:Z())).next(a=>(cC(i,gT(e),a),{documents:a,ir:s})))}function aC(t,e){const n=j(t),i=j(n.Bs),r=n.Ji.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.le(s,e).next(o=>o?o.target:null))}function lC(t,e){const n=j(t),i=n.Xi.get(e)||H.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Zi.getAllFromCollectionGroup(r,e,KI(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(cC(n,e,r),r))}function cC(t,e,n){let i=t.Xi.get(e)||H.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Xi.set(e,i)}async function g$(t,e,n,i){const r=j(t);let s=Z(),o=qt();for(const c of n){const u=e.rr(c.metadata.name);c.document&&(s=s.add(u));const h=e.ur(c);h.setReadTime(e.cr(c.metadata.readTime)),o=o.insert(u,h)}const a=r.Zi.newChangeBuffer({trackRemovals:!0}),l=await ea(r,function(c){return Yt(va(le.fromString(`__bundle__/docs/${c}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>oC(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.Bs.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Bs.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.nr,u.sr)).next(()=>u.nr)))}async function m$(t,e,n=Z()){const i=await ea(t,Yt(e0(e.bundledQuery))),r=j(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ge(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.qs.saveNamedQuery(s,e);const a=i.withResumeToken(nt.EMPTY_BYTE_STRING,o);return r.Ji=r.Ji.insert(a.targetId,a),r.Bs.updateTargetData(s,a).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,n,i.targetId)).next(()=>r.qs.saveNamedQuery(s,e))})}function Vx(t,e){return`firestore_clients_${t}_${e}`}function zx(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Gp(t,e){return`firestore_targets_${t}_${e}`}class Td{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static ar(e,n,i){const r=JSON.parse(i);let s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new P(r.error.code,r.error.message))),o?new Td(e,n,r.state,s):(He("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _l{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static ar(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new P(i.error.code,i.error.message))),s?new _l(e,i.state,r):(He("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=qv();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=XI(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new Cd(e,s):(He("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class a0{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new a0(n.clientId,n.onlineState):(He("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jm{constructor(){this.activeTargetIds=qv()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qp{constructor(e,n,i,r,s){this.window=e,this.ii=n,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new $e(X),this.started=!1,this.yr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=Vx(this.persistenceKey,this.wr),this.Ir=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new jm),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Rr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const i of e){if(i===this.wr)continue;const r=this.getItem(Vx(this.persistenceKey,i));if(r){const s=Cd.ar(i,r);s&&(this.gr=this.gr.insert(s.clientId,s))}}this.Pr();const n=this.storage.getItem(this.vr);if(n){const i=this.br(n);i&&this.Vr(i)}for(const i of this.yr)this.mr(i);this.yr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,i){this.Dr(e,n,i),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Gp(this.persistenceKey,e));if(i){const r=_l.ar(e,i);r&&(n=r.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gp(this.persistenceKey,e))}updateQueryState(e,n,i){this.kr(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Cr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return M("SharedClientState","READ",e,n),n}setItem(e,n){M("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){M("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const n=e;if(n.storageArea===this.storage){if(M("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void He("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Tr.test(n.key)){if(n.newValue==null){const i=this.Or(n.key);return this.Fr(i,null)}{const i=this.Br(n.key,n.newValue);if(i)return this.Fr(i.clientId,i)}}else if(this.Er.test(n.key)){if(n.newValue!==null){const i=this.Lr(n.key,n.newValue);if(i)return this.qr(i)}}else if(this.Ar.test(n.key)){if(n.newValue!==null){const i=this.Ur(n.key,n.newValue);if(i)return this.Kr(i)}}else if(n.key===this.vr){if(n.newValue!==null){const i=this.br(n.newValue);if(i)return this.Vr(i)}}else if(n.key===this.Ir){const i=function(r){let s=Wt.ct;if(r!=null)try{const o=JSON.parse(r);q(typeof o=="number"),s=o}catch(o){He("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);i!==Wt.ct&&this.sequenceNumberHandler(i)}else if(n.key===this.Rr){const i=this.Gr(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Qr(r)))}}}else this.yr.push(n)})}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,i){const r=new Td(this.currentUser,e,n,i),s=zx(this.persistenceKey,this.currentUser,e);this.setItem(s,r.hr())}Cr(e){const n=zx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){const n={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(n))}kr(e,n,i){const r=Gp(this.persistenceKey,e),s=new _l(e,n,i);this.setItem(r,s.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const i=this.Or(e);return Cd.ar(i,n)}Lr(e,n){const i=this.Er.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Td.ar(new st(s),r,n)}Ur(e,n){const i=this.Ar.exec(e),r=Number(i[1]);return _l.ar(r,n)}br(e){return a0.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);M("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const i=n?this.gr.insert(e,n):this.gr.remove(e),r=this.Sr(this.gr),s=this.Sr(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Wr(o,a).then(()=>{this.gr=i})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=qv();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class uC{constructor(){this.Hr=new jm,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,i){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new jm,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu=null;function Yp(){return Lu===null?Lu=268435456+Math.round(2147483648*Math.random()):Lu++,"0x"+Lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class _$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,i,r,s){const o=Yp(),a=this.To(e,n);M("RestConnection",`Sending RPC '${e}' ${o}:`,a,i);const l={};return this.Eo(l,r,s),this.Ao(e,a,l,i).then(c=>(M("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw An("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}vo(e,n,i,r,s,o){return this.Io(e,n,i,r,s)}Eo(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+ya,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,n){const i=v$[e];return`${this.mo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,i,r){const s=Yp();return new Promise((o,a)=>{const l=new g2;l.setWithCredentials(!0),l.listenOnce(d2.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Hp.NO_ERROR:const u=l.getResponseJson();M(St,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Hp.TIMEOUT:M(St,`RPC '${e}' ${s} timed out`),a(new P(C.DEADLINE_EXCEEDED,"Request time out"));break;case Hp.HTTP_ERROR:const h=l.getStatus();if(M(St,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const g=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(w)>=0?w:C.UNKNOWN}(f.status);a(new P(g,f.message))}else a(new P(C.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new P(C.UNAVAILABLE,"Connection failed."));break;default:V()}}finally{M(St,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);M(St,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Ro(e,n,i){const r=Yp(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=u2(),a=h2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new p2({})),this.Eo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");M(St,`Creating RPC '${e}' stream ${r}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const g=new w$({ro:w=>{f?M(St,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(d||(M(St,`Opening RPC '${e}' stream ${r} transport.`),h.open(),d=!0),M(St,`RPC '${e}' stream ${r} sending:`,w),h.send(w))},oo:()=>h.close()}),y=(w,p,m)=>{w.listen(p,v=>{try{m(v)}catch(x){setTimeout(()=>{throw x},0)}})};return y(h,Nu.EventType.OPEN,()=>{f||M(St,`RPC '${e}' stream ${r} transport opened.`)}),y(h,Nu.EventType.CLOSE,()=>{f||(f=!0,M(St,`RPC '${e}' stream ${r} transport closed`),g.wo())}),y(h,Nu.EventType.ERROR,w=>{f||(f=!0,An(St,`RPC '${e}' stream ${r} transport errored:`,w),g.wo(new P(C.UNAVAILABLE,"The operation could not be completed")))}),y(h,Nu.EventType.MESSAGE,w=>{var p;if(!f){const m=w.data[0];q(!!m);const v=m,x=v.error||((p=v[0])===null||p===void 0?void 0:p.error);if(x){M(St,`RPC '${e}' stream ${r} received error:`,x);const b=x.status;let E=function(S){const I=Qe[S];if(I!==void 0)return AT(I)}(b),k=x.message;E===void 0&&(E=C.INTERNAL,k="Unknown error status: "+b+" with message "+x.message),f=!0,g.wo(new P(E,k)),h.close()}else M(St,`RPC '${e}' stream ${r} received:`,m),g._o(m)}}),y(a,f2.STAT_EVENT,w=>{w.stat===X_.PROXY?M(St,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===X_.NOPROXY&&M(St,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{g.fo()},0),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return typeof window<"u"?window:null}function _h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return new CF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,n-i);r>0&&M("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n,i,r,s,o,a,l){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new l0(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===C.RESOURCE_EXHAUSTED?(He(n.toString()),He("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===n&&this.Zo(i,r)},i=>{e(()=>{const r=new P(C.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,n){const i=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return M("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x$ extends dC{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=DF(this.serializer,e),i=function(r){if(!("targetChange"in r))return H.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?H.min():s.readTime?Ge(s.readTime):H.min()}(e);return this.listener.nu(n,i)}su(e){const n={};n.database=uc(this.serializer),n.addTarget=function(r,s){let o;const a=s.target;if(o=_d(a)?{documents:jT(r,a)}:{query:BT(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=OT(r,s.resumeToken);const l=Mm(r,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(H.min())>0){o.readTime=Zo(r,s.snapshotVersion.toTimestamp());const l=Mm(r,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const i=MF(this.serializer,e);i&&(n.labels=i),this.Wo(n)}iu(e){const n={};n.database=uc(this.serializer),n.removeTarget=e,this.Wo(n)}}class b$ extends dC{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=PF(e.writeResults,e.commitTime),i=Ge(e.commitTime);return this.listener.cu(i,n)}return q(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=uc(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>hc(this.serializer,i))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S$ extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new P(C.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new P(C.UNKNOWN,r.toString())})}vo(e,n,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(C.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class E${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(He(n),this.mu=!1):M("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(o=>{i.enqueueAndForget(async()=>{Hr(this)&&(M("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=j(a);l.vu.add(4),await xa(l),l.bu.set("Unknown"),l.vu.delete(4),await Gc(l)}(this))})}),this.bu=new E$(i,r)}}async function Gc(t){if(Hr(t))for(const e of t.Ru)await e(!0)}async function xa(t){for(const e of t.Ru)await e(!1)}function Ff(t,e){const n=j(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),h0(n)?u0(n):Sa(n).Ko()&&c0(n,e))}function dc(t,e){const n=j(t),i=Sa(n);n.Au.delete(e),i.Ko()&&fC(n,e),n.Au.size===0&&(i.Ko()?i.jo():Hr(n)&&n.bu.set("Unknown"))}function c0(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sa(t).su(e)}function fC(t,e){t.Vu.qt(e),Sa(t).iu(e)}function u0(t){t.Vu=new EF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Sa(t).start(),t.bu.gu()}function h0(t){return Hr(t)&&!Sa(t).Uo()&&t.Au.size>0}function Hr(t){return j(t).vu.size===0}function pC(t){t.Vu=void 0}async function I$(t){t.Au.forEach((e,n)=>{c0(t,e)})}async function T$(t,e){pC(t),h0(t)?(t.bu.Iu(e),u0(t)):t.bu.set("Unknown")}async function C$(t,e,n){if(t.bu.set("Online"),e instanceof MT&&e.state===2&&e.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.Au.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Au.delete(o),i.Vu.removeTarget(o))}(t,e)}catch(i){M("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nd(t,i)}else if(e instanceof wh?t.Vu.Ht(e):e instanceof PT?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(H.min()))try{const i=await sC(t.localStore);n.compareTo(i)>=0&&await function(r,s){const o=r.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Au.get(l);c&&r.Au.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const c=r.Au.get(a);if(!c)return;r.Au.set(a,c.withResumeToken(nt.EMPTY_BYTE_STRING,c.snapshotVersion)),fC(r,a);const u=new pi(c.target,a,l,c.sequenceNumber);c0(r,u)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){M("RemoteStore","Failed to raise snapshot:",i),await Nd(t,i)}}async function Nd(t,e,n){if(!Ur(e))throw e;t.vu.add(1),await xa(t),t.bu.set("Offline"),n||(n=()=>sC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{M("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Gc(t)})}function gC(t,e){return e().catch(n=>Nd(t,n,e))}async function ba(t){const e=j(t),n=Dr(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;N$(e);)try{const r=await p$(e.localStore,i);if(r===null){e.Eu.length===0&&n.jo();break}i=r.batchId,A$(e,r)}catch(r){await Nd(e,r)}mC(e)&&yC(e)}function N$(t){return Hr(t)&&t.Eu.length<10}function A$(t,e){t.Eu.push(e);const n=Dr(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function mC(t){return Hr(t)&&!Dr(t).Uo()&&t.Eu.length>0}function yC(t){Dr(t).start()}async function D$(t){Dr(t).hu()}async function P$(t){const e=Dr(t);for(const n of t.Eu)e.uu(n.mutations)}async function M$(t,e,n){const i=t.Eu.shift(),r=Qv.from(i,e,n);await gC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ba(t)}async function O$(t,e){e&&Dr(t).ou&&await async function(n,i){if(r=i.code,NT(r)&&r!==C.ABORTED){const s=n.Eu.shift();Dr(n).Qo(),await gC(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ba(n)}var r}(t,e),mC(t)&&yC(t)}async function Wx(t,e){const n=j(t);n.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");const i=Hr(n);n.vu.add(3),await xa(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Gc(n)}async function Bm(t,e){const n=j(t);e?(n.vu.delete(2),await Gc(n)):e||(n.vu.add(2),await xa(n),n.bu.set("Unknown"))}function Sa(t){return t.Su||(t.Su=function(e,n,i){const r=j(e);return r.fu(),new x$(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:I$.bind(null,t),ao:T$.bind(null,t),nu:C$.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),h0(t)?u0(t):t.bu.set("Unknown")):(await t.Su.stop(),pC(t))})),t.Su}function Dr(t){return t.Du||(t.Du=function(e,n,i){const r=j(e);return r.fu(),new b$(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:D$.bind(null,t),ao:O$.bind(null,t),au:P$.bind(null,t),cu:M$.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await ba(t)):(await t.Du.stop(),t.Eu.length>0&&(M("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new d0(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ea(t,e){if(He("AsyncQueue",`${e}: ${t}`),Ur(t))return new P(C.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||F.comparator(n.key,i.key):(n,i)=>F.comparator(n.key,i.key),this.keyedMap=Za(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new Lo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Lo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.Cu=new $e(F.comparator)}track(e){const n=e.doc.key,i=this.Cu.get(n);i?e.type!==0&&i.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&i.type!==1?this.Cu=this.Cu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Cu=this.Cu.remove(n):e.type===1&&i.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):V():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,i)=>{e.push(i)}),e}}class na{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new na(e,n,Lo.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(){this.Nu=void 0,this.listeners=[]}}class L${constructor(){this.queries=new Wr(e=>pT(e),zc),this.onlineState="Unknown",this.ku=new Set}}async function f0(t,e){const n=j(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new R$),r)try{s.Nu=await n.onListen(i)}catch(o){const a=Ea(o,`Initialization of query '${Pm(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&g0(n)}async function p0(t,e){const n=j(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function F$(t,e){const n=j(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.$u(r)&&(i=!0);o.Nu=r}}i&&g0(n)}function $$(t,e,n){const i=j(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function g0(t){t.ku.forEach(e=>{e.next()})}class m0{constructor(e,n,i){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new na(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Ku||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.serializer=e}rr(e){return qn(this.serializer,e)}ur(e){return e.metadata.exists?$T(this.serializer,e.document,!1):Ee.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ge(e)}}class B${constructor(e,n,i){this.ju=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vC(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const i=le.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,i=new qx(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const o of r.metadata.queries){const a=(n.get(o)||Z()).add(s);n.set(o,a)}}return n}async complete(){const e=await g$(this.localStore,new qx(this.serializer),this.documents,this.ju.id),n=this.Wu(this.documents);for(const i of this.queries)await m$(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function vC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.key=e}}class _C{constructor(e){this.key=e}}class xC{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Z(),this.mutatedKeys=Z(),this.tc=mT(e),this.ec=new Lo(this.tc)}get nc(){return this.Yu}sc(e,n){const i=n?n.ic:new Hx,r=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const d=r.get(u),f=Uc(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;d&&f?d.data.isEqual(f.data)?g!==y&&(i.track({type:3,doc:f}),w=!0):this.rc(d,f)||(i.track({type:2,doc:f}),w=!0,(l&&this.tc(f,l)>0||c&&this.tc(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),w=!0):d&&!f&&(i.track({type:1,doc:d}),w=!0,(l||c)&&(a=!0)),w&&(f?(o=o.add(f),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{ec:o,ic:i,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,u)=>function(h,d){const f=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V()}};return f(h)-f(d)}(c.type,u.type)||this.tc(c.doc,u.doc)),this.oc(i);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,s.length!==0||l?{snapshot:new na(this.query,e.ec,r,s,e.mutatedKeys,a===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Hx,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Z(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const n=[];return e.forEach(i=>{this.Zu.has(i)||n.push(new _C(i))}),this.Zu.forEach(i=>{e.has(i)||n.push(new wC(i))}),n}hc(e){this.Yu=e.ir,this.Zu=Z();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return na.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class V${constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class z${constructor(e){this.key=e,this.fc=!1}}class U${constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Wr(a=>pT(a),zc),this._c=new Map,this.mc=new Set,this.gc=new $e(F.comparator),this.yc=new Map,this.Ic=new i0,this.Tc={},this.Ec=new Map,this.Ac=js.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function W$(t,e){const n=x0(t);let i,r;const s=n.wc.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const o=await ea(n.localStore,Yt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await y0(n,e,i,a==="current",o.resumeToken),n.isPrimaryClient&&Ff(n.remoteStore,o)}return r}async function y0(t,e,n,i,r){t.Rc=(h,d,f)=>async function(g,y,w,p){let m=y.view.sc(w);m.zi&&(m=await Id(g.localStore,y.query,!1).then(({documents:b})=>y.view.sc(b,m)));const v=p&&p.targetChanges.get(y.targetId),x=y.view.applyChanges(m,g.isPrimaryClient,v);return Vm(g,y.targetId,x.cc),x.snapshot}(t,h,d,f);const s=await Id(t.localStore,e,!0),o=new xC(e,s.ir),a=o.sc(s.documents),l=qc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);Vm(t,n,c.cc);const u=new V$(e,n,o);return t.wc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}async function H$(t,e){const n=j(t),i=n.wc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter(s=>!zc(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await ta(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),dc(n.remoteStore,i.targetId),ia(n,i.targetId)}).catch(zr)):(ia(n,i.targetId),await ta(n.localStore,i.targetId,!0))}async function q$(t,e,n){const i=b0(t);try{const r=await function(s,o){const a=j(s),l=Me.now(),c=o.reduce((d,f)=>d.add(f.key),Z());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=qt(),g=Z();return a.Zi.getEntries(d,c).next(y=>{f=y,f.forEach((w,p)=>{p.isValidDocument()||(g=g.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(y=>{u=y;const w=[];for(const p of o){const m=xF(p,u.get(p.key).overlayedDocument);m!=null&&w.push(new Oi(p.key,m,sT(m.value.mapValue),Pe.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,w,o)}).next(y=>{h=y;const w=y.applyToLocalDocumentSet(u,g);return a.documentOverlayCache.saveOverlays(d,y.batchId,w)})}).then(()=>({batchId:h.batchId,changes:vT(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new $e(X)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(i,r.batchId,n),await Ri(i,r.changes),await ba(i.remoteStore)}catch(r){const s=Ea(r,"Failed to persist write");n.reject(s)}}async function bC(t,e){const n=j(t);try{const i=await f$(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.yc.get(s);o&&(q(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.fc=!0:r.modifiedDocuments.size>0?q(o.fc):r.removedDocuments.size>0&&(q(o.fc),o.fc=!1))}),await Ri(n,i,e)}catch(i){await zr(i)}}function Kx(t,e,n){const i=j(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=j(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.Mu(o)&&(l=!0)}),l&&g0(a)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function K$(t,e,n){const i=j(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.yc.get(e),s=r&&r.key;if(s){let o=new $e(F.comparator);o=o.insert(s,Ee.newNoDocument(s,H.min()));const a=Z().add(s),l=new Hc(H.min(),new Map,new $e(X),o,a);await bC(i,l),i.gc=i.gc.remove(s),i.yc.delete(e),_0(i)}else await ta(i.localStore,e,!1).then(()=>ia(i,e,n)).catch(zr)}async function G$(t,e){const n=j(t),i=e.batch.batchId;try{const r=await d$(n.localStore,e);w0(n,i,null),v0(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ri(n,r)}catch(r){await zr(r)}}async function Q$(t,e,n){const i=j(t);try{const r=await function(s,o){const a=j(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(q(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(i.localStore,e);w0(i,e,n),v0(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ri(i,r)}catch(r){await zr(r)}}async function Y$(t,e){const n=j(t);Hr(n.remoteStore)||M("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(s){const o=j(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(i===-1)return void e.resolve();const r=n.Ec.get(i)||[];r.push(e),n.Ec.set(i,r)}catch(i){const r=Ea(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function v0(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function w0(t,e,n){const i=j(t);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function ia(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(i=>{t.Ic.containsKey(i)||SC(t,i)})}function SC(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(dc(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),_0(t))}function Vm(t,e,n){for(const i of n)i instanceof wC?(t.Ic.addReference(i.key,e),X$(t,i)):i instanceof _C?(M("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||SC(t,i.key)):V()}function X$(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(M("SyncEngine","New document in limbo: "+n),t.mc.add(i),_0(t))}function _0(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new F(le.fromString(e)),i=t.Ac.next();t.yc.set(i,new z$(n)),t.gc=t.gc.insert(n,i),Ff(t.remoteStore,new pi(Yt(va(n.path)),i,"TargetPurposeLimboResolution",Wt.ct))}}async function Ri(t,e,n){const i=j(t),r=[],s=[],o=[];i.wc.isEmpty()||(i.wc.forEach((a,l)=>{o.push(i.Rc(l,e,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const u=o0.Li(l.targetId,c);s.push(u)}}))}),await Promise.all(o),i.dc.nu(r),await async function(a,l){const c=j(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>T.forEach(l,h=>T.forEach(h.Fi,d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>T.forEach(h.Bi,d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!Ur(u))throw u;M("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Ji.get(h),f=d.snapshotVersion,g=d.withLastLimboFreeSnapshotVersion(f);c.Ji=c.Ji.insert(h,g)}}}(i.localStore,s))}async function J$(t,e){const n=j(t);if(!n.currentUser.isEqual(e)){M("SyncEngine","User change. New user:",e.toKey());const i=await rC(n.localStore,e);n.currentUser=e,function(r,s){r.Ec.forEach(o=>{o.forEach(a=>{a.reject(new P(C.CANCELLED,s))})}),r.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ri(n,i.er)}}function Z$(t,e){const n=j(t),i=n.yc.get(e);if(i&&i.fc)return Z().add(i.key);{let r=Z();const s=n._c.get(e);if(!s)return r;for(const o of s){const a=n.wc.get(o);r=r.unionWith(a.view.nc)}return r}}async function ej(t,e){const n=j(t),i=await Id(n.localStore,e.query,!0),r=e.view.hc(i);return n.isPrimaryClient&&Vm(n,e.targetId,r.cc),r}async function tj(t,e){const n=j(t);return lC(n.localStore,e).then(i=>Ri(n,i))}async function nj(t,e,n,i){const r=j(t),s=await function(o,a){const l=j(o),c=j(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.Sn(u,a).next(h=>h?l.localDocuments.getDocuments(u,h):T.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await ba(r.remoteStore):n==="acknowledged"||n==="rejected"?(w0(r,e,i||null),v0(r,e),function(o,a){j(j(o).mutationQueue).Cn(a)}(r.localStore,e)):V(),await Ri(r,s)):M("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ij(t,e){const n=j(t);if(x0(n),b0(n),e===!0&&n.vc!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await Gx(n,i.toArray());n.vc=!0,await Bm(n.remoteStore,!0);for(const s of r)Ff(n.remoteStore,s)}else if(e===!1&&n.vc!==!1){const i=[];let r=Promise.resolve();n._c.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(ia(n,o),ta(n.localStore,o,!0))),dc(n.remoteStore,o)}),await r,await Gx(n,i),function(s){const o=j(s);o.yc.forEach((a,l)=>{dc(o.remoteStore,l)}),o.Ic.Ts(),o.yc=new Map,o.gc=new $e(F.comparator)}(n),n.vc=!1,await Bm(n.remoteStore,!1)}}async function Gx(t,e,n){const i=j(t),r=[],s=[];for(const o of e){let a;const l=i._c.get(o);if(l&&l.length!==0){a=await ea(i.localStore,Yt(l[0]));for(const c of l){const u=i.wc.get(c),h=await ej(i,u);h.snapshot&&s.push(h.snapshot)}}else{const c=await aC(i.localStore,o);a=await ea(i.localStore,c),await y0(i,EC(c),o,!1,a.resumeToken)}r.push(a)}return i.dc.nu(s),r}function EC(t){return fT(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function rj(t){const e=j(t);return j(j(e.localStore).persistence).$i()}async function sj(t,e,n,i){const r=j(t);if(r.vc)return void M("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await lC(r.localStore,gT(s[0])),a=Hc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",nt.EMPTY_BYTE_STRING);await Ri(r,o,a);break}case"rejected":await ta(r.localStore,e,!0),ia(r,e,i);break;default:V()}}async function oj(t,e,n){const i=x0(t);if(i.vc){for(const r of e){if(i._c.has(r)){M("SyncEngine","Adding an already active target "+r);continue}const s=await aC(i.localStore,r),o=await ea(i.localStore,s);await y0(i,EC(s),o.targetId,!1,o.resumeToken),Ff(i.remoteStore,o)}for(const r of n)i._c.has(r)&&await ta(i.localStore,r,!1).then(()=>{dc(i.remoteStore,r),ia(i,r)}).catch(zr)}}function x0(t){const e=j(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K$.bind(null,e),e.dc.nu=F$.bind(null,e.eventManager),e.dc.Pc=$$.bind(null,e.eventManager),e}function b0(t){const e=j(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q$.bind(null,e),e}function aj(t,e,n){const i=j(t);(async function(r,s,o){try{const a=await s.getMetadata();if(await function(h,d){const f=j(h),g=Ge(d.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",y=>f.qs.getBundleMetadata(y,d.id)).then(y=>!!y&&y.createTime.compareTo(g)>=0)}(r.localStore,a))return await s.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(vC(a));const l=new B$(a,r.localStore,s.serializer);let c=await s.bc();for(;c;){const h=await l.zu(c);h&&o._updateProgress(h),c=await s.bc()}const u=await l.complete();return await Ri(r,u.Ju,void 0),await function(h,d){const f=j(h);return f.persistence.runTransaction("Save bundle","readwrite",g=>f.qs.saveBundleMetadata(g,d))}(r.localStore,a),o._completeWith(u.progress),Promise.resolve(u.Hu)}catch(a){return An("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class zm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return iC(this.persistence,new nC,e.initialUser,this.serializer)}createPersistence(e){return new tC(Lf.zs,this.serializer)}createSharedClientState(e){return new uC}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class kC extends zm{constructor(e,n,i){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await b0(this.Vc.syncEngine),await ba(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return iC(this.persistence,new nC,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new YF(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new M2(n,this.persistence);return new P2(e.asyncQueue,i)}createPersistence(e){const n=s0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new r0(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,hC(),_h(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new uC}}class lj extends kC{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Vc.syncEngine;this.sharedClientState instanceof Qp&&(this.sharedClientState.syncEngine={jr:nj.bind(null,n),zr:sj.bind(null,n),Wr:oj.bind(null,n),$i:rj.bind(null,n),Qr:tj.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ii(async i=>{await ij(this.Vc.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=hC();if(!Qp.D(n))throw new P(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=s0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qp(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class S0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Kx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=J$.bind(null,this.syncEngine),await Bm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new L$}createDatastore(e){const n=Kc(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new _$(r));var r;return function(s,o,a,l){return new S$(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>Kx(this.syncEngine,a,0),o=Ux.D()?new Ux:new y$,new k$(n,i,r,s,o);var n,i,r,s,o}createSyncEngine(e,n){return function(i,r,s,o,a,l,c){const u=new U$(i,r,s,o,a,l);return c&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=j(e);M("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await xa(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):He("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new lt,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(e===null)return null;const n=this.xc.decode(e),i=Number(n);isNaN(i)&&this.Mc(`length string (${n}) is not valid number`);const r=await this.$c(i);return new j$(JSON.parse(r),e.length+i)}Oc(){return this.buffer.findIndex(e=>e===123)}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(this.buffer.length===0)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const n=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Fc(){const e=await this.Cc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new P(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,r){const s=j(i),o=uc(s.serializer)+"/documents",a={documents:r.map(h=>cc(s.serializer,h))},l=await s.vo("BatchGetDocuments",o,a,r.length),c=new Map;l.forEach(h=>{const d=AF(s.serializer,h);c.set(d.key.toString(),d)});const u=[];return r.forEach(h=>{const d=c.get(h.toString());q(!!d),u.push(d)}),u}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new _a(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=F.fromPath(i);this.mutations.push(new Kv(r,this.precondition(r)))}),await async function(n,i){const r=j(n),s=uc(r.serializer)+"/documents",o={writes:i.map(a=>hc(r.serializer,a))};await r.Io("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw V();n=H.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new P(C.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(H.min())?Pe.exists(!1):Pe.updateTime(n):Pe.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(H.min()))throw new P(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pe.updateTime(n)}return Pe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new l0(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No(async()=>{const e=new uj(this.datastore),n=this.qc(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Uc(r)}))}).catch(i=>{this.Uc(i)})})}qc(e){try{const n=this.updateFunction(e);return!Bc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!NT(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=st.UNAUTHENTICATED,this.clientId=WI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{M("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(M("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ea(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function xh(t,e){t.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await rC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Um(t,e){t.asyncQueue.verifyOperationInProgress();const n=await E0(t);M("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>Wx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Wx(e.remoteStore,s)),t._onlineComponents=e}function IC(t){return t.name==="FirebaseError"?t.code===C.FAILED_PRECONDITION||t.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function E0(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){M("FirestoreClient","Using user provided OfflineComponentProvider");try{await xh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!IC(n))throw n;An("Error using user provided cache. Falling back to memory cache: "+n),await xh(t,new zm)}}else M("FirestoreClient","Using default OfflineComponentProvider"),await xh(t,new zm);return t._offlineComponents}async function jf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(M("FirestoreClient","Using user provided OnlineComponentProvider"),await Um(t,t._uninitializedComponentsProvider._online)):(M("FirestoreClient","Using default OnlineComponentProvider"),await Um(t,new S0))),t._onlineComponents}function TC(t){return E0(t).then(e=>e.persistence)}function k0(t){return E0(t).then(e=>e.localStore)}function CC(t){return jf(t).then(e=>e.remoteStore)}function I0(t){return jf(t).then(e=>e.syncEngine)}function fj(t){return jf(t).then(e=>e.datastore)}async function ra(t){const e=await jf(t),n=e.eventManager;return n.onListen=W$.bind(null,e.syncEngine),n.onUnlisten=H$.bind(null,e.syncEngine),n}function pj(t){return t.asyncQueue.enqueue(async()=>{const e=await TC(t),n=await CC(t);return e.setNetworkEnabled(!0),function(i){const r=j(i);return r.vu.delete(0),Gc(r)}(n)})}function gj(t){return t.asyncQueue.enqueue(async()=>{const e=await TC(t),n=await CC(t);return e.setNetworkEnabled(!1),async function(i){const r=j(i);r.vu.add(0),await xa(r),r.bu.set("Offline")}(n)})}function mj(t,e){const n=new lt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,r,s){try{const o=await function(a,l){const c=j(a);return c.persistence.runTransaction("read document","readonly",u=>c.localDocuments.getDocument(u,l))}(i,r);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new P(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Ea(o,`Failed to get document '${r} from cache`);s.reject(a)}}(await k0(t),e,n)),n.promise}function NC(t,e,n={}){const i=new lt;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new $f({next:h=>{s.enqueueAndForget(()=>p0(r,u));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new P(C.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new P(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new m0(va(o.path),c,{includeMetadataChanges:!0,Ku:!0});return f0(r,u)}(await ra(t),t.asyncQueue,e,n,i)),i.promise}function yj(t,e){const n=new lt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,r,s){try{const o=await Id(i,r,!0),a=new xC(r,o.ir),l=a.sc(o.documents),c=a.applyChanges(l,!1);s.resolve(c.snapshot)}catch(o){const a=Ea(o,`Failed to execute query '${r} against cache`);s.reject(a)}}(await k0(t),e,n)),n.promise}function AC(t,e,n={}){const i=new lt;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new $f({next:h=>{s.enqueueAndForget(()=>p0(r,u)),h.fromCache&&a.source==="server"?l.reject(new P(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new m0(o,c,{includeMetadataChanges:!0,Ku:!0});return f0(r,u)}(await ra(t),t.asyncQueue,e,n,i)),i.promise}function vj(t,e){const n=new $f(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,r){j(i).ku.add(r),r.next()}(await ra(t),n)),()=>{n.Dc(),t.asyncQueue.enqueueAndForget(async()=>function(i,r){j(i).ku.delete(r)}(await ra(t),n))}}function wj(t,e,n,i){const r=function(s,o){let a;return a=typeof s=="string"?DT().encode(s):s,function(l,c){return new cj(l,c)}(function(l,c){if(l instanceof Uint8Array)return Qx(l,c);if(l instanceof ArrayBuffer)return Qx(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Kc(e));t.asyncQueue.enqueueAndForget(async()=>{aj(await I0(t),r,i)})}function _j(t,e){return t.asyncQueue.enqueue(async()=>function(n,i){const r=j(n);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(await k0(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t,e,n){if(!n)throw new P(C.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function PC(t,e,n,i){if(e===!0&&i===!0)throw new P(C.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xx(t){if(!F.isDocumentKey(t))throw new P(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jx(t){if(F.isDocumentKey(t))throw new P(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":V()}function ue(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new P(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bf(t);throw new P(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function MC(t,e){if(e<=0)throw new P(C.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new P(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new P(C.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new P(C.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new P(C.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,n.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,i}}class Qc{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zx(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new _2;switch(n.type){case"firstParty":return new E2(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new P(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Yx.get(e);n&&(M("ComponentProvider","Removing Datastore"),Yx.delete(e),n.terminate())}(this),Promise.resolve()}}function xj(t,e,n,i={}){var r;const s=(t=ue(t,Qc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&An("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=st.MOCK_USER;else{a=AO(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new P(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new st(c)}t._authCredentials=new x2(new UI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ne(this.firestore,e,this._key)}}class wt{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wt(this.firestore,e,this._query)}}class Kn extends wt{constructor(e,n,i){super(e,n,va(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new F(e))}withConverter(e){return new Kn(this.firestore,e,this._path)}}function OC(t,e,...n){if(t=we(t),T0("collection","path",e),t instanceof Qc){const i=le.fromString(e,...n);return Jx(i),new Kn(t,null,i)}{if(!(t instanceof Ne||t instanceof Kn))throw new P(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(le.fromString(e,...n));return Jx(i),new Kn(t.firestore,null,i)}}function bj(t,e){if(t=ue(t,Qc),T0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(C.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wt(t,null,function(n){return new Mi(le.emptyPath(),n)}(e))}function Ad(t,e,...n){if(t=we(t),arguments.length===1&&(e=WI.A()),T0("doc","path",e),t instanceof Qc){const i=le.fromString(e,...n);return Xx(i),new Ne(t,null,new F(i))}{if(!(t instanceof Ne||t instanceof Kn))throw new P(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(le.fromString(e,...n));return Xx(i),new Ne(t.firestore,t instanceof Kn?t.converter:null,new F(i))}}function RC(t,e){return t=we(t),e=we(e),(t instanceof Ne||t instanceof Kn)&&(e instanceof Ne||e instanceof Kn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function LC(t,e){return t=we(t),e=we(e),t instanceof wt&&e instanceof wt&&t.firestore===e.firestore&&zc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new l0(this,"async_queue_retry"),this.Xc=()=>{const n=_h();n&&M("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=_h();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=_h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new lt;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Ur(e))throw e;M("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{this.Wc=i,this.Hc=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(i);throw He("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Hc=!1,i))));return this.Gc=n,n}enqueueAfterDelay(e,n,i){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const r=d0.createAndSchedule(this,e,n,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&V()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function Wm(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of n)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Ej{constructor(){this._progressObserver={},this._taskCompletionResolver=new lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=-1;class Ue extends Qc{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Sj,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||FC(this),this._firestoreClient.terminate()}}function dt(t){return t._firestoreClient||FC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function FC(t){var e,n,i;const r=t._freezeSettings(),s=function(o,a,l,c){return new eF(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,DC(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new dj(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function Ij(t,e){jC(t=ue(t,Ue));const n=dt(t);if(n._uninitializedComponentsProvider)throw new P(C.FAILED_PRECONDITION,"SDK cache is already specified.");An("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),r=new S0;return $C(n,r,new kC(r,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function Tj(t){jC(t=ue(t,Ue));const e=dt(t);if(e._uninitializedComponentsProvider)throw new P(C.FAILED_PRECONDITION,"SDK cache is already specified.");An("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new S0;return $C(e,i,new lj(i,n.cacheSizeBytes))}function $C(t,e,n){const i=new lt;return t.asyncQueue.enqueue(async()=>{try{await xh(t,n),await Um(t,e),i.resolve()}catch(r){const s=r;if(!IC(s))throw s;An("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}}).then(()=>i.promise)}function Cj(t){if(t._initialized&&!t._terminated)throw new P(C.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new lt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Sn.D())return Promise.resolve();const i=n+"main";await Sn.delete(i)}(s0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Nj(t){return function(e){const n=new lt;return e.asyncQueue.enqueueAndForget(async()=>Y$(await I0(e),n)),n.promise}(dt(t=ue(t,Ue)))}function Aj(t){return pj(dt(t=ue(t,Ue)))}function Dj(t){return gj(dt(t=ue(t,Ue)))}function Pj(t,e){const n=dt(t=ue(t,Ue)),i=new Ej;return wj(n,t._databaseId,e,i),i}function Mj(t,e){return _j(dt(t=ue(t,Ue)),e).then(n=>n?new wt(t,null,n.query):null)}function jC(t){if(t._initialized||t._terminated)throw new P(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(nt.fromBase64String(e))}catch(n){throw new P(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jn(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new P(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new P(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new P(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=/^__.*__$/;class Rj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new wa(e,this.data,n,this.fieldTransforms)}}class BC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function VC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V()}}class zf{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new zf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Dd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(VC(this.ca)&&Oj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Lj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Kc(e)}ya(e,n,i,r=!1){return new zf({ca:e,methodName:n,ga:i,path:qe.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zs(t){const e=t._freezeSettings(),n=Kc(t._databaseId);return new Lj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Uf(t,e,n,i,r,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,r);D0("Data must be an object, but it was:",o,i);const a=WC(i,o);let l,c;if(s.merge)l=new Ht(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Hm(e,h,n);if(!o.contains(d))throw new P(C.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);qC(u,d)||u.push(d)}l=new Ht(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new Rj(new gt(a),l,c)}class Yc extends Js{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yc}}function zC(t,e,n){return new zf({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class C0 extends Js{_toFieldTransform(e){return new Wc(e.path,new Xo)}isEqual(e){return e instanceof C0}}class Fj extends Js{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=zC(this,e,!0),i=this.pa.map(s=>eo(s,n)),r=new Rs(i);return new Wc(e.path,r)}isEqual(e){return this===e}}class $j extends Js{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=zC(this,e,!0),i=this.pa.map(s=>eo(s,n)),r=new Ls(i);return new Wc(e.path,r)}isEqual(e){return this===e}}class jj extends Js{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new Jo(e.serializer,bT(e.serializer,this.Ia));return new Wc(e.path,n)}isEqual(e){return this===e}}function N0(t,e,n,i){const r=t.ya(1,e,n);D0("Data must be an object, but it was:",r,i);const s=[],o=gt.empty();Xs(i,(l,c)=>{const u=P0(e,l,n);c=we(c);const h=r.da(u);if(c instanceof Yc)s.push(u);else{const d=eo(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new Ht(s);return new BC(o,a,r.fieldTransforms)}function A0(t,e,n,i,r,s){const o=t.ya(1,e,n),a=[Hm(e,i,n)],l=[r];if(s.length%2!=0)throw new P(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Hm(e,s[d])),l.push(s[d+1]);const c=[],u=gt.empty();for(let d=a.length-1;d>=0;--d)if(!qC(c,a[d])){const f=a[d];let g=l[d];g=we(g);const y=o.da(f);if(g instanceof Yc)c.push(f);else{const w=eo(g,y);w!=null&&(c.push(f),u.set(f,w))}}const h=new Ht(c);return new BC(u,h,o.fieldTransforms)}function UC(t,e,n,i=!1){return eo(n,t.ya(i?4:3,e))}function eo(t,e){if(HC(t=we(t)))return D0("Unsupported field value:",e,t),WC(t,e);if(t instanceof Js)return function(n,i){if(!VC(i.ca))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,i){const r=[];let s=0;for(const o of n){let a=eo(o,i.wa(s));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=we(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return bT(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Me.fromDate(n);return{timestampValue:Zo(i.serializer,r)}}if(n instanceof Me){const r=new Me(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Zo(i.serializer,r)}}if(n instanceof Vf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Jn)return{bytesValue:OT(i.serializer,n._byteString)};if(n instanceof Ne){const r=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Zv(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${Bf(n)}`)}(t,e)}function WC(t,e){const n={};return nT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(t,(i,r)=>{const s=eo(r,e.ha(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function HC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof Vf||t instanceof Jn||t instanceof Ne||t instanceof Js)}function D0(t,e,n){if(!HC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=Bf(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function Hm(t,e,n){if((e=we(e))instanceof Pr)return e._internalPath;if(typeof e=="string")return P0(t,e);throw Dd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Bj=new RegExp("[~\\*/\\[\\]]");function P0(t,e,n){if(e.search(Bj)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pr(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dd(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new P(C.INVALID_ARGUMENT,a+t+l)}function qC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Vj extends fc{data(){return super.data()}}function Wf(t,e){return typeof e=="string"?P0(t,e):e instanceof Pr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new P(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class M0{}class Xc extends M0{}function Bi(t,e,...n){let i=[];e instanceof M0&&i.push(e),i=i.concat(n),function(r){const s=r.filter(a=>a instanceof O0).length,o=r.filter(a=>a instanceof Hf).length;if(s>1||s>0&&o>0)throw new P(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Hf extends Xc{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Hf(e,n,i)}_apply(e){const n=this._parse(e);return QC(e._query,n),new wt(e.firestore,e.converter,Dm(e._query,n))}_parse(e){const n=Zs(e.firestore);return function(r,s,o,a,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new P(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){tb(u,c);const d=[];for(const f of u)d.push(eb(a,r,f));h={arrayValue:{values:d}}}else h=eb(a,r,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||tb(u,c),h=UC(o,s,u,c==="in"||c==="not-in");return te.create(l,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zj(t,e,n){const i=e,r=Wf("where",t);return Hf._create(r,i,n)}class O0 extends M0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new O0(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:de.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let s=i;const o=r.getFlattenedFilters();for(const a of o)QC(s,a),s=Dm(s,a)}(e._query,n),new wt(e.firestore,e.converter,Dm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class R0 extends Xc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new R0(e,n)}_apply(e){const n=function(i,r,s){if(i.startAt!==null)throw new P(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Ro(r,s);return function(a,l){if(Wv(a)===null){const c=Df(a);c!==null&&YC(a,c,l.field)}}(i,o),o}(e._query,this._field,this._direction);return new wt(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Mi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Uj(t,e="asc"){const n=e,i=Wf("orderBy",t);return R0._create(i,n)}class qf extends Xc{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new qf(e,n,i)}_apply(e){return new wt(e.firestore,e.converter,bd(e._query,this._limit,this._limitType))}}function Wj(t){return MC("limit",t),qf._create("limit",t,"F")}function Hj(t){return MC("limitToLast",t),qf._create("limitToLast",t,"L")}class Kf extends Xc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Kf(e,n,i)}_apply(e){const n=GC(e,this.type,this._docOrFields,this._inclusive);return new wt(e.firestore,e.converter,function(i,r){return new Mi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)}(e._query,n))}}function qj(...t){return Kf._create("startAt",t,!0)}function Kj(...t){return Kf._create("startAfter",t,!1)}class Gf extends Xc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Gf(e,n,i)}_apply(e){const n=GC(e,this.type,this._docOrFields,this._inclusive);return new wt(e.firestore,e.converter,function(i,r){return new Mi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)}(e._query,n))}}function Gj(...t){return Gf._create("endBefore",t,!1)}function Qj(...t){return Gf._create("endAt",t,!0)}function GC(t,e,n,i){if(n[0]=we(n[0]),n[0]instanceof fc)return function(r,s,o,a,l){if(!a)throw new P(C.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of bs(r))if(u.field.isKeyField())c.push(Ms(s,a.key));else{const h=a.data.field(u.field);if(Af(h))throw new P(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=u.field.canonicalString();throw new P(C.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}c.push(h)}return new Ar(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=Zs(t.firestore);return function(s,o,a,l,c,u){const h=s.explicitOrderBy;if(c.length>h.length)throw new P(C.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let f=0;f<c.length;f++){const g=c[f];if(h[f].field.isKeyField()){if(typeof g!="string")throw new P(C.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof g}`);if(!Hv(s)&&g.indexOf("/")!==-1)throw new P(C.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${g}' contains a slash.`);const y=s.path.child(le.fromString(g));if(!F.isDocumentKey(y))throw new P(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const w=new F(y);d.push(Ms(o,w))}else{const y=UC(a,l,g);d.push(y)}}return new Ar(d,u)}(t._query,t.firestore._databaseId,r,e,n,i)}}function eb(t,e,n){if(typeof(n=we(n))=="string"){if(n==="")throw new P(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hv(e)&&n.indexOf("/")!==-1)throw new P(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(le.fromString(n));if(!F.isDocumentKey(i))throw new P(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ms(t,new F(i))}if(n instanceof Ne)return Ms(t,n._key);throw new P(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bf(n)}.`)}function tb(t,e){if(!Array.isArray(t)||t.length===0)throw new P(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QC(t,e){if(e.isInequality()){const i=Df(t),r=e.field;if(i!==null&&!i.isEqual(r))throw new P(C.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=Wv(t);s!==null&&YC(t,r,s)}const n=function(i,r){for(const s of i)for(const o of s.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new P(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function YC(t,e,n){if(!n.isEqual(e))throw new P(C.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class L0{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw V()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Xs(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new Vf(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=zv(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(oc(e));default:return null}}convertTimestamp(e){const n=Ir(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=le.fromString(e);q(WT(i));const r=new Cr(i.get(1),i.get(3)),s=new F(i.popFirst(5));return r.isEqual(n)||He(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Yj extends L0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ni extends fc{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Wf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class xl extends Ni{data(e={}){return super.data(e)}}class Mr{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new gs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new xl(this._firestore,this._userDataWriter,i.key,i,new gs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new P(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const a=new xl(i._firestore,i._userDataWriter,o.doc.key,o.doc,new gs(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new xl(i._firestore,i._userDataWriter,o.doc.key,o.doc,new gs(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:Xj(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Xj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V()}}function XC(t,e){return t instanceof Ni&&e instanceof Ni?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Mr&&e instanceof Mr&&t._firestore===e._firestore&&LC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t){t=ue(t,Ne);const e=ue(t.firestore,Ue);return NC(dt(e),t._key).then(n=>F0(e,t,n))}class to extends L0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,n)}}function Zj(t){t=ue(t,Ne);const e=ue(t.firestore,Ue),n=dt(e),i=new to(e);return mj(n,t._key).then(r=>new Ni(e,i,t._key,r,new gs(r!==null&&r.hasLocalMutations,!0),t.converter))}function e4(t){t=ue(t,Ne);const e=ue(t.firestore,Ue);return NC(dt(e),t._key,{source:"server"}).then(n=>F0(e,t,n))}function t4(t){t=ue(t,wt);const e=ue(t.firestore,Ue),n=dt(e),i=new to(e);return KC(t._query),AC(n,t._query).then(r=>new Mr(e,i,t,r))}function n4(t){t=ue(t,wt);const e=ue(t.firestore,Ue),n=dt(e),i=new to(e);return yj(n,t._query).then(r=>new Mr(e,i,t,r))}function i4(t){t=ue(t,wt);const e=ue(t.firestore,Ue),n=dt(e),i=new to(e);return AC(n,t._query,{source:"server"}).then(r=>new Mr(e,i,t,r))}function nb(t,e,n){t=ue(t,Ne);const i=ue(t.firestore,Ue),r=Qf(t.converter,e,n);return Jc(i,[Uf(Zs(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Pe.none())])}function ib(t,e,n,...i){t=ue(t,Ne);const r=ue(t.firestore,Ue),s=Zs(r);let o;return o=typeof(e=we(e))=="string"||e instanceof Pr?A0(s,"updateDoc",t._key,e,n,i):N0(s,"updateDoc",t._key,e),Jc(r,[o.toMutation(t._key,Pe.exists(!0))])}function r4(t){return Jc(ue(t.firestore,Ue),[new _a(t._key,Pe.none())])}function s4(t,e){const n=ue(t.firestore,Ue),i=Ad(t),r=Qf(t.converter,e);return Jc(n,[Uf(Zs(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Pe.exists(!1))]).then(()=>i)}function JC(t,...e){var n,i,r;t=we(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Wm(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Wm(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(t instanceof Ne)c=ue(t.firestore,Ue),u=va(t._key.path),l={next:h=>{e[o]&&e[o](F0(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ue(t,wt);c=ue(h.firestore,Ue),u=h._query;const d=new to(c);l={next:f=>{e[o]&&e[o](new Mr(c,d,h,f))},error:e[o+1],complete:e[o+2]},KC(t._query)}return function(h,d,f,g){const y=new $f(g),w=new m0(d,y,f);return h.asyncQueue.enqueueAndForget(async()=>f0(await ra(h),w)),()=>{y.Dc(),h.asyncQueue.enqueueAndForget(async()=>p0(await ra(h),w))}}(dt(c),u,a,l)}function o4(t,e){return vj(dt(t=ue(t,Ue)),Wm(e)?e:{next:e})}function Jc(t,e){return function(n,i){const r=new lt;return n.asyncQueue.enqueueAndForget(async()=>q$(await I0(n),i,r)),r.promise}(dt(t),e)}function F0(t,e,n){const i=n.docs.get(e._key),r=new to(t);return new Ni(t,r,e._key,i,new gs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zs(e)}set(e,n,i){this._verifyNotCommitted();const r=Qi(e,this._firestore),s=Qf(r.converter,n,i),o=Uf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Pe.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=Qi(e,this._firestore);let o;return o=typeof(n=we(n))=="string"||n instanceof Pr?A0(this._dataReader,"WriteBatch.update",s._key,n,i,r):N0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Pe.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qi(e,this._firestore);return this._mutations=this._mutations.concat(new _a(n._key,Pe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qi(t,e){if((t=we(t)).firestore!==e)throw new P(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4 extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Zs(e)}get(e){const n=Qi(e,this._firestore),i=new Yj(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return V();const s=r[0];if(s.isFoundDocument())return new fc(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new fc(this._firestore,i,n._key,null,n.converter);throw V()})}set(e,n,i){const r=Qi(e,this._firestore),s=Qf(r.converter,n,i),o=Uf(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,o),this}update(e,n,i,...r){const s=Qi(e,this._firestore);let o;return o=typeof(n=we(n))=="string"||n instanceof Pr?A0(this._dataReader,"Transaction.update",s._key,n,i,r):N0(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Qi(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Qi(e,this._firestore),i=new to(this._firestore);return super.get(e).then(r=>new Ni(this._firestore,i,n._key,r._document,new gs(!1,!1),n.converter))}}function u4(t,e,n){t=ue(t,Ue);const i=Object.assign(Object.assign({},a4),n);return function(r){if(r.maxAttempts<1)throw new P(C.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,o){const a=new lt;return r.asyncQueue.enqueueAndForget(async()=>{const l=await fj(r);new hj(r.asyncQueue,l,o,s,a).run()}),a.promise}(dt(t),r=>e(new c4(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(){return new Yc("deleteField")}function d4(){return new C0("serverTimestamp")}function f4(...t){return new Fj("arrayUnion",t)}function p4(...t){return new $j("arrayRemove",t)}function g4(t){return new jj("increment",t)}(function(t,e=!0){(function(n){ya=n})(jr),Er(new Ti("firestore",(n,{instanceIdentifier:i,options:r})=>{const s=n.getProvider("app").getImmediate(),o=new Ue(new b2(n.getProvider("auth-internal")),new I2(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new P(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cr(a.options.projectId,l)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Hn(J_,"3.13.0",t),Hn(J_,"3.13.0","esm2017")})();const m4="@firebase/firestore-compat",y4="0.3.12";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function sb(){if(!J2())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}let ZC=class qm{constructor(e){this._delegate=e}static fromBase64String(e){return sb(),new qm(Jn.fromBase64String(e))}static fromUint8Array(e){return rb(),new qm(Jn.fromUint8Array(e))}toBase64(){return sb(),this._delegate.toBase64()}toUint8Array(){return rb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){return v4(t,["next","error","complete"])}function v4(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{enableIndexedDbPersistence(e,n){return Ij(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Tj(e._delegate)}clearIndexedDbPersistence(e){return Cj(e._delegate)}}class eN{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Cr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&An("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){xj(this._delegate,e,n,i)}enableNetwork(){return Aj(this._delegate)}disableNetwork(){return Dj(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,PC("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Nj(this._delegate)}onSnapshotsInSync(e){return o4(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sa(this,OC(this._delegate,e))}catch(n){throw Pt(n,"collection()","Firestore.collection()")}}doc(e){try{return new gn(this,Ad(this._delegate,e))}catch(n){throw Pt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Dt(this,bj(this._delegate,e))}catch(n){throw Pt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return u4(this._delegate,n=>e(new tN(this,n)))}batch(){return dt(this._delegate),new nN(new l4(this._delegate,e=>Jc(this._delegate,e)))}loadBundle(e){return Pj(this._delegate,e)}namedQuery(e){return Mj(this._delegate,e).then(n=>n?new Dt(this,n):null)}}class Yf extends L0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ZC(new Jn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return gn.forKey(n,this.firestore,null)}}function _4(t){v2(t)}class tN{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Yf(e)}get(e){const n=ms(e);return this._delegate.get(n).then(i=>new pc(this._firestore,new Ni(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=ms(e);return i?($0("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=ms(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=ms(e);return this._delegate.delete(n),this}}class nN{constructor(e){this._delegate=e}set(e,n,i){const r=ms(e);return i?($0("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=ms(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=ms(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Bs{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new xl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gc(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=Bs.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new Bs(e,new Yf(e),n),r.set(n,s)),s}}Bs.INSTANCES=new WeakMap;class gn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yf(e)}static forPath(e,n,i){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gn(n,new Ne(n._delegate,i,new F(e)))}static forKey(e,n,i){return new gn(n,new Ne(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new sa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sa(this.firestore,OC(this._delegate,e))}catch(n){throw Pt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=we(e),e instanceof Ne?RC(this._delegate,e):!1}set(e,n){n=$0("DocumentReference.set",n);try{return n?nb(this._delegate,e,n):nb(this._delegate,e)}catch(i){throw Pt(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?ib(this._delegate,e):ib(this._delegate,e,n,...i)}catch(r){throw Pt(r,"updateDoc()","DocumentReference.update()")}}delete(){return r4(this._delegate)}onSnapshot(...e){const n=iN(e),i=rN(e,r=>new pc(this.firestore,new Ni(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return JC(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Zj(this._delegate):(e==null?void 0:e.source)==="server"?n=e4(this._delegate):n=Jj(this._delegate),n.then(i=>new pc(this.firestore,new Ni(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new gn(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Pt(t,e,n){return t.message=t.message.replace(e,n),t}function iN(t){for(const e of t)if(typeof e=="object"&&!Km(e))return e;return{}}function rN(t,e){var n,i;let r;return Km(t[0])?r=t[0]:Km(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:s=>{r.next&&r.next(e(s))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class pc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new gn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return XC(this._delegate,e._delegate)}}class gc extends pc{data(e){const n=this._delegate.data(e);return w2(n!==void 0),n}}class Dt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yf(e)}where(e,n,i){try{return new Dt(this.firestore,Bi(this._delegate,zj(e,n,i)))}catch(r){throw Pt(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Dt(this.firestore,Bi(this._delegate,Uj(e,n)))}catch(i){throw Pt(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Dt(this.firestore,Bi(this._delegate,Wj(e)))}catch(n){throw Pt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Dt(this.firestore,Bi(this._delegate,Hj(e)))}catch(n){throw Pt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Dt(this.firestore,Bi(this._delegate,qj(...e)))}catch(n){throw Pt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Dt(this.firestore,Bi(this._delegate,Kj(...e)))}catch(n){throw Pt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Dt(this.firestore,Bi(this._delegate,Gj(...e)))}catch(n){throw Pt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Dt(this.firestore,Bi(this._delegate,Qj(...e)))}catch(n){throw Pt(n,"endAt()","Query.endAt()")}}isEqual(e){return LC(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=n4(this._delegate):(e==null?void 0:e.source)==="server"?n=i4(this._delegate):n=t4(this._delegate),n.then(i=>new Gm(this.firestore,new Mr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=iN(e),i=rN(e,r=>new Gm(this.firestore,new Mr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return JC(this._delegate,n,i)}withConverter(e){return new Dt(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class x4{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new gc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Gm{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Dt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new x4(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new gc(this._firestore,i))})}isEqual(e){return XC(this._delegate,e._delegate)}}class sa extends Dt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gn(this.firestore,e):null}doc(e){try{return e===void 0?new gn(this.firestore,Ad(this._delegate)):new gn(this.firestore,Ad(this._delegate,e))}catch(n){throw Pt(n,"doc()","CollectionReference.doc()")}}add(e){return s4(this._delegate,e).then(n=>new gn(this.firestore,n))}isEqual(e){return RC(this._delegate,e._delegate)}withConverter(e){return new sa(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ms(t){return ue(t,Ne)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(...e){this._delegate=new Pr(...e)}static documentId(){return new j0(qe.keyField().canonicalString())}isEqual(e){return e=we(e),e instanceof Pr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this._delegate=e}static serverTimestamp(){const e=d4();return e._methodName="FieldValue.serverTimestamp",new cs(e)}static delete(){const e=h4();return e._methodName="FieldValue.delete",new cs(e)}static arrayUnion(...e){const n=f4(...e);return n._methodName="FieldValue.arrayUnion",new cs(n)}static arrayRemove(...e){const n=p4(...e);return n._methodName="FieldValue.arrayRemove",new cs(n)}static increment(e){const n=g4(e);return n._methodName="FieldValue.increment",new cs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4={Firestore:eN,GeoPoint:Vf,Timestamp:Me,Blob:ZC,Transaction:tN,WriteBatch:nN,DocumentReference:gn,DocumentSnapshot:pc,Query:Dt,QueryDocumentSnapshot:gc,QuerySnapshot:Gm,CollectionReference:sa,FieldPath:j0,FieldValue:cs,setLogLevel:_4,CACHE_SIZE_UNLIMITED:kj};function S4(t,e){t.INTERNAL.registerComponent(new Ti("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},b4)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){S4(t,(e,n)=>new eN(e,n,new w4)),t.registerVersion(m4,y4)}E4(pa);function B0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function sN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const k4=sN,oN=new Qs("auth","Firebase",sN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new uf("@firebase/auth");function I4(t,...e){Pd.logLevel<=ae.WARN&&Pd.warn(`Auth (${jr}): ${t}`,...e)}function bh(t,...e){Pd.logLevel<=ae.ERROR&&Pd.error(`Auth (${jr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,...e){throw V0(t,...e)}function Gn(t,...e){return V0(t,...e)}function aN(t,e,n){const i=Object.assign(Object.assign({},k4()),{[e]:n});return new Qs("auth","Firebase",i).create(e,{appName:t.name})}function T4(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Zn(t,"argument-error"),aN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function V0(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return oN.create(t,...e)}function Y(t,e,...n){if(!t)throw V0(e,...n)}function gi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bh(e),new Error(e)}function Ai(t,e){t||gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function C4(){return ob()==="http:"||ob()==="https:"}function ob(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(C4()||OO()||"connection"in navigator)?navigator.onLine:!0}function A4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ai(n>e,"Short delay should be less than long delay!"),this.isMobile=DO()||RO()}get(){return N4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(t,e){Ai(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new Zc(3e4,6e4);function cN(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function eu(t,e,n,i,r={}){return uN(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Pc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),lN.fetch()(hN(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function uN(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},D4),e);try{const r=new O4(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Fu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Fu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Fu(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw aN(t,u,c);Zn(t,u)}}catch(r){if(r instanceof ei)throw r;Zn(t,"network-request-failed",{message:String(r)})}}async function M4(t,e,n,i,r={}){const s=await eu(t,e,n,i,r);return"mfaPendingCredential"in s&&Zn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function hN(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?z0(t.config,r):`${t.config.apiScheme}://${r}`}class O4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Gn(this.auth,"network-request-failed")),P4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Gn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(t,e){return eu(t,"POST","/v1/accounts:delete",e)}async function L4(t,e){return eu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function F4(t,e=!1){const n=we(t),i=await n.getIdToken(e),r=U0(i);Y(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:bl(Xp(r.auth_time)),issuedAtTime:bl(Xp(r.iat)),expirationTime:bl(Xp(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Xp(t){return Number(t)*1e3}function U0(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ik(n);return r?JSON.parse(r):(bh("Failed to decode base64 JWT payload"),null)}catch(r){return bh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function $4(t){const e=U0(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ei&&j4(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function j4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bl(this.lastLoginAt),this.creationTime=bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(t){var e;const n=t.auth,i=await t.getIdToken(),r=await mc(t,L4(n,{idToken:i}));Y(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?U4(s.providerUserInfo):[],a=z4(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dN(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function V4(t){const e=we(t);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z4(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function U4(t){return t.map(e=>{var{providerId:n}=e,i=B0(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e){const n=await uN(t,{},async()=>{const i=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=hN(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",lN.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Y(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await W4(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new yc;return i&&(Y(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Y(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yc,this.toJSON())}_performRefresh(){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ss{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=B0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new B4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dN(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await mc(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return F4(this,e)}reload(){return V4(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Md(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await mc(this,R4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,p=(c=n.createdAt)!==null&&c!==void 0?c:void 0,m=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:x,isAnonymous:b,providerData:E,stsTokenManager:k}=n;Y(v&&k,e,"internal-error");const S=yc.fromJSON(this.name,k);Y(typeof v=="string",e,"internal-error"),Vi(h,e.name),Vi(d,e.name),Y(typeof x=="boolean",e,"internal-error"),Y(typeof b=="boolean",e,"internal-error"),Vi(f,e.name),Vi(g,e.name),Vi(y,e.name),Vi(w,e.name),Vi(p,e.name),Vi(m,e.name);const I=new Ss({uid:v,auth:e,email:d,emailVerified:x,displayName:h,isAnonymous:b,photoURL:g,phoneNumber:f,tenantId:y,stsTokenManager:S,createdAt:p,lastLoginAt:m});return E&&Array.isArray(E)&&(I.providerData=E.map(N=>Object.assign({},N))),w&&(I._redirectEventId=w),I}static async _fromIdTokenResponse(e,n,i=!1){const r=new yc;r.updateFromServerResponse(n);const s=new Ss({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Md(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function mi(t){Ai(t instanceof Function,"Expected a class definition");let e=ab.get(t);return e?(Ai(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ab.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fN.type="NONE";const lb=fN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t,e,n){return`firebase:${t}:${e}:${n}`}class Fo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Sh(this.userKey,r.apiKey,s),this.fullPersistenceKey=Sh("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ss._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Fo(mi(lb),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||mi(lb);const o=Sh(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Ss._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Fo(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Fo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vN(e))return"Blackberry";if(wN(e))return"Webos";if(W0(e))return"Safari";if((e.includes("chrome/")||gN(e))&&!e.includes("edge/"))return"Chrome";if(yN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function pN(t=tt()){return/firefox\//i.test(t)}function W0(t=tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gN(t=tt()){return/crios\//i.test(t)}function mN(t=tt()){return/iemobile/i.test(t)}function yN(t=tt()){return/android/i.test(t)}function vN(t=tt()){return/blackberry/i.test(t)}function wN(t=tt()){return/webos/i.test(t)}function Xf(t=tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function H4(t=tt()){var e;return Xf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function q4(){return LO()&&document.documentMode===10}function _N(t=tt()){return Xf(t)||yN(t)||wN(t)||vN(t)||/windows phone/i.test(t)||mN(t)}function K4(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e=[]){let n;switch(t){case"Browser":n=cb(tt());break;case"Worker":n=`${cb(tt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jr}/${i}`}async function bN(t,e){return eu(t,"GET","/v2/recaptchaConfig",cN(t,e))}function ub(t){return t!==void 0&&t.enterprise!==void 0}class SN{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function EN(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Gn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",G4().appendChild(i)})}function Q4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Y4="https://www.google.com/recaptcha/enterprise.js?render=",X4="recaptcha-enterprise",J4="NO_RECAPTCHA";class Z4{constructor(e){this.type=X4,this.auth=tu(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{bN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new SN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;ub(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(J4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&ub(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}EN(Y4+a).then(()=>{r(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hb(this),this.idTokenSubscription=new hb(this),this.beforeStateQueue=new eB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=mi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?we(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(mi(e))})}async initializeRecaptchaConfig(){const e=await bN(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new SN(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Z4(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&mi(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Y(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&I4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function tu(t){return we(t)}class hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ak(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(t,e){const n=hf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(ud(s,e??{}))return r;Zn(r,"already-initialized")}return n.initialize({options:e})}function iB(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(mi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function rB(t,e,n){const i=tu(t);Y(i._canInitEmulator,i,"emulator-config-failed"),Y(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=kN(e),{host:o,port:a}=sB(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),oB()}function kN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sB(t){const e=kN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:db(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:db(o)}}}function db(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,n){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t,e){return M4(t,"POST","/v1/accounts:signInWithIdp",cN(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB="http://localhost";class Vs extends IN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=B0(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Vs(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return $o(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,$o(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$o(e,n)}buildRequest(){const e={requestUri:aB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends H0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends nu{constructor(){super("facebook.com")}static credential(e){return Vs._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vs._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ui.credential(n,i)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends nu{constructor(){super("github.com")}static credential(e){return Vs._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.GITHUB_SIGN_IN_METHOD="github.com";Xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends nu{constructor(){super("twitter.com")}static credential(e,n){return Vs._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ji.credential(n,i)}catch{return null}}}Ji.TWITTER_SIGN_IN_METHOD="twitter.com";Ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Ss._fromIdTokenResponse(e,i,r),o=fb(i);return new oa({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=fb(i);return new oa({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function fb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends ei{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Od(e,n,i,r)}}function TN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Od._fromErrorAndOperation(t,s,e,i):s})}async function lB(t,e,n=!1){const i=await mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oa._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cB(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await mc(t,TN(i,r,e,t),n);Y(s.idToken,i,"internal-error");const o=U0(s.idToken);Y(o,i,"internal-error");const{sub:a}=o;return Y(t.uid===a,i,"user-mismatch"),oa._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uB(t,e,n=!1){const i="signIn",r=await TN(t,i,e),s=await oa._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function hB(t,e,n,i){return we(t).onIdTokenChanged(e,n,i)}function dB(t,e,n){return we(t).beforeAuthStateChanged(e,n)}const Rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rd,"1"),this.storage.removeItem(Rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(){const t=tt();return W0(t)||Xf(t)}const pB=1e3,gB=10;class NN extends CN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=fB()&&K4(),this.fallbackToPolling=_N(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);q4()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,gB):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},pB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NN.type="LOCAL";const mB=NN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN extends CN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AN.type="SESSION";const DN=AN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Jf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await yB(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=q0("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return window}function wB(t){Qn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return typeof Qn().WorkerGlobalScope<"u"&&typeof Qn().importScripts=="function"}async function _B(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function bB(){return PN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="firebaseLocalStorageDb",SB=1,Ld="firebaseLocalStorage",ON="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zf(t,e){return t.transaction([Ld],e?"readwrite":"readonly").objectStore(Ld)}function EB(){const t=indexedDB.deleteDatabase(MN);return new iu(t).toPromise()}function Ym(){const t=indexedDB.open(MN,SB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ld,{keyPath:ON})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ld)?e(i):(i.close(),await EB(),e(await Ym()))})})}async function pb(t,e,n){const i=Zf(t,!0).put({[ON]:e,value:n});return new iu(i).toPromise()}async function kB(t,e){const n=Zf(t,!1).get(e),i=await new iu(n).toPromise();return i===void 0?null:i.value}function gb(t,e){const n=Zf(t,!0).delete(e);return new iu(n).toPromise()}const IB=800,TB=3;class RN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>TB)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jf._getInstance(bB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _B(),!this.activeServiceWorker)return;this.sender=new vB(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await pb(e,Rd,"1"),await gb(e,Rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>pb(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>kB(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Zf(r,!1).getAll();return new iu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RN.type="LOCAL";const CB=RN;new Zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){return e?mi(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0 extends IN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function NB(t){return uB(t.auth,new K0(t),t.bypassAuthState)}function AB(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),cB(n,new K0(t),t.bypassAuthState)}async function DB(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),lB(n,new K0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NB;case"linkViaPopup":case"linkViaRedirect":return DB;case"reauthViaPopup":case"reauthViaRedirect":return AB;default:Zn(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=new Zc(2e3,1e4);async function MB(t,e,n){const i=tu(t);T4(t,e,H0);const r=LN(i,n);return new ys(i,"signInViaPopup",e,r).executeNotNull()}class ys extends FN{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ys.currentPopupAction&&ys.currentPopupAction.cancel(),ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=q0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PB.get())};e()}}ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB="pendingRedirect",Eh=new Map;class RB extends FN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Eh.get(this.auth._key());if(!e){try{const i=await LB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Eh.set(this.auth._key(),e)}return this.bypassAuthState||Eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LB(t,e){const n=jB(e),i=$B(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function FB(t,e){Eh.set(t._key(),e)}function $B(t){return mi(t._redirectPersistence)}function jB(t){return Sh(OB,t.config.apiKey,t.name)}async function BB(t,e,n=!1){const i=tu(t),r=LN(i,e),o=await new RB(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=10*60*1e3;class zB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!$N(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Gn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VB&&this.cachedEventUids.clear(),this.cachedEventUids.has(mb(e))}saveEventToCache(e){this.cachedEventUids.add(mb(e)),this.lastProcessedEventTime=Date.now()}}function mb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $N({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $N(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(t,e={}){return eu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qB=/^https?/;async function KB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WB(t);for(const n of e)try{if(GB(n))return}catch{}Zn(t,"unauthorized-domain")}function GB(t){const e=Qm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!qB.test(n))return!1;if(HB.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB=new Zc(3e4,6e4);function yb(){const t=Qn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function YB(t){return new Promise((e,n)=>{var i,r,s;function o(){yb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yb(),n(Gn(t,"network-request-failed"))},timeout:QB.get()})}if(!((r=(i=Qn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Qn().gapi)===null||s===void 0)&&s.load)o();else{const a=Q4("iframefcb");return Qn()[a]=()=>{gapi.load?o():n(Gn(t,"network-request-failed"))},EN(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw kh=null,e})}let kh=null;function XB(t){return kh=kh||YB(t),kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB=new Zc(5e3,15e3),ZB="__/auth/iframe",eV="emulator/auth/iframe",tV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iV(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?z0(e,eV):`https://${t.config.authDomain}/${ZB}`,i={apiKey:e.apiKey,appName:t.name,v:jr},r=nV.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Pc(i).slice(1)}`}async function rV(t){const e=await XB(t),n=Qn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:iV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tV,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Gn(t,"network-request-failed"),a=Qn().setTimeout(()=>{s(o)},JB.get());function l(){Qn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oV=500,aV=600,lV="_blank",cV="http://localhost";class vb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uV(t,e,n,i=oV,r=aV){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},sV),{width:i.toString(),height:r.toString(),top:s,left:o}),c=tt().toLowerCase();n&&(a=gN(c)?lV:n),pN(c)&&(e=e||cV,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,g])=>`${d}${f}=${g},`,"");if(H4(c)&&a!=="_self")return hV(e||"",a),new vb(null);const h=window.open(e||"",a,u);Y(h,t,"popup-blocked");try{h.focus()}catch{}return new vb(h)}function hV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="__/auth/handler",fV="emulator/auth/handler",pV=encodeURIComponent("fac");async function wb(t,e,n,i,r,s){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:jr,eventId:r};if(e instanceof H0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof nu){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${pV}=${encodeURIComponent(l)}`:"";return`${gV(t)}?${Pc(a).slice(1)}${c}`}function gV({config:t}){return t.emulator?z0(t,fV):`https://${t.authDomain}/${dV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="webStorageSupport";class mV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DN,this._completeRedirectFn=BB,this._overrideRedirectResult=FB}async _openPopup(e,n,i,r){var s;Ai((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await wb(e,n,i,Qm(),r);return uV(e,o,q0())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await wb(e,n,i,Qm(),r);return wB(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ai(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await rV(e),i=new zB(e);return n.register("authEvent",r=>(Y(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jp,{type:Jp},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Jp];o!==void 0&&n(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _N()||W0()||Xf()}}const yV=mV;var _b="@firebase/auth",xb="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function _V(t){Er(new Ti("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xN(t)},c=new tB(i,r,s,l);return iB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Er(new Ti("auth-internal",e=>{const n=tu(e.getProvider("auth").getImmediate());return(i=>new vV(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hn(_b,xb,wV(t)),Hn(_b,xb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=5*60,bV=Ck("authIdTokenMaxAge")||xV;let bb=null;const SV=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>bV)return;const r=n==null?void 0:n.token;bb!==r&&(bb=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function jN(t=Rk()){const e=hf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nB(t,{popupRedirectResolver:yV,persistence:[CB,mB,DN]}),i=Ck("authTokenSyncURL");if(i){const s=SV(i);dB(n,s,()=>s(n.currentUser)),hB(n,o=>s(o))}const r=CO("auth");return r&&rB(n,`http://${r}`),n}_V("Browser");const EV={apiKey:"AIzaSyAX9Pl_z_af8JSIsJJhq0ytRvZtAsBFjaY",authDomain:"bdiverchile.firebaseapp.com",projectId:"bdiverchile",storageBucket:"bdiverchile.appspot.com",messagingSenderId:"774329576244",appId:"1:774329576244:web:8f17540a9293899bc55361"},BN=pa.initializeApp(EV),Mt=BN.firestore(),Sb=jN(BN),kV=new ui,IV=()=>{const t=_k(),{user:e,setUser:n}=D.useContext(fv),{client:i,setClient:r}=D.useContext(pv);D.useEffect(()=>{const a=Sb.onAuthStateChanged(l=>{l?(async()=>{const u=Mt.collection("DBUsuarios");try{const h=await u.where("UserID","==",`${l.uid}`).limit(1).get();if(!h.empty){const d=h.docs[0].data();n({...l,privileges:d}),r({ClientEvent:d.ClientEvent,UserEntity:d.UserEntity,UserPermisions:d.UserPermisions})}}catch(h){console.error("Error fetching user privileges:",h)}})():(n(void 0),t("/Home"))});return()=>a()},[]),D.useEffect(()=>{e!==void 0&&i.UserPermisions==="Admin"&&t("/Attendance")},[e,i]);const s=async a=>{a.preventDefault();const l=jN();try{await MB(l,kV)}catch(c){console.error("Error signing in with Google:",c)}},o=async()=>{try{await Sb.signOut()}catch(a){console.error("Error signing out:",a)}};return _.jsx(_.Fragment,{children:_.jsx("nav",{className:"navbar navbar-expand-lg bg-body-tertiary",children:_.jsxs("div",{className:"container-fluid",children:[_.jsx(Rn,{className:"navbar-brand",to:"/Home",children:_.jsx("img",{src:"/easyapps-Logo.png",alt:""})}),"          ",_.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:_.jsx("span",{className:"navbar-toggler-icon"})}),_.jsxs("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[_.jsx("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:e?_.jsxs(_.Fragment,{children:[_.jsx("li",{className:"nav-item",children:_.jsx(Rn,{className:"nav-link active","aria-current":"page",to:"/Attendance",children:"Asistencias"})}),_.jsx("li",{className:"nav-item",children:_.jsx(Rn,{className:"nav-link active","aria-current":"page",to:"/Dashboard",children:"Dashboard"})}),_.jsx("li",{className:"nav-item",children:_.jsx(Rn,{className:"nav-link active","aria-current":"page",to:"/Home",children:"Ayuda"})})]}):_.jsxs(_.Fragment,{children:[_.jsx("li",{className:"nav-item",children:_.jsx(Rn,{className:"nav-link active","aria-current":"page",to:"/Home",children:"Contacto"})}),_.jsx("li",{className:"nav-item",children:_.jsx(Rn,{className:"nav-link active","aria-current":"page",to:"/CampamentoJuvenil",children:"Campamento Juvenil"})}),_.jsx("li",{className:"nav-item",children:_.jsx(Rn,{className:"nav-link active","aria-current":"page",to:"/Home",children:"Acerca de Nosotros"})}),_.jsx("li",{className:"nav-item",children:_.jsx(Rn,{className:"nav-link active","aria-current":"page",to:"/Home",children:"Ayuda"})})]})}),_.jsx("form",{className:"d-flex",children:e?_.jsx(_.Fragment,{children:_.jsxs("button",{className:"btn btn-outline-danger",onClick:o,children:[" ",_.jsx("img",{src:e.photoURL,alt:""})," Cerrar Sesión "]})}):_.jsx("button",{className:"btn btn-outline-success",onClick:s,children:" Iniciar Sesión "})})]})]})})})},TV=()=>{const t=[],e=async n=>{const i="L&R Libres en Espiritu",r=t;console.log(r.length),n.preventDefault();try{await Promise.all(r.map(async s=>{await Mt.collection(`${i}`).add(s)})),console.log("Data imported successfully")}catch(s){console.error("Error importing data:",s)}};return _.jsx("button",{onClick:e,children:" Run de Carga "})},Eb=()=>{const[t,e]=D.useState(0),[n,i]=D.useState(0);return D.useEffect(()=>{Mt.collection("CampamentoJuvenil").get().then(s=>{const a=s.docs.filter(l=>l.data().EventoEstado!=="eliminado").length;i(a)}).catch(s=>{console.error("Error getting documents: ",s)})},[]),D.useEffect(()=>{Mt.collection("L&R Libres en Espiritu").get().then(s=>{const a=s.docs.filter(l=>l.data().EventoEstado!=="eliminado").length;e(a)}).catch(s=>{console.error("Error getting documents: ",s)})},[]),_.jsxs("div",{className:"container",children:[_.jsx("h1",{className:"text-center",children:"Seleccione Evento"}),_.jsxs("section",{className:"container text-center",children:[_.jsxs("div",{className:"card",style:{width:"18rem"},children:[_.jsx(Rn,{to:"/Forms",children:_.jsx("img",{src:"/img-lyr-sinlimites.jpeg",className:"card-img-top",alt:"Levántate y Resplandece - Sin Límites"})}),_.jsxs("div",{className:"card-body",children:[_.jsx("h5",{className:"card-title",children:"Levántate y Resplandece"}),_.jsxs("p",{className:"card-text",children:["Ya somos ",t," inscritos"]})]})]}),_.jsxs("div",{class:"card",style:{width:"18rem"},children:[_.jsx(Rn,{to:"/CampamentoJuvenil",children:_.jsx("img",{src:"/CampamentoJuvenil.jpeg",class:"card-img-top",alt:"Imagen-Contacto"})}),_.jsxs("div",{class:"card-body",children:[_.jsx("h5",{class:"card-title",children:"Campamento Juvenil"}),_.jsxs("p",{class:"card-text",children:["Ya somos ",n," inscritos"]})]})]})]})]})},CV=()=>_.jsxs("div",{className:"container",children:[_.jsx("h1",{children:"Dashboard"}),_.jsx(TV,{})]});let NV={data:""},AV=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||NV,DV=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,PV=/\/\*[^]*?\*\/|  +/g,kb=/\n+/g,Zi=(t,e)=>{let n="",i="",r="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":i+=s[1]=="f"?Zi(o,s):s+"{"+Zi(o,s[1]=="k"?"":e)+"}":typeof o=="object"?i+=Zi(o,e?e.replace(/([^,])+/g,a=>s.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Zi.p?Zi.p(s,o):s+":"+o+";")}return n+(e&&r?e+"{"+r+"}":r)+i},ni={},VN=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+VN(t[n]);return e}return t},MV=(t,e,n,i,r)=>{let s=VN(t),o=ni[s]||(ni[s]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(s));if(!ni[o]){let l=s!==t?t:(c=>{let u,h,d=[{}];for(;u=DV.exec(c.replace(PV,""));)u[4]?d.shift():u[3]?(h=u[3].replace(kb," ").trim(),d.unshift(d[0][h]=d[0][h]||{})):d[0][u[1]]=u[2].replace(kb," ").trim();return d[0]})(t);ni[o]=Zi(r?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&ni.g?ni.g:null;return n&&(ni.g=ni[o]),((l,c,u,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(ni[o],e,i,a),o},OV=(t,e,n)=>t.reduce((i,r,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Zi(a,""):a===!1?"":a}return i+r+(o??"")},"");function ep(t){let e=this||{},n=t.call?t(e.p):t;return MV(n.unshift?n.raw?OV(n,[].slice.call(arguments,1),e.p):n.reduce((i,r)=>Object.assign(i,r&&r.call?r(e.p):r),{}):n,AV(e.target),e.g,e.o,e.k)}let zN,Xm,Jm;ep.bind({g:1});let Di=ep.bind({k:1});function RV(t,e,n,i){Zi.p=e,zN=t,Xm=n,Jm=i}function qr(t,e){let n=this||{};return function(){let i=arguments;function r(s,o){let a=Object.assign({},s),l=a.className||r.className;n.p=Object.assign({theme:Xm&&Xm()},a),n.o=/ *go\d+/.test(l),a.className=ep.apply(n,i)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Jm&&c[0]&&Jm(a),zN(c,a)}return r}}var LV=t=>typeof t=="function",FV=(t,e)=>LV(t)?t(e):t,$V=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),jV=Di`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,BV=Di`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,VV=Di`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zV=qr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${BV} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${VV} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,UV=Di`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,WV=qr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${UV} 1s linear infinite;
`,HV=Di`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qV=Di`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,KV=qr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${HV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qV} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,GV=qr("div")`
  position: absolute;
`,QV=qr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,YV=Di`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,XV=qr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${YV} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,JV=({toast:t})=>{let{icon:e,type:n,iconTheme:i}=t;return e!==void 0?typeof e=="string"?D.createElement(XV,null,e):e:n==="blank"?null:D.createElement(QV,null,D.createElement(WV,{...i}),n!=="loading"&&D.createElement(GV,null,n==="error"?D.createElement(zV,{...i}):D.createElement(KV,{...i})))},ZV=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ez=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,tz="0%{opacity:0;} 100%{opacity:1;}",nz="0%{opacity:1;} 100%{opacity:0;}",iz=qr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,rz=qr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,sz=(t,e)=>{let n=t.includes("top")?1:-1,[i,r]=$V()?[tz,nz]:[ZV(n),ez(n)];return{animation:e?`${Di(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Di(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};D.memo(({toast:t,position:e,style:n,children:i})=>{let r=t.height?sz(t.position||e||"top-center",t.visible):{opacity:0},s=D.createElement(JV,{toast:t}),o=D.createElement(rz,{...t.ariaProps},FV(t.message,t));return D.createElement(iz,{className:t.className,style:{...r,...n,...t.style}},typeof i=="function"?i({icon:s,message:o}):D.createElement(D.Fragment,null,s,o))});RV(D.createElement);ep`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var UN={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(GA,function(){return function(n){function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var r={};return i.m=n,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=8)}([function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s="swal-button";i.CLASS_NAMES={MODAL:"swal-modal",OVERLAY:"swal-overlay",SHOW_MODAL:"swal-overlay--show-modal",MODAL_TITLE:"swal-title",MODAL_TEXT:"swal-text",ICON:"swal-icon",ICON_CUSTOM:"swal-icon--custom",CONTENT:"swal-content",FOOTER:"swal-footer",BUTTON_CONTAINER:"swal-button-container",BUTTON:s,CONFIRM_BUTTON:s+"--confirm",CANCEL_BUTTON:s+"--cancel",DANGER_BUTTON:s+"--danger",BUTTON_LOADING:s+"--loading",BUTTON_LOADER:s+"__loader"},i.default=i.CLASS_NAMES},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.getNode=function(s){var o="."+s;return document.querySelector(o)},i.stringToNode=function(s){var o=document.createElement("div");return o.innerHTML=s.trim(),o.firstChild},i.insertAfter=function(s,o){var a=o.nextSibling;o.parentNode.insertBefore(s,a)},i.removeNode=function(s){s.parentElement.removeChild(s)},i.throwErr=function(s){throw s=s.replace(/ +(?= )/g,""),"SweetAlert: "+(s=s.trim())},i.isPlainObject=function(s){if(Object.prototype.toString.call(s)!=="[object Object]")return!1;var o=Object.getPrototypeOf(s);return o===null||o===Object.prototype},i.ordinalSuffixOf=function(s){var o=s%10,a=s%100;return o===1&&a!==11?s+"st":o===2&&a!==12?s+"nd":o===3&&a!==13?s+"rd":s+"th"}},function(n,i,r){function s(d){for(var f in d)i.hasOwnProperty(f)||(i[f]=d[f])}Object.defineProperty(i,"__esModule",{value:!0}),s(r(25));var o=r(26);i.overlayMarkup=o.default,s(r(27)),s(r(28)),s(r(29));var a=r(0),l=a.default.MODAL_TITLE,c=a.default.MODAL_TEXT,u=a.default.ICON,h=a.default.FOOTER;i.iconMarkup=`
  <div class="`+u+'"></div>',i.titleMarkup=`
  <div class="`+l+`"></div>
`,i.textMarkup=`
  <div class="`+c+'"></div>',i.footerMarkup=`
  <div class="`+h+`"></div>
`},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1);i.CONFIRM_KEY="confirm",i.CANCEL_KEY="cancel";var o={visible:!0,text:null,value:null,className:"",closeModal:!0},a=Object.assign({},o,{visible:!1,text:"Cancel",value:null}),l=Object.assign({},o,{text:"OK",value:!0});i.defaultButtonList={cancel:a,confirm:l};var c=function(f){switch(f){case i.CONFIRM_KEY:return l;case i.CANCEL_KEY:return a;default:var g=f.charAt(0).toUpperCase()+f.slice(1);return Object.assign({},o,{text:g,value:f})}},u=function(f,g){var y=c(f);return g===!0?Object.assign({},y,{visible:!0}):typeof g=="string"?Object.assign({},y,{visible:!0,text:g}):s.isPlainObject(g)?Object.assign({visible:!0},y,g):Object.assign({},y,{visible:!1})},h=function(f){for(var g={},y=0,w=Object.keys(f);y<w.length;y++){var p=w[y],m=f[p],v=u(p,m);g[p]=v}return g.cancel||(g.cancel=a),g},d=function(f){var g={};switch(f.length){case 1:g[i.CANCEL_KEY]=Object.assign({},a,{visible:!1});break;case 2:g[i.CANCEL_KEY]=u(i.CANCEL_KEY,f[0]),g[i.CONFIRM_KEY]=u(i.CONFIRM_KEY,f[1]);break;default:s.throwErr("Invalid number of 'buttons' in array ("+f.length+`).
      If you want more than 2 buttons, you need to use an object!`)}return g};i.getButtonListOpts=function(f){var g=i.defaultButtonList;return typeof f=="string"?g[i.CONFIRM_KEY]=u(i.CONFIRM_KEY,f):Array.isArray(f)?g=d(f):s.isPlainObject(f)?g=h(f):f===!0?g=d([!0,!0]):f===!1?g=d([!1,!1]):f===void 0&&(g=i.defaultButtonList),g}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1),o=r(2),a=r(0),l=a.default.MODAL,c=a.default.OVERLAY,u=r(30),h=r(31),d=r(32),f=r(33);i.injectElIntoModal=function(p){var m=s.getNode(l),v=s.stringToNode(p);return m.appendChild(v),v};var g=function(p){p.className=l,p.textContent=""},y=function(p,m){g(p);var v=m.className;v&&p.classList.add(v)};i.initModalContent=function(p){var m=s.getNode(l);y(m,p),u.default(p.icon),h.initTitle(p.title),h.initText(p.text),f.default(p.content),d.default(p.buttons,p.dangerMode)};var w=function(){var p=s.getNode(c),m=s.stringToNode(o.modalMarkup);p.appendChild(m)};i.default=w},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(3),o={isOpen:!1,promise:null,actions:{},timer:null},a=Object.assign({},o);i.resetState=function(){a=Object.assign({},o)},i.setActionValue=function(c){if(typeof c=="string")return l(s.CONFIRM_KEY,c);for(var u in c)l(u,c[u])};var l=function(c,u){a.actions[c]||(a.actions[c]={}),Object.assign(a.actions[c],{value:u})};i.setActionOptionsFor=function(c,u){var h=(u===void 0?{}:u).closeModal,d=h===void 0||h;Object.assign(a.actions[c],{closeModal:d})},i.default=a},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1),o=r(3),a=r(0),l=a.default.OVERLAY,c=a.default.SHOW_MODAL,u=a.default.BUTTON,h=a.default.BUTTON_LOADING,d=r(5);i.openModal=function(){s.getNode(l).classList.add(c),d.default.isOpen=!0};var f=function(){s.getNode(l).classList.remove(c),d.default.isOpen=!1};i.onAction=function(g){g===void 0&&(g=o.CANCEL_KEY);var y=d.default.actions[g],w=y.value;if(y.closeModal===!1){var p=u+"--"+g;s.getNode(p).classList.add(h)}else f();d.default.promise.resolve(w)},i.getState=function(){var g=Object.assign({},d.default);return delete g.promise,delete g.timer,g},i.stopLoading=function(){for(var g=document.querySelectorAll("."+u),y=0;y<g.length;y++)g[y].classList.remove(h)}},function(n,i){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,i,r){(function(s){n.exports=s.sweetAlert=r(9)}).call(i,r(7))},function(n,i,r){(function(s){n.exports=s.swal=r(10)}).call(i,r(7))},function(n,i,r){typeof window<"u"&&r(11),r(16);var s=r(23).default;n.exports=s},function(n,i,r){var s=r(12);typeof s=="string"&&(s=[[n.i,s,""]]);var o={insertAt:"top"};o.transform=void 0,r(14)(s,o),s.locals&&(n.exports=s.locals)},function(n,i,r){i=n.exports=r(13)(void 0),i.push([n.i,'.swal-icon--error{border-color:#f27474;-webkit-animation:animateErrorIcon .5s;animation:animateErrorIcon .5s}.swal-icon--error__x-mark{position:relative;display:block;-webkit-animation:animateXMark .5s;animation:animateXMark .5s}.swal-icon--error__line{position:absolute;height:5px;width:47px;background-color:#f27474;display:block;top:37px;border-radius:2px}.swal-icon--error__line--left{-webkit-transform:rotate(45deg);transform:rotate(45deg);left:17px}.swal-icon--error__line--right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:16px}@-webkit-keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@-webkit-keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}@keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}.swal-icon--warning{border-color:#f8bb86;-webkit-animation:pulseWarning .75s infinite alternate;animation:pulseWarning .75s infinite alternate}.swal-icon--warning__body{width:5px;height:47px;top:10px;border-radius:2px;margin-left:-2px}.swal-icon--warning__body,.swal-icon--warning__dot{position:absolute;left:50%;background-color:#f8bb86}.swal-icon--warning__dot{width:7px;height:7px;border-radius:50%;margin-left:-4px;bottom:-11px}@-webkit-keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}@keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}.swal-icon--success{border-color:#a5dc86}.swal-icon--success:after,.swal-icon--success:before{content:"";border-radius:50%;position:absolute;width:60px;height:120px;background:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal-icon--success:before{border-radius:120px 0 0 120px;top:-7px;left:-33px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:60px 60px;transform-origin:60px 60px}.swal-icon--success:after{border-radius:0 120px 120px 0;top:-11px;left:30px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 60px;transform-origin:0 60px;-webkit-animation:rotatePlaceholder 4.25s ease-in;animation:rotatePlaceholder 4.25s ease-in}.swal-icon--success__ring{width:80px;height:80px;border:4px solid hsla(98,55%,69%,.2);border-radius:50%;box-sizing:content-box;position:absolute;left:-4px;top:-4px;z-index:2}.swal-icon--success__hide-corners{width:5px;height:90px;background-color:#fff;padding:1px;position:absolute;left:28px;top:8px;z-index:1;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal-icon--success__line{height:5px;background-color:#a5dc86;display:block;border-radius:2px;position:absolute;z-index:2}.swal-icon--success__line--tip{width:25px;left:14px;top:46px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-animation:animateSuccessTip .75s;animation:animateSuccessTip .75s}.swal-icon--success__line--long{width:47px;right:8px;top:38px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-animation:animateSuccessLong .75s;animation:animateSuccessLong .75s}@-webkit-keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@-webkit-keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}@keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}.swal-icon--info{border-color:#c9dae1}.swal-icon--info:before{width:5px;height:29px;bottom:17px;border-radius:2px;margin-left:-2px}.swal-icon--info:after,.swal-icon--info:before{content:"";position:absolute;left:50%;background-color:#c9dae1}.swal-icon--info:after{width:7px;height:7px;border-radius:50%;margin-left:-3px;top:19px}.swal-icon{width:80px;height:80px;border-width:4px;border-style:solid;border-radius:50%;padding:0;position:relative;box-sizing:content-box;margin:20px auto}.swal-icon:first-child{margin-top:32px}.swal-icon--custom{width:auto;height:auto;max-width:100%;border:none;border-radius:0}.swal-icon img{max-width:100%;max-height:100%}.swal-title{color:rgba(0,0,0,.65);font-weight:600;text-transform:none;position:relative;display:block;padding:13px 16px;font-size:27px;line-height:normal;text-align:center;margin-bottom:0}.swal-title:first-child{margin-top:26px}.swal-title:not(:first-child){padding-bottom:0}.swal-title:not(:last-child){margin-bottom:13px}.swal-text{font-size:16px;position:relative;float:none;line-height:normal;vertical-align:top;text-align:left;display:inline-block;margin:0;padding:0 10px;font-weight:400;color:rgba(0,0,0,.64);max-width:calc(100% - 20px);overflow-wrap:break-word;box-sizing:border-box}.swal-text:first-child{margin-top:45px}.swal-text:last-child{margin-bottom:45px}.swal-footer{text-align:right;padding-top:13px;margin-top:13px;padding:13px 16px;border-radius:inherit;border-top-left-radius:0;border-top-right-radius:0}.swal-button-container{margin:5px;display:inline-block;position:relative}.swal-button{background-color:#7cd1f9;color:#fff;border:none;box-shadow:none;border-radius:5px;font-weight:600;font-size:14px;padding:10px 24px;margin:0;cursor:pointer}.swal-button:not([disabled]):hover{background-color:#78cbf2}.swal-button:active{background-color:#70bce0}.swal-button:focus{outline:none;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(43,114,165,.29)}.swal-button[disabled]{opacity:.5;cursor:default}.swal-button::-moz-focus-inner{border:0}.swal-button--cancel{color:#555;background-color:#efefef}.swal-button--cancel:not([disabled]):hover{background-color:#e8e8e8}.swal-button--cancel:active{background-color:#d7d7d7}.swal-button--cancel:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(116,136,150,.29)}.swal-button--danger{background-color:#e64942}.swal-button--danger:not([disabled]):hover{background-color:#df4740}.swal-button--danger:active{background-color:#cf423b}.swal-button--danger:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(165,43,43,.29)}.swal-content{padding:0 20px;margin-top:20px;font-size:medium}.swal-content:last-child{margin-bottom:20px}.swal-content__input,.swal-content__textarea{-webkit-appearance:none;background-color:#fff;border:none;font-size:14px;display:block;box-sizing:border-box;width:100%;border:1px solid rgba(0,0,0,.14);padding:10px 13px;border-radius:2px;transition:border-color .2s}.swal-content__input:focus,.swal-content__textarea:focus{outline:none;border-color:#6db8ff}.swal-content__textarea{resize:vertical}.swal-button--loading{color:transparent}.swal-button--loading~.swal-button__loader{opacity:1}.swal-button__loader{position:absolute;height:auto;width:43px;z-index:2;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);text-align:center;pointer-events:none;opacity:0}.swal-button__loader div{display:inline-block;float:none;vertical-align:baseline;width:9px;height:9px;padding:0;border:none;margin:2px;opacity:.4;border-radius:7px;background-color:hsla(0,0%,100%,.9);transition:background .2s;-webkit-animation:swal-loading-anim 1s infinite;animation:swal-loading-anim 1s infinite}.swal-button__loader div:nth-child(3n+2){-webkit-animation-delay:.15s;animation-delay:.15s}.swal-button__loader div:nth-child(3n+3){-webkit-animation-delay:.3s;animation-delay:.3s}@-webkit-keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}@keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}.swal-overlay{position:fixed;top:0;bottom:0;left:0;right:0;text-align:center;font-size:0;overflow-y:auto;background-color:rgba(0,0,0,.4);z-index:10000;pointer-events:none;opacity:0;transition:opacity .3s}.swal-overlay:before{content:" ";display:inline-block;vertical-align:middle;height:100%}.swal-overlay--show-modal{opacity:1;pointer-events:auto}.swal-overlay--show-modal .swal-modal{opacity:1;pointer-events:auto;box-sizing:border-box;-webkit-animation:showSweetAlert .3s;animation:showSweetAlert .3s;will-change:transform}.swal-modal{width:478px;opacity:0;pointer-events:none;background-color:#fff;text-align:center;border-radius:5px;position:static;margin:20px auto;display:inline-block;vertical-align:middle;-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;z-index:10001;transition:opacity .2s,-webkit-transform .3s;transition:transform .3s,opacity .2s;transition:transform .3s,opacity .2s,-webkit-transform .3s}@media (max-width:500px){.swal-modal{width:calc(100% - 20px)}}@-webkit-keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}',""])},function(n,i){function r(o,a){var l=o[1]||"",c=o[3];if(!c)return l;if(a&&typeof btoa=="function"){var u=s(c);return[l].concat(c.sources.map(function(h){return"/*# sourceURL="+c.sourceRoot+h+" */"})).concat([u]).join(`
`)}return[l].join(`
`)}function s(o){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"}n.exports=function(o){var a=[];return a.toString=function(){return this.map(function(l){var c=r(l,o);return l[2]?"@media "+l[2]+"{"+c+"}":c}).join("")},a.i=function(l,c){typeof l=="string"&&(l=[[null,l,""]]);for(var u={},h=0;h<this.length;h++){var d=this[h][0];typeof d=="number"&&(u[d]=!0)}for(h=0;h<l.length;h++){var f=l[h];typeof f[0]=="number"&&u[f[0]]||(c&&!f[2]?f[2]=c:c&&(f[2]="("+f[2]+") and ("+c+")"),a.push(f))}},a}},function(n,i,r){function s(S,I){for(var N=0;N<S.length;N++){var A=S[N],$=w[A.id];if($){$.refs++;for(var U=0;U<$.parts.length;U++)$.parts[U](A.parts[U]);for(;U<A.parts.length;U++)$.parts.push(d(A.parts[U],I))}else{for(var ee=[],U=0;U<A.parts.length;U++)ee.push(d(A.parts[U],I));w[A.id]={id:A.id,refs:1,parts:ee}}}}function o(S,I){for(var N=[],A={},$=0;$<S.length;$++){var U=S[$],ee=I.base?U[0]+I.base:U[0],K=U[1],se=U[2],ge=U[3],L={css:K,media:se,sourceMap:ge};A[ee]?A[ee].parts.push(L):N.push(A[ee]={id:ee,parts:[L]})}return N}function a(S,I){var N=m(S.insertInto);if(!N)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var A=b[b.length-1];if(S.insertAt==="top")A?A.nextSibling?N.insertBefore(I,A.nextSibling):N.appendChild(I):N.insertBefore(I,N.firstChild),b.push(I);else{if(S.insertAt!=="bottom")throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");N.appendChild(I)}}function l(S){if(S.parentNode===null)return!1;S.parentNode.removeChild(S);var I=b.indexOf(S);I>=0&&b.splice(I,1)}function c(S){var I=document.createElement("style");return S.attrs.type="text/css",h(I,S.attrs),a(S,I),I}function u(S){var I=document.createElement("link");return S.attrs.type="text/css",S.attrs.rel="stylesheet",h(I,S.attrs),a(S,I),I}function h(S,I){Object.keys(I).forEach(function(N){S.setAttribute(N,I[N])})}function d(S,I){var N,A,$,U;if(I.transform&&S.css){if(!(U=I.transform(S.css)))return function(){};S.css=U}if(I.singleton){var ee=x++;N=v||(v=c(I)),A=f.bind(null,N,ee,!1),$=f.bind(null,N,ee,!0)}else S.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(N=u(I),A=y.bind(null,N,I),$=function(){l(N),N.href&&URL.revokeObjectURL(N.href)}):(N=c(I),A=g.bind(null,N),$=function(){l(N)});return A(S),function(K){if(K){if(K.css===S.css&&K.media===S.media&&K.sourceMap===S.sourceMap)return;A(S=K)}else $()}}function f(S,I,N,A){var $=N?"":A.css;if(S.styleSheet)S.styleSheet.cssText=k(I,$);else{var U=document.createTextNode($),ee=S.childNodes;ee[I]&&S.removeChild(ee[I]),ee.length?S.insertBefore(U,ee[I]):S.appendChild(U)}}function g(S,I){var N=I.css,A=I.media;if(A&&S.setAttribute("media",A),S.styleSheet)S.styleSheet.cssText=N;else{for(;S.firstChild;)S.removeChild(S.firstChild);S.appendChild(document.createTextNode(N))}}function y(S,I,N){var A=N.css,$=N.sourceMap,U=I.convertToAbsoluteUrls===void 0&&$;(I.convertToAbsoluteUrls||U)&&(A=E(A)),$&&(A+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify($))))+" */");var ee=new Blob([A],{type:"text/css"}),K=S.href;S.href=URL.createObjectURL(ee),K&&URL.revokeObjectURL(K)}var w={},p=function(S){var I;return function(){return I===void 0&&(I=S.apply(this,arguments)),I}}(function(){return window&&document&&document.all&&!window.atob}),m=function(S){var I={};return function(N){return I[N]===void 0&&(I[N]=S.call(this,N)),I[N]}}(function(S){return document.querySelector(S)}),v=null,x=0,b=[],E=r(15);n.exports=function(S,I){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");I=I||{},I.attrs=typeof I.attrs=="object"?I.attrs:{},I.singleton||(I.singleton=p()),I.insertInto||(I.insertInto="head"),I.insertAt||(I.insertAt="bottom");var N=o(S,I);return s(N,I),function(A){for(var $=[],U=0;U<N.length;U++){var ee=N[U],K=w[ee.id];K.refs--,$.push(K)}A&&s(o(A,I),I);for(var U=0;U<$.length;U++){var K=$[U];if(K.refs===0){for(var se=0;se<K.parts.length;se++)K.parts[se]();delete w[K.id]}}}};var k=function(){var S=[];return function(I,N){return S[I]=N,S.filter(Boolean).join(`
`)}}()},function(n,i){n.exports=function(r){var s=typeof window<"u"&&window.location;if(!s)throw new Error("fixUrls requires window.location");if(!r||typeof r!="string")return r;var o=s.protocol+"//"+s.host,a=o+s.pathname.replace(/\/[^\/]*$/,"/");return r.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(l,c){var u=c.trim().replace(/^"(.*)"$/,function(d,f){return f}).replace(/^'(.*)'$/,function(d,f){return f});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(u))return l;var h;return h=u.indexOf("//")===0?u:u.indexOf("/")===0?o+u:a+u.replace(/^\.\//,""),"url("+JSON.stringify(h)+")"})}},function(n,i,r){var s=r(17);typeof window>"u"||window.Promise||(window.Promise=s),r(21),String.prototype.includes||(String.prototype.includes=function(o,a){return typeof a!="number"&&(a=0),!(a+o.length>this.length)&&this.indexOf(o,a)!==-1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(o,a){if(this==null)throw new TypeError('"this" is null or not defined');var l=Object(this),c=l.length>>>0;if(c===0)return!1;for(var u=0|a,h=Math.max(u>=0?u:c-Math.abs(u),0);h<c;){if(function(d,f){return d===f||typeof d=="number"&&typeof f=="number"&&isNaN(d)&&isNaN(f)}(l[h],o))return!0;h++}return!1}}),typeof window<"u"&&function(o){o.forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype])},function(n,i,r){(function(s){(function(o){function a(){}function l(p,m){return function(){p.apply(m,arguments)}}function c(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof p!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(p,this)}function u(p,m){for(;p._state===3;)p=p._value;if(p._state===0)return void p._deferreds.push(m);p._handled=!0,c._immediateFn(function(){var v=p._state===1?m.onFulfilled:m.onRejected;if(v===null)return void(p._state===1?h:d)(m.promise,p._value);var x;try{x=v(p._value)}catch(b){return void d(m.promise,b)}h(m.promise,x)})}function h(p,m){try{if(m===p)throw new TypeError("A promise cannot be resolved with itself.");if(m&&(typeof m=="object"||typeof m=="function")){var v=m.then;if(m instanceof c)return p._state=3,p._value=m,void f(p);if(typeof v=="function")return void y(l(v,m),p)}p._state=1,p._value=m,f(p)}catch(x){d(p,x)}}function d(p,m){p._state=2,p._value=m,f(p)}function f(p){p._state===2&&p._deferreds.length===0&&c._immediateFn(function(){p._handled||c._unhandledRejectionFn(p._value)});for(var m=0,v=p._deferreds.length;m<v;m++)u(p,p._deferreds[m]);p._deferreds=null}function g(p,m,v){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof m=="function"?m:null,this.promise=v}function y(p,m){var v=!1;try{p(function(x){v||(v=!0,h(m,x))},function(x){v||(v=!0,d(m,x))})}catch(x){if(v)return;v=!0,d(m,x)}}var w=setTimeout;c.prototype.catch=function(p){return this.then(null,p)},c.prototype.then=function(p,m){var v=new this.constructor(a);return u(this,new g(p,m,v)),v},c.all=function(p){var m=Array.prototype.slice.call(p);return new c(function(v,x){function b(S,I){try{if(I&&(typeof I=="object"||typeof I=="function")){var N=I.then;if(typeof N=="function")return void N.call(I,function(A){b(S,A)},x)}m[S]=I,--E==0&&v(m)}catch(A){x(A)}}if(m.length===0)return v([]);for(var E=m.length,k=0;k<m.length;k++)b(k,m[k])})},c.resolve=function(p){return p&&typeof p=="object"&&p.constructor===c?p:new c(function(m){m(p)})},c.reject=function(p){return new c(function(m,v){v(p)})},c.race=function(p){return new c(function(m,v){for(var x=0,b=p.length;x<b;x++)p[x].then(m,v)})},c._immediateFn=typeof s=="function"&&function(p){s(p)}||function(p){w(p,0)},c._unhandledRejectionFn=function(p){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",p)},c._setImmediateFn=function(p){c._immediateFn=p},c._setUnhandledRejectionFn=function(p){c._unhandledRejectionFn=p},n!==void 0&&n.exports?n.exports=c:o.Promise||(o.Promise=c)})(this)}).call(i,r(18).setImmediate)},function(n,i,r){function s(a,l){this._id=a,this._clearFn=l}var o=Function.prototype.apply;i.setTimeout=function(){return new s(o.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new s(o.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(a){a&&a.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(a,l){clearTimeout(a._idleTimeoutId),a._idleTimeout=l},i.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},i._unrefActive=i.active=function(a){clearTimeout(a._idleTimeoutId);var l=a._idleTimeout;l>=0&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},l))},r(19),i.setImmediate=setImmediate,i.clearImmediate=clearImmediate},function(n,i,r){(function(s,o){(function(a,l){function c(v){typeof v!="function"&&(v=new Function(""+v));for(var x=new Array(arguments.length-1),b=0;b<x.length;b++)x[b]=arguments[b+1];var E={callback:v,args:x};return y[g]=E,f(g),g++}function u(v){delete y[v]}function h(v){var x=v.callback,b=v.args;switch(b.length){case 0:x();break;case 1:x(b[0]);break;case 2:x(b[0],b[1]);break;case 3:x(b[0],b[1],b[2]);break;default:x.apply(l,b)}}function d(v){if(w)setTimeout(d,0,v);else{var x=y[v];if(x){w=!0;try{h(x)}finally{u(v),w=!1}}}}if(!a.setImmediate){var f,g=1,y={},w=!1,p=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,{}.toString.call(a.process)==="[object process]"?function(){f=function(v){o.nextTick(function(){d(v)})}}():function(){if(a.postMessage&&!a.importScripts){var v=!0,x=a.onmessage;return a.onmessage=function(){v=!1},a.postMessage("","*"),a.onmessage=x,v}}()?function(){var v="setImmediate$"+Math.random()+"$",x=function(b){b.source===a&&typeof b.data=="string"&&b.data.indexOf(v)===0&&d(+b.data.slice(v.length))};a.addEventListener?a.addEventListener("message",x,!1):a.attachEvent("onmessage",x),f=function(b){a.postMessage(v+b,"*")}}():a.MessageChannel?function(){var v=new MessageChannel;v.port1.onmessage=function(x){d(x.data)},f=function(x){v.port2.postMessage(x)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var v=p.documentElement;f=function(x){var b=p.createElement("script");b.onreadystatechange=function(){d(x),b.onreadystatechange=null,v.removeChild(b),b=null},v.appendChild(b)}}():function(){f=function(v){setTimeout(d,0,v)}}(),m.setImmediate=c,m.clearImmediate=u}})(typeof self>"u"?s===void 0?this:s:self)}).call(i,r(7),r(20))},function(n,i){function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(v){if(d===setTimeout)return setTimeout(v,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(v,0);try{return d(v,0)}catch{try{return d.call(null,v,0)}catch{return d.call(this,v,0)}}}function a(v){if(f===clearTimeout)return clearTimeout(v);if((f===s||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(v);try{return f(v)}catch{try{return f.call(null,v)}catch{return f.call(this,v)}}}function l(){p&&y&&(p=!1,y.length?w=y.concat(w):m=-1,w.length&&c())}function c(){if(!p){var v=o(l);p=!0;for(var x=w.length;x;){for(y=w,w=[];++m<x;)y&&y[m].run();m=-1,x=w.length}y=null,p=!1,a(v)}}function u(v,x){this.fun=v,this.array=x}function h(){}var d,f,g=n.exports={};(function(){try{d=typeof setTimeout=="function"?setTimeout:r}catch{d=r}try{f=typeof clearTimeout=="function"?clearTimeout:s}catch{f=s}})();var y,w=[],p=!1,m=-1;g.nextTick=function(v){var x=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)x[b-1]=arguments[b];w.push(new u(v,x)),w.length!==1||p||o(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=h,g.addListener=h,g.once=h,g.off=h,g.removeListener=h,g.removeAllListeners=h,g.emit=h,g.prependListener=h,g.prependOnceListener=h,g.listeners=function(v){return[]},g.binding=function(v){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(v){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},function(n,i,r){r(22).polyfill()},function(n,i,r){function s(a,l){if(a==null)throw new TypeError("Cannot convert first argument to object");for(var c=Object(a),u=1;u<arguments.length;u++){var h=arguments[u];if(h!=null)for(var d=Object.keys(Object(h)),f=0,g=d.length;f<g;f++){var y=d[f],w=Object.getOwnPropertyDescriptor(h,y);w!==void 0&&w.enumerable&&(c[y]=h[y])}}return c}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:s})}n.exports={assign:s,polyfill:o}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(24),o=r(6),a=r(5),l=r(36),c=function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];if(typeof window<"u"){var d=l.getOpts.apply(void 0,u);return new Promise(function(f,g){a.default.promise={resolve:f,reject:g},s.default(d),setTimeout(function(){o.openModal()})})}};c.close=o.onAction,c.getState=o.getState,c.setActionValue=a.setActionValue,c.stopLoading=o.stopLoading,c.setDefaults=l.setDefaults,i.default=c},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1),o=r(0),a=o.default.MODAL,l=r(4),c=r(34),u=r(35),h=r(1);i.init=function(d){s.getNode(a)||(document.body||h.throwErr("You can only use SweetAlert AFTER the DOM has loaded!"),c.default(),l.default()),l.initModalContent(d),u.default(d)},i.default=i.init},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),o=s.default.MODAL;i.modalMarkup=`
  <div class="`+o+'" role="dialog" aria-modal="true"></div>',i.default=i.modalMarkup},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),o=s.default.OVERLAY,a=`<div 
    class="`+o+`"
    tabIndex="-1">
  </div>`;i.default=a},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),o=s.default.ICON;i.errorIconMarkup=function(){var a=o+"--error",l=a+"__line";return`
    <div class="`+a+`__x-mark">
      <span class="`+l+" "+l+`--left"></span>
      <span class="`+l+" "+l+`--right"></span>
    </div>
  `},i.warningIconMarkup=function(){var a=o+"--warning";return`
    <span class="`+a+`__body">
      <span class="`+a+`__dot"></span>
    </span>
  `},i.successIconMarkup=function(){var a=o+"--success";return`
    <span class="`+a+"__line "+a+`__line--long"></span>
    <span class="`+a+"__line "+a+`__line--tip"></span>

    <div class="`+a+`__ring"></div>
    <div class="`+a+`__hide-corners"></div>
  `}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),o=s.default.CONTENT;i.contentMarkup=`
  <div class="`+o+`">

  </div>
`},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(0),o=s.default.BUTTON_CONTAINER,a=s.default.BUTTON,l=s.default.BUTTON_LOADER;i.buttonMarkup=`
  <div class="`+o+`">

    <button
      class="`+a+`"
    ></button>

    <div class="`+l+`">
      <div></div>
      <div></div>
      <div></div>
    </div>

  </div>
`},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(4),o=r(2),a=r(0),l=a.default.ICON,c=a.default.ICON_CUSTOM,u=["error","warning","success","info"],h={error:o.errorIconMarkup(),warning:o.warningIconMarkup(),success:o.successIconMarkup()},d=function(y,w){var p=l+"--"+y;w.classList.add(p);var m=h[y];m&&(w.innerHTML=m)},f=function(y,w){w.classList.add(c);var p=document.createElement("img");p.src=y,w.appendChild(p)},g=function(y){if(y){var w=s.injectElIntoModal(o.iconMarkup);u.includes(y)?d(y,w):f(y,w)}};i.default=g},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(2),o=r(4),a=function(l){navigator.userAgent.includes("AppleWebKit")&&(l.style.display="none",l.offsetHeight,l.style.display="")};i.initTitle=function(l){if(l){var c=o.injectElIntoModal(s.titleMarkup);c.textContent=l,a(c)}},i.initText=function(l){if(l){var c=document.createDocumentFragment();l.split(`
`).forEach(function(h,d,f){c.appendChild(document.createTextNode(h)),d<f.length-1&&c.appendChild(document.createElement("br"))});var u=o.injectElIntoModal(s.textMarkup);u.appendChild(c),a(u)}}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1),o=r(4),a=r(0),l=a.default.BUTTON,c=a.default.DANGER_BUTTON,u=r(3),h=r(2),d=r(6),f=r(5),g=function(w,p,m){var v=p.text,x=p.value,b=p.className,E=p.closeModal,k=s.stringToNode(h.buttonMarkup),S=k.querySelector("."+l),I=l+"--"+w;S.classList.add(I),b&&(Array.isArray(b)?b:b.split(" ")).filter(function(A){return A.length>0}).forEach(function(A){S.classList.add(A)}),m&&w===u.CONFIRM_KEY&&S.classList.add(c),S.textContent=v;var N={};return N[w]=x,f.setActionValue(N),f.setActionOptionsFor(w,{closeModal:E}),S.addEventListener("click",function(){return d.onAction(w)}),k},y=function(w,p){var m=o.injectElIntoModal(h.footerMarkup);for(var v in w){var x=w[v],b=g(v,x,p);x.visible&&m.appendChild(b)}m.children.length===0&&m.remove()};i.default=y},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(3),o=r(4),a=r(2),l=r(5),c=r(6),u=r(0),h=u.default.CONTENT,d=function(y){y.addEventListener("input",function(w){var p=w.target,m=p.value;l.setActionValue(m)}),y.addEventListener("keyup",function(w){if(w.key==="Enter")return c.onAction(s.CONFIRM_KEY)}),setTimeout(function(){y.focus(),l.setActionValue("")},0)},f=function(y,w,p){var m=document.createElement(w),v=h+"__"+w;m.classList.add(v);for(var x in p){var b=p[x];m[x]=b}w==="input"&&d(m),y.appendChild(m)},g=function(y){if(y){var w=o.injectElIntoModal(a.contentMarkup),p=y.element,m=y.attributes;typeof p=="string"?f(w,p,m):w.appendChild(p)}};i.default=g},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1),o=r(2),a=function(){var l=s.stringToNode(o.overlayMarkup);document.body.appendChild(l)};i.default=a},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(5),o=r(6),a=r(1),l=r(3),c=r(0),u=c.default.MODAL,h=c.default.BUTTON,d=c.default.OVERLAY,f=function(A){A.preventDefault(),m()},g=function(A){A.preventDefault(),v()},y=function(A){if(s.default.isOpen)switch(A.key){case"Escape":return o.onAction(l.CANCEL_KEY)}},w=function(A){if(s.default.isOpen)switch(A.key){case"Tab":return f(A)}},p=function(A){if(s.default.isOpen)return A.key==="Tab"&&A.shiftKey?g(A):void 0},m=function(){var A=a.getNode(h);A&&(A.tabIndex=0,A.focus())},v=function(){var A=a.getNode(u),$=A.querySelectorAll("."+h),U=$.length-1,ee=$[U];ee&&ee.focus()},x=function(A){A[A.length-1].addEventListener("keydown",w)},b=function(A){A[0].addEventListener("keydown",p)},E=function(){var A=a.getNode(u),$=A.querySelectorAll("."+h);$.length&&(x($),b($))},k=function(A){if(a.getNode(d)===A.target)return o.onAction(l.CANCEL_KEY)},S=function(A){var $=a.getNode(d);$.removeEventListener("click",k),A&&$.addEventListener("click",k)},I=function(A){s.default.timer&&clearTimeout(s.default.timer),A&&(s.default.timer=window.setTimeout(function(){return o.onAction(l.CANCEL_KEY)},A))},N=function(A){A.closeOnEsc?document.addEventListener("keyup",y):document.removeEventListener("keyup",y),A.dangerMode?m():v(),E(),S(A.closeOnClickOutside),I(A.timer)};i.default=N},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1),o=r(3),a=r(37),l=r(38),c={title:null,text:null,icon:null,buttons:o.defaultButtonList,content:null,className:null,closeOnClickOutside:!0,closeOnEsc:!0,dangerMode:!1,timer:null},u=Object.assign({},c);i.setDefaults=function(p){u=Object.assign({},c,p)};var h=function(p){var m=p&&p.button,v=p&&p.buttons;return m!==void 0&&v!==void 0&&s.throwErr("Cannot set both 'button' and 'buttons' options!"),m!==void 0?{confirm:m}:v},d=function(p){return s.ordinalSuffixOf(p+1)},f=function(p,m){s.throwErr(d(m)+" argument ('"+p+"') is invalid")},g=function(p,m){var v=p+1,x=m[v];s.isPlainObject(x)||x===void 0||s.throwErr("Expected "+d(v)+" argument ('"+x+"') to be a plain object")},y=function(p,m){var v=p+1,x=m[v];x!==void 0&&s.throwErr("Unexpected "+d(v)+" argument ("+x+")")},w=function(p,m,v,x){var b=typeof m,E=b==="string",k=m instanceof Element;if(E){if(v===0)return{text:m};if(v===1)return{text:m,title:x[0]};if(v===2)return g(v,x),{icon:m};f(m,v)}else{if(k&&v===0)return g(v,x),{content:m};if(s.isPlainObject(m))return y(v,x),m;f(m,v)}};i.getOpts=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];var v={};p.forEach(function(E,k){var S=w(0,E,k,p);Object.assign(v,S)});var x=h(v);v.buttons=o.getButtonListOpts(x),delete v.button,v.content=a.getContentOpts(v.content);var b=Object.assign({},c,u,v);return Object.keys(b).forEach(function(E){l.DEPRECATED_OPTS[E]&&l.logDeprecation(E)}),b}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r(1),o={element:"input",attributes:{placeholder:""}};i.getContentOpts=function(a){var l={};return s.isPlainObject(a)?Object.assign(l,a):a instanceof Element?{element:a}:a==="input"?o:null}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.logDeprecation=function(s){var o=i.DEPRECATED_OPTS[s],a=o.onlyRename,l=o.replacement,c=o.subOption,u=o.link,h=a?"renamed":"deprecated",d='SweetAlert warning: "'+s+'" option has been '+h+".";l&&(d+=" Please use"+(c?' "'+c+'" in ':" ")+'"'+l+'" instead.');var f="https://sweetalert.js.org";d+=u?" More details: "+f+u:" More details: "+f+"/guides/#upgrading-from-1x",console.warn(d)},i.DEPRECATED_OPTS={type:{replacement:"icon",link:"/docs/#icon"},imageUrl:{replacement:"icon",link:"/docs/#icon"},customClass:{replacement:"className",onlyRename:!0,link:"/docs/#classname"},imageSize:{},showCancelButton:{replacement:"buttons",link:"/docs/#buttons"},showConfirmButton:{replacement:"button",link:"/docs/#button"},confirmButtonText:{replacement:"button",link:"/docs/#button"},confirmButtonColor:{},cancelButtonText:{replacement:"buttons",link:"/docs/#buttons"},closeOnConfirm:{replacement:"button",subOption:"closeModal",link:"/docs/#button"},closeOnCancel:{replacement:"buttons",subOption:"closeModal",link:"/docs/#buttons"},showLoaderOnConfirm:{replacement:"buttons"},animation:{},inputType:{replacement:"content",link:"/docs/#content"},inputValue:{replacement:"content",link:"/docs/#content"},inputPlaceholder:{replacement:"content",link:"/docs/#content"},html:{replacement:"content",link:"/docs/#content"},allowEscapeKey:{replacement:"closeOnEsc",onlyRename:!0,link:"/docs/#closeonesc"},allowClickOutside:{replacement:"closeOnClickOutside",onlyRename:!0,link:"/docs/#closeonclickoutside"}}}])})})(UN);var oz=UN.exports;const az=X1(oz),lz=({attendanceData:t,DBEvento:e,setAttendanceStatus:n,setDataTable:i})=>{const r=(l,c,u)=>{console.log(l,c,u);const d=pa.firestore().collection(`${e}`).doc(`${l.id}`),f={[c]:u};l[c],d.update(f).then(()=>{i(g=>g.map(y=>y.id===l.id?{...y,[c]:u}:y)),n(g=>g.map(y=>y.id===l.id?{...y,[c]:u}:y))}).catch(g=>{console.error("Error updating document: ",g)})},[s,o]=D.useState({rut:""}),a=({target:l})=>{o({...s,[l.name]:l.value}),console.log(s)};return _.jsx(_.Fragment,{children:t.EventoEstado!="eliminado"?_.jsx(_.Fragment,{children:_.jsxs("tr",{children:[_.jsx("td",{children:_.jsx("input",{className:"input-rut",type:"number",name:"rut",placeholder:parseFloat(t.Rut).toLocaleString("es-CL",{minimumFractionDigits:0,maximumFractionDigits:0}),id:"input-rut",onChange:a,onBlur:()=>r(t,"Rut",s.rut)})}),_.jsx("td",{className:"text-left",children:t.Nombres}),_.jsxs("td",{className:"text-left",children:[t.ApellidoPaterno," ",t.ApellidoMaterno]}),_.jsxs("td",{className:"hidable lunch-paid-column",children:[t.FechaNacimiento&&new Date(t.FechaNacimiento).toLocaleDateString("es-CL",{day:"2-digit",month:"2-digit",year:"numeric"})," "]}),_.jsx("td",{className:"hidable",children:t.IglesiaVisita}),_.jsx("td",{children:t.esStaff==="Si"?_.jsx(_.Fragment,{children:t.staff}):"No"}),_.jsx("td",{children:_.jsx("input",{className:"form-check-input",onChange:()=>r(t,"EventoEstado",t.EventoEstado==="presente"?"Inscrito":"presente"),type:"checkbox",id:"flexCheckEventoEstado",checked:t.EventoEstado==="presente"})}),_.jsxs("td",{className:"lunch-paid-column",children:[_.jsxs("div",{className:"form-check",children:[_.jsx("input",{className:"form-check-input",onChange:()=>r(t,"EventoPagado",t.EventoPagado==="Si"?"No":"Si"),type:"checkbox",id:"flexCheckEventoPagado",checked:t.EventoPagado==="Si"}),t.EventoPagado&&t.EventoPagado==="Si"?_.jsx("button",{className:"btn btn-primary btn-sm",type:"button","data-bs-toggle":"collapse","data-bs-target":"#"+(isNaN(t.id[0])?"":"a")+t.id,"aria-expanded":"false","aria-controls":"multiCollapseExample2",children:"Detalle"}):[]]}),_.jsx("div",{children:t.EventoPagado&&t.EventoPagado==="Si"?_.jsx(_.Fragment,{children:_.jsx("div",{className:"col",children:_.jsx("div",{className:"collapse multi-collapse",id:(isNaN(t.id[0])?"":"a")+t.id,children:_.jsxs("div",{className:"card card-body",children:[_.jsx("p",{children:"Detalle del pago"}),_.jsxs("select",{value:t.EventoMedioPago,onChange:l=>r(t,"EventoMedioPago",l.target.value),className:"col form-select","aria-label":"Default select example",children:[_.jsx("option",{selected:!0,children:"Seleccione"}),_.jsx("option",{value:"Efectivo",children:"Efectivo"}),_.jsx("option",{value:"Transferencia",children:"Transferencia"})]}),_.jsx("br",{}),_.jsx("div",{children:_.jsxs("select",{value:t.EventoRecibePago,onChange:l=>r(t,"EventoRecibePago",l.target.value),className:"col form-select","aria-label":"Default select example",children:[_.jsx("option",{selected:!0,children:"Seleccione"}),_.jsx("option",{value:"Carolina",children:"Carolina Rivera"}),_.jsx("option",{value:"Debora",children:"Cata Nuñez"}),_.jsx("option",{value:"Danae",children:"Claudita"}),_.jsx("option",{value:"Elsa",children:"P. Dani"})]})})]})})})}):[]})]}),_.jsx("td",{children:_.jsx("div",{className:"form-check",children:t.EventoPagado&&t.EventoPagado==="Si"?_.jsx(_.Fragment,{children:_.jsx("input",{className:"form-check-input",onChange:()=>r(t,"EventoColacionEntregada",t.EventoColacionEntregada==="Si"?"No":"Si"),type:"checkbox",id:"flexCheckEventoColacionEntregada",checked:t.EventoColacionEntregada==="Si"})}):[]})})]},t.id)}):[]})},cz=({attendanceData:t})=>{const e=t.reduce((i,r)=>r.EventoEstado==="presente"?i+1:i,0),n=t.reduce((i,r)=>r.EventoEstado==="eliminado"?i+1:i,0);return _.jsxs("div",{className:"detail-container",children:[_.jsx("p",{className:"detail-title",children:"Inscripciones"}),_.jsxs("p",{className:"detail-detail",children:["Total Inscritos: ",t.length]}),_.jsxs("p",{className:"detail-detail",children:["Presentes: ",e]}),_.jsxs("p",{className:"detail-detail",children:["Pendientes: ",t.length-e-n," "]})]})},uz=({attendanceData:t})=>{const e=t.reduce((i,r)=>r.Almuerzo==="Si"?i+1:i,0),n=t.reduce((i,r)=>r.EventoPagado==="Si"?i+1:i,0);return t.reduce((i,r)=>r.EventoEstado==="eliminado"?i+1:i,0),_.jsxs("div",{className:"detail-container",children:[_.jsx("p",{className:"detail-title",children:"Almuerzos"}),_.jsxs("p",{className:"detail-detail",children:["Total: ",e]}),_.jsxs("p",{className:"detail-detail",children:["Pagados: ",n]}),_.jsxs("p",{className:"detail-detail",children:["Pendientes: ",e-n," "]})]})},hz=({attendanceData:t})=>{const e=t.reduce((i,r)=>r.EventoPagado==="Si"?i+1:i,0),n=t.reduce((i,r)=>r.EventoColacionEntregada==="Si"?i+1:i,0);return t.reduce((i,r)=>r.EventoEstado==="eliminado"?i+1:i,0),_.jsxs("div",{className:"detail-container",children:[_.jsx("p",{className:"detail-title",children:"Almuerzos"}),_.jsxs("p",{className:"detail-detail",children:["Total pagados: ",e]}),_.jsxs("p",{className:"detail-detail",children:["Entregados: ",n]}),_.jsxs("p",{className:"detail-detail",children:["Pendientes: ",e-n," "]})]})};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function ru(t){return t+.5|0}const rr=(t,e,n)=>Math.max(Math.min(t,n),e);function nl(t){return rr(ru(t*2.55),0,255)}function wr(t){return rr(ru(t*255),0,255)}function ci(t){return rr(ru(t/2.55)/100,0,1)}function Ib(t){return rr(ru(t*100),0,100)}const un={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Zm=[..."0123456789ABCDEF"],dz=t=>Zm[t&15],fz=t=>Zm[(t&240)>>4]+Zm[t&15],$u=t=>(t&240)>>4===(t&15),pz=t=>$u(t.r)&&$u(t.g)&&$u(t.b)&&$u(t.a);function gz(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&un[t[1]]*17,g:255&un[t[2]]*17,b:255&un[t[3]]*17,a:e===5?un[t[4]]*17:255}:(e===7||e===9)&&(n={r:un[t[1]]<<4|un[t[2]],g:un[t[3]]<<4|un[t[4]],b:un[t[5]]<<4|un[t[6]],a:e===9?un[t[7]]<<4|un[t[8]]:255})),n}const mz=(t,e)=>t<255?e(t):"";function yz(t){var e=pz(t)?dz:fz;return t?"#"+e(t.r)+e(t.g)+e(t.b)+mz(t.a,e):void 0}const vz=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function WN(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function wz(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function _z(t,e,n){const i=WN(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function xz(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function G0(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=xz(n,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function Q0(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(wr)}function Y0(t,e,n){return Q0(WN,t,e,n)}function bz(t,e,n){return Q0(_z,t,e,n)}function Sz(t,e,n){return Q0(wz,t,e,n)}function HN(t){return(t%360+360)%360}function Ez(t){const e=vz.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?nl(+e[5]):wr(+e[5]));const r=HN(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=bz(r,s,o):e[1]==="hsv"?i=Sz(r,s,o):i=Y0(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function kz(t,e){var n=G0(t);n[0]=HN(n[0]+e),n=Y0(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Iz(t){if(!t)return;const e=G0(t),n=e[0],i=Ib(e[1]),r=Ib(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${ci(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const Tb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Cb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Tz(){const t={},e=Object.keys(Cb),n=Object.keys(Tb);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Tb[s]);s=parseInt(Cb[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let ju;function Cz(t){ju||(ju=Tz(),ju.transparent=[0,0,0,0]);const e=ju[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Nz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Az(t){const e=Nz.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?nl(o):rr(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?nl(i):rr(i,0,255)),r=255&(e[4]?nl(r):rr(r,0,255)),s=255&(e[6]?nl(s):rr(s,0,255)),{r:i,g:r,b:s,a:n}}}function Dz(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ci(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Zp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ao=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Pz(t,e,n){const i=ao(ci(t.r)),r=ao(ci(t.g)),s=ao(ci(t.b));return{r:wr(Zp(i+n*(ao(ci(e.r))-i))),g:wr(Zp(r+n*(ao(ci(e.g))-r))),b:wr(Zp(s+n*(ao(ci(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Bu(t,e,n){if(t){let i=G0(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Y0(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function qN(t,e){return t&&Object.assign(e||{},t)}function Nb(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=wr(t[3]))):(e=qN(t,{r:0,g:0,b:0,a:1}),e.a=wr(e.a)),e}function Mz(t){return t.charAt(0)==="r"?Az(t):Ez(t)}class vc{constructor(e){if(e instanceof vc)return e;const n=typeof e;let i;n==="object"?i=Nb(e):n==="string"&&(i=gz(e)||Cz(e)||Mz(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=qN(this._rgb);return e&&(e.a=ci(e.a)),e}set rgb(e){this._rgb=Nb(e)}rgbString(){return this._valid?Dz(this._rgb):void 0}hexString(){return this._valid?yz(this._rgb):void 0}hslString(){return this._valid?Iz(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=Pz(this._rgb,e._rgb,n)),this}clone(){return new vc(this.rgb)}alpha(e){return this._rgb.a=wr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ru(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Bu(this._rgb,2,e),this}darken(e){return Bu(this._rgb,2,-e),this}saturate(e){return Bu(this._rgb,1,e),this}desaturate(e){return Bu(this._rgb,1,-e),this}rotate(e){return kz(this._rgb,e),this}}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function ii(){}const Oz=(()=>{let t=0;return()=>t++})();function re(t){return t===null||typeof t>"u"}function ke(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ne(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ve(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Zt(t,e){return Ve(t)?t:e}function J(t,e){return typeof t>"u"?e:t}const Rz=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,KN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function me(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function he(t,e,n,i){let r,s,o;if(ke(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(ne(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Fd(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function $d(t){if(ke(t))return t.map($d);if(ne(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=$d(t[n[r]]);return e}return t}function GN(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Lz(t,e,n,i){if(!GN(t))return;const r=e[t],s=n[t];ne(r)&&ne(s)?zs(r,s,i):e[t]=$d(s)}function zs(t,e,n){const i=ke(e)?e:[e],r=i.length;if(!ne(t))return t;n=n||{};const s=n.merger||Lz;let o;for(let a=0;a<r;++a){if(o=i[a],!ne(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Sl(t,e){return zs(t,e,{merger:Fz})}function Fz(t,e,n){if(!GN(t))return;const i=e[t],r=n[t];ne(i)&&ne(r)?Sl(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=$d(r))}const Ab={"":t=>t,x:t=>t.x,y:t=>t.y};function $z(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function jz(t){const e=$z(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Or(t,e){return(Ab[e]||(Ab[e]=jz(e)))(t)}function X0(t){return t.charAt(0).toUpperCase()+t.slice(1)}const wc=t=>typeof t<"u",Rr=t=>typeof t=="function",Db=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Bz(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ae=Math.PI,Te=2*Ae,Vz=Te+Ae,jd=Number.POSITIVE_INFINITY,zz=Ae/180,Ke=Ae/2,Qr=Ae/4,Pb=Ae*2/3,sr=Math.log10,Yn=Math.sign;function El(t,e,n){return Math.abs(t-e)<n}function Mb(t){const e=Math.round(t);t=El(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(sr(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Uz(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function aa(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Wz(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function QN(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function En(t){return t*(Ae/180)}function J0(t){return t*(180/Ae)}function Ob(t){if(!Ve(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function YN(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Ae&&(s+=Te),{angle:s,distance:r}}function ey(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Hz(t,e){return(t-e+Vz)%Te-Ae}function tn(t){return(t%Te+Te)%Te}function _c(t,e,n,i){const r=tn(t),s=tn(e),o=tn(n),a=tn(s-r),l=tn(o-r),c=tn(r-s),u=tn(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function ot(t,e,n){return Math.max(e,Math.min(n,t))}function qz(t){return ot(t,-32768,32767)}function yi(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Z0(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const vi=(t,e,n,i)=>Z0(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),Kz=(t,e,n)=>Z0(t,n,i=>t[i][e]>=n);function Gz(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const XN=["push","pop","shift","splice","unshift"];function Qz(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),XN.forEach(n=>{const i="_onData"+X0(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Rb(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(XN.forEach(s=>{delete t[s]}),delete t._chartjs)}function JN(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ZN=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function eA(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,ZN.call(window,()=>{i=!1,t.apply(e,n)}))}}function Yz(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const ew=t=>t==="start"?"left":t==="end"?"right":"center",Et=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Xz=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function tA(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=ot(Math.min(vi(a,l,c).lo,n?i:vi(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?s=ot(Math.max(vi(a,o.axis,u,!0).hi+1,n?0:vi(e,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function nA(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Vu=t=>t===0||t===1,Lb=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Te/n)),Fb=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Te/n)+1,kl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ke)+1,easeOutSine:t=>Math.sin(t*Ke),easeInOutSine:t=>-.5*(Math.cos(Ae*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Vu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Vu(t)?t:Lb(t,.075,.3),easeOutElastic:t=>Vu(t)?t:Fb(t,.075,.3),easeInOutElastic(t){return Vu(t)?t:t<.5?.5*Lb(t*2,.1125,.45):.5+.5*Fb(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-kl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?kl.easeInBounce(t*2)*.5:kl.easeOutBounce(t*2-1)*.5+.5};function tw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $b(t){return tw(t)?t:new vc(t)}function eg(t){return tw(t)?t:new vc(t).saturate(.5).darken(.1).hexString()}const Jz=["x","y","borderWidth","radius","tension"],Zz=["color","borderColor","backgroundColor"];function e5(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Zz},numbers:{type:"number",properties:Jz}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function t5(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const jb=new Map;function n5(t,e){e=e||{};const n=t+JSON.stringify(e);let i=jb.get(n);return i||(i=new Intl.NumberFormat(t,e),jb.set(n,i)),i}function su(t,e,n){return n5(e,n).format(t)}const iA={values(t){return ke(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=i5(t,n)}const o=sr(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),su(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(sr(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?iA.numeric.call(this,t,e,n):""}};function i5(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var tp={formatters:iA};function r5(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tp.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Us=Object.create(null),ty=Object.create(null);function Il(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function tg(t,e,n){return typeof e=="string"?zs(Il(t,e),n):zs(Il(t,""),e)}class s5{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>eg(r.backgroundColor),this.hoverBorderColor=(i,r)=>eg(r.borderColor),this.hoverColor=(i,r)=>eg(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return tg(this,e,n)}get(e){return Il(this,e)}describe(e,n){return tg(ty,e,n)}override(e,n){return tg(Us,e,n)}route(e,n,i,r){const s=Il(this,e),o=Il(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return ne(l)?Object.assign({},c,l):J(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Re=new s5({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[e5,t5,r5]);function o5(t){return!t||re(t.size)||re(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Bd(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function a5(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!ke(h))o=Bd(t,r,s,o,h);else if(ke(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!ke(d)&&(o=Bd(t,r,s,o,d));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Yr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Bb(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function ny(t,e,n,i){rA(t,e,n,i,null)}function rA(t,e,n,i,r){let s,o,a,l,c,u,h,d;const f=e.pointStyle,g=e.rotation,y=e.radius;let w=(g||0)*zz;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(w),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,y,0,0,Te):t.arc(n,i,y,0,Te),t.closePath();break;case"triangle":u=r?r/2:y,t.moveTo(n+Math.sin(w)*u,i-Math.cos(w)*y),w+=Pb,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*y),w+=Pb,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(w+Qr)*l,h=Math.cos(w+Qr)*(r?r/2-c:l),a=Math.sin(w+Qr)*l,d=Math.sin(w+Qr)*(r?r/2-c:l),t.arc(n-h,i-a,c,w-Ae,w-Ke),t.arc(n+d,i-o,c,w-Ke,w),t.arc(n+h,i+a,c,w,w+Ke),t.arc(n-d,i+o,c,w+Ke,w+Ae),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*y,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}w+=Qr;case"rectRot":h=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":w+=Qr;case"cross":h=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),w+=Qr,h=Math.cos(w)*(r?r/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(w)*y,a=Math.sin(w)*y,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(w)*(r?r/2:y),i+Math.sin(w)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function wi(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function np(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ip(t){t.restore()}function l5(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function c5(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function u5(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),re(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function h5(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function d5(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ws(t,e,n,i,r,s={}){const o=ke(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,u5(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&d5(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),re(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),h5(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function xc(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Ae,Ae,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Ae,Ke,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ke,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Ke,!0),t.lineTo(n+o.topLeft,i)}const f5=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,p5=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function g5(t,e){const n=(""+t).match(f5);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const m5=t=>+t||0;function nw(t,e){const n={},i=ne(e),r=i?Object.keys(e):e,s=ne(t)?i?o=>J(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=m5(s(o));return n}function sA(t){return nw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Es(t){return nw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function _t(t){const e=sA(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Xe(t,e){t=t||{},e=e||Re.font;let n=J(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=J(t.style,e.style);i&&!(""+i).match(p5)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:J(t.family,e.family),lineHeight:g5(J(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:J(t.weight,e.weight),string:""};return r.string=o5(r),r}function be(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e)),n!==void 0&&ke(o)&&(o=o[n%o.length]),o!==void 0))return o}function y5(t,e,n){const{min:i,max:r}=t,s=KN(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Kr(t,e){return Object.assign(Object.create(t),e)}function iw(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=cA("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>iw([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return aA(a,l,()=>k5(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return zb(a).includes(l)},ownKeys(a){return zb(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function la(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:oA(t,i),setContext:s=>la(t,s,n,i),override:s=>la(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return aA(s,o,()=>w5(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function oA(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Rr(n)?n:()=>n,isIndexable:Rr(i)?i:()=>i}}const v5=(t,e)=>t?t+X0(e):e,rw=(t,e)=>ne(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function aA(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function w5(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Rr(a)&&o.isScriptable(e)&&(a=_5(e,a,t,n)),ke(a)&&a.length&&(a=x5(e,a,t,o.isIndexable)),rw(e,a)&&(a=la(a,r,s&&s[e],o)),a}function _5(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),rw(t,l)&&(l=sw(r._scopes,r,t,l)),l}function x5(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ne(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=sw(c,r,t,u);e.push(la(h,s,o&&o[t],a))}}return e}function lA(t,e,n){return Rr(t)?t(e,n):t}const b5=(t,e)=>t===!0?e:typeof t=="string"?Or(e,t):void 0;function S5(t,e,n,i,r){for(const s of e){const o=b5(n,s);if(o){t.add(o);const a=lA(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function sw(t,e,n,i){const r=e._rootScopes,s=lA(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=Vb(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=Vb(a,o,s,l,i),l===null)?!1:iw(Array.from(a),[""],r,s,()=>E5(e,n,i))}function Vb(t,e,n,i,r){for(;n;)n=S5(t,e,n,i,r);return n}function E5(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return ke(r)&&ne(n)?n:r||{}}function k5(t,e,n,i){let r;for(const s of e)if(r=cA(v5(s,t),n),typeof r<"u")return rw(t,r)?sw(n,i,t,r):r}function cA(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function zb(t){let e=t._keys;return e||(e=t._keys=I5(t._scopes)),e}function I5(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function uA(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:r.parse(Or(u,s),c)};return o}const T5=Number.EPSILON||1e-14,ca=(t,e)=>e<t.length&&!t[e].skip&&t[e],hA=t=>t==="x"?"y":"x";function C5(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=ey(s,r),l=ey(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function N5(t,e,n){const i=t.length;let r,s,o,a,l,c=ca(t,0);for(let u=0;u<i-1;++u)if(l=c,c=ca(t,u+1),!(!l||!c)){if(El(e[u],0,T5)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=s*o*e[u])}}function A5(t,e,n="x"){const i=hA(n),r=t.length;let s,o,a,l=ca(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=ca(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${i}`]=h+s*e[c])}}function D5(t,e="x"){const n=hA(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=ca(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=ca(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?Yn(r[o-1])!==Yn(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}N5(t,r,s),A5(t,s,e)}function zu(t,e,n){return Math.max(Math.min(t,n),e)}function P5(t,e){let n,i,r,s,o,a=wi(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&wi(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=zu(r.cp1x,e.left,e.right),r.cp1y=zu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=zu(r.cp2x,e.left,e.right),r.cp2y=zu(r.cp2y,e.top,e.bottom)))}function M5(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")D5(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=C5(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&P5(t,n)}function dA(){return typeof window<"u"&&typeof document<"u"}function ow(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Vd(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const rp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function O5(t,e){return rp(t).getPropertyValue(e)}const R5=["top","right","bottom","left"];function ks(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=R5[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const L5=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function F5(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(L5(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function is(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=rp(n),s=r.boxSizing==="border-box",o=ks(r,"padding"),a=ks(r,"border","width"),{x:l,y:c,box:u}=F5(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:g}=e;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/g*n.height/i)}}function $5(t,e,n){let i,r;if(e===void 0||n===void 0){const s=ow(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=rp(s),l=ks(a,"border","width"),c=ks(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Vd(a.maxWidth,s,"clientWidth"),r=Vd(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||jd,maxHeight:r||jd}}const Uu=t=>Math.round(t*10)/10;function j5(t,e,n,i){const r=rp(t),s=ks(r,"margin"),o=Vd(r.maxWidth,t,"clientWidth")||jd,a=Vd(r.maxHeight,t,"clientHeight")||jd,l=$5(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const d=ks(r,"border","width"),f=ks(r,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Uu(Math.min(c,o,l.maxWidth)),u=Uu(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Uu(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Uu(Math.floor(u*i))),{width:c,height:u}}function Ub(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const B5=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function Wb(t,e){const n=O5(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function rs(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function V5(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function z5(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=rs(t,r,n),a=rs(r,s,n),l=rs(s,e,n),c=rs(o,a,n),u=rs(a,l,n);return rs(c,u,n)}const U5=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},W5=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function jo(t,e,n){return t?U5(e,n):W5()}function fA(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function pA(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function gA(t){return t==="angle"?{between:_c,compare:Hz,normalize:tn}:{between:yi,compare:(e,n)=>e-n,normalize:e=>e}}function Hb({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function H5(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=gA(i),l=e.length;let{start:c,end:u,loop:h}=t,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),r,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function mA(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=gA(i),{start:u,end:h,loop:d,style:f}=H5(t,e,n),g=[];let y=!1,w=null,p,m,v;const x=()=>l(r,v,p)&&a(r,v)!==0,b=()=>a(s,p)===0||l(s,v,p),E=()=>y||x(),k=()=>!y||b();for(let S=u,I=u;S<=h;++S)m=e[S%o],!m.skip&&(p=c(m[i]),p!==v&&(y=l(p,r,s),w===null&&E()&&(w=a(p,r)===0?S:I),w!==null&&k()&&(g.push(Hb({start:w,end:S,loop:d,count:o,style:f})),w=null),I=S,v=p));return w!==null&&g.push(Hb({start:w,end:h,loop:d,count:o,style:f})),g}function yA(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=mA(i[r],t.points,e);s.length&&n.push(...s)}return n}function q5(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function K5(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function G5(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=q5(n,r,s,i);if(i===!0)return qb(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return qb(t,K5(n,o,l,c),n,e)}function qb(t,e,n,i){return!i||!i.setContext||!n?e:Q5(t,e,n,i)}function Q5(t,e,n,i){const r=t._chart.getContext(),s=Kb(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(g,y,w,p){const m=a?-1:1;if(g!==y){for(g+=l;n[g%l].skip;)g-=m;for(;n[y%l].skip;)y+=m;g%l!==y%l&&(c.push({start:g%l,end:y%l,loop:w,style:p}),u=p,h=y%l)}}for(const g of e){h=a?h:g.start;let y=n[h%l],w;for(d=h+1;d<=g.end;d++){const p=n[d%l];w=Kb(i.setContext(Kr(r,{type:"segment",p0:y,p1:p,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Y5(w,u)&&f(h,d-1,g.loop,u),y=p,u=w}h<d-1&&f(h,d-1,g.loop,u)}return c}function Kb(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Y5(t,e){if(!e)return!1;const n=[],i=function(r,s){return tw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class X5{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ZN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var si=new X5;const Gb="transparent",J5={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=$b(t||Gb),r=i.valid&&$b(e||Gb);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Z5{constructor(e,n,i,r){const s=n[i];r=be([e.to,r,s,e.from]);const o=be([e.from,s,r]);this._active=!0,this._fn=e.fn||J5[e.type||typeof o],this._easing=kl[e.easing]||kl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=be([e.to,n,r,e.from]),this._from=be([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class vA{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ne(e))return;const n=Object.keys(Re.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ne(s))return;const o={};for(const a of n)o[a]=s[a];(ke(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=tU(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&eU(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new Z5(d,e,c,u),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return si.add(this._chart,i),!0}}function eU(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function tU(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Qb(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function nU(t,e,n){if(n===!1)return!1;const i=Qb(t,n),r=Qb(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function iU(t){let e,n,i,r;return ne(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function wA(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Yb(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(i.all)continue;break}c=t.values[l],Ve(c)&&(s||e===0||Yn(e)===Yn(c))&&(e+=c)}return e}}function rU(t){const e=Object.keys(t),n=new Array(e.length);let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],n[i]={x:s,y:t[s]};return n}function Xb(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function sU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function oU(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function aU(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Jb(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Zb(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=sU(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[l]:y,[c]:w}=g,p=g._stacks||(g._stacks={});d=p[c]=aU(r,u,y),d[a]=w,d._top=Jb(d,o,!0,i.type),d._bottom=Jb(d,o,!1,i.type);const m=d._visualValues||(d._visualValues={});m[a]=w}}function ng(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function lU(t,e){return Kr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function cU(t,e,n){return Kr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Va(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const ig=t=>t==="reset"||t==="none",e1=(t,e)=>e?t:Object.assign({},t),uU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:wA(n,!0),values:null};class Tn{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Xb(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Va(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,s=n.xAxisID=J(i.xAxisID,ng(e,"x")),o=n.yAxisID=J(i.yAxisID,ng(e,"y")),a=n.rAxisID=J(i.rAxisID,ng(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),u=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Rb(this._data,this),e._stacked&&Va(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ne(n))this._data=rU(n);else if(i!==n){if(i){Rb(i,this);const r=this._cachedMeta;Va(r),r._parsed=[]}n&&Object.isExtensible(n)&&Qz(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Xb(n.vScale,n),n.stack!==i.stack&&(r=!0,Va(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&Zb(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=r,i._sorted=!0,d=r;else{ke(r[e])?d=this.parseArrayData(i,r,e,n):ne(r[e])?d=this.parseObjectData(i,r,e,n):d=this.parsePrimitiveData(i,r,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&Zb(this,d)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let d,f,g;for(d=0,f=r;d<f;++d)g=d+i,h[d]={[a]:u||s.parse(c[g],g),[l]:o.parse(n[g],g)};return h}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,d,f;for(u=0,h=r;u<h;++u)d=u+i,f=n[d],c[u]={x:s.parse(Or(f,a),d),y:o.parse(Or(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:wA(r,!0),values:n._stacks[e.axis]._visualValues};return Yb(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=Yb(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=uU(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=oU(a);let d,f;function g(){f=r[d];const y=f[a.axis];return!Ve(f[e.axis])||u>y||h<y}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Ve(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=iU(J(this.options.clip,nU(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=cU(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=lU(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&wc(i);if(a)return e1(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Re.elements[e]),g=()=>this.getContext(i,r,n),y=c.resolveNamedOptions(d,f,g,h);return y.$shared&&(y.$shared=l,s[o]=Object.freeze(e1(y,l))),y}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new vA(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ig(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){ig(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!ig(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Va(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}R(Tn,"defaults",{}),R(Tn,"datasetElementType",null),R(Tn,"dataElementType",null);function hU(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=JN(i.sort((r,s)=>r-s))}return t._cache.$bar}function dU(t){const e=t.iScale,n=hU(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(wc(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function fU(t,e,n,i){const r=n.barThickness;let s,o;return re(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function pU(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function gU(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function _A(t,e,n,i){return ke(t)?gU(t,e,n,i):e[n.axis]=n.parse(t,i),e}function t1(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(_A(d,h,s,c));return l}function rg(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function mU(t,e,n){return t!==0?Yn(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function yU(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function vU(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=yU(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[n1(u,o,a,l)]=!0,r=c)),s[n1(r,o,a,l)]=!0,t.borderSkipped=s}function n1(t,e,n,i){return i?(t=wU(t,e,n),t=i1(t,n,e)):t=i1(t,e,n),t}function wU(t,e,n){return t===e?n:t===n?e:t}function i1(t,e,n){return t==="start"?e:t==="end"?n:t}function _U(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Ih extends Tn{parsePrimitiveData(e,n,i,r){return t1(e,n,i,r)}parseArrayData(e,n,i,r){return t1(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,g,y;for(d=i,f=i+r;d<f;++d)y=n[d],g={},g[s.axis]=s.parse(Or(y,c),d),h.push(_A(Or(y,u),g,o,d));return h}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=rg(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r);for(let f=n;f<n+i;f++){const g=this.getParsed(f),y=s||re(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),w=this._calculateBarIndexPixels(f,u),p=(g._stacks||{})[a.axis],m={horizontal:c,base:y.base,enableBorderRadius:!p||rg(g._custom)||o===p._top||o===p._bottom,x:c?y.head:w.center,y:c?w.center:y.head,height:c?w.size:Math.abs(y.size),width:c?Math.abs(y.size):w.size};d&&(m.options=h||this.resolveDataElementOptions(f,e[f].active?"active":r));const v=m.options||e[f].options;vU(m,v,p,o),_U(m,v,u.ratio),this.updateElement(e[f],f,m,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(re(u)||isNaN(u))return!0};for(const l of r)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||dU(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=rg(c);let h=l[n.axis],d=0,f=i?this.applyStack(n,l,i):h,g,y;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&Yn(h)!==Yn(c.barEnd)&&(d=0),d+=h);const w=!re(s)&&!u?s:d;let p=n.getPixelForValue(w);if(this.chart.getDataVisibility(e)?g=n.getPixelForValue(d+f):g=p,y=g-p,Math.abs(y)<o){y=mU(y,n,a)*o,h===a&&(p-=y/2);const m=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),x=Math.min(m,v),b=Math.max(m,v);p=Math.max(Math.min(p,b),x),g=p+y,i&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(g)-n.getValueForPixel(p))}if(p===n.getPixelForValue(a)){const m=Yn(y)*n.getLineWidthForValue(a)/2;p+=m,y-=m}return{size:y,base:p,head:g,center:g+y/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=J(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=r.barThickness==="flex"?pU(e,n,r,c):fU(e,n,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&i[s].draw(this._ctx)}}R(Ih,"id","bar"),R(Ih,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),R(Ih,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Th extends Tn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,r){const s=super.parsePrimitiveData(e,n,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(e,n,i,r){const s=super.parseArrayData(e,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=J(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(e,n,i,r){const s=super.parseObjectData(e,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=J(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,r),u=o.axis,h=a.axis;for(let d=n;d<n+i;d++){const f=e[d],g=!s&&this.getParsed(d),y={},w=y[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),p=y[h]=s?a.getBasePixel():a.getPixelForValue(g[h]);y.skip=isNaN(w)||isNaN(p),c&&(y.options=l||this.resolveDataElementOptions(d,f.active?"active":r),s&&(y.options.radius=0)),this.updateElement(f,d,y,r)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return n!=="active"&&(r.radius=0),r.radius+=J(i&&i._custom,s),r}}R(Th,"id","bubble"),R(Th,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),R(Th,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function xU(t,e,n){let i=1,r=1,s=0,o=0;if(e<Te){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(v,x,b)=>_c(v,a,l,!0)?1:Math.max(x,x*n,b,b*n),g=(v,x,b)=>_c(v,a,l,!0)?-1:Math.min(x,x*n,b,b*n),y=f(0,c,h),w=f(Ke,u,d),p=g(Ae,c,h),m=g(Ae+Ke,u,d);i=(y-p)/2,r=(w-m)/2,s=-(y+p)/2,o=-(w+m)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class vs extends Tn{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(ne(i[e])){const{key:l="value"}=this._parsing;s=c=>+Or(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return En(this.options.rotation-90)}_getCircumference(){return En(this.options.circumference)}_getRotationExtents(){let e=Te,n=-Te;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(Rz(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:y}=xU(h,u,l),w=(i.width-o)/d,p=(i.height-o)/f,m=Math.max(Math.min(w,p)/2,0),v=KN(this.options.radius,m),x=Math.max(v*l,0),b=(v-x)/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=y*v,r.total=this.calculateTotal(),this.outerRadius=v-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Te)}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:y,includeOptions:w}=this._getSharedOptions(n,r);let p=this._getRotation(),m;for(m=0;m<n;++m)p+=this._circumference(m,s);for(m=n;m<n+i;++m){const v=this._circumference(m,s),x=e[m],b={x:u+this.offsetX,y:h+this.offsetY,startAngle:p,endAngle:p+v,circumference:v,outerRadius:g,innerRadius:f};w&&(b.options=y||this.resolveDataElementOptions(m,x.active?"active":r)),p+=v,this.updateElement(x,m,b,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Te*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=su(n._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(J(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}R(vs,"id","doughnut"),R(vs,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),R(vs,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),R(vs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class Ch extends Tn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=tA(n,r,o);this._drawStart=a,this._drawCount=l,nA(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,r),d=o.axis,f=a.axis,{spanGaps:g,segment:y}=this.options,w=aa(g)?g:Number.POSITIVE_INFINITY,p=this.chart._animationsDisabled||s||r==="none",m=n+i,v=e.length;let x=n>0&&this.getParsed(n-1);for(let b=0;b<v;++b){const E=e[b],k=p?E:{};if(b<n||b>=m){k.skip=!0;continue}const S=this.getParsed(b),I=re(S[f]),N=k[d]=o.getPixelForValue(S[d],b),A=k[f]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[f],b);k.skip=isNaN(N)||isNaN(A)||I,k.stop=b>0&&Math.abs(S[d]-x[d])>w,y&&(k.parsed=S,k.raw=c.data[b]),h&&(k.options=u||this.resolveDataElementOptions(b,E.active?"active":r)),p||this.updateElement(E,b,k,r),x=S}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}R(Ch,"id","line"),R(Ch,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),R(Ch,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Tl extends Tn{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=su(n._parsed[e].r,i.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,n,i,r){return uA.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,r=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*Ae;let f=d,g;const y=360/this.countVisibleElements();for(g=0;g<n;++g)f+=this._computeAngle(g,r,y);for(g=n;g<n+i;g++){const w=e[g];let p=f,m=f+this._computeAngle(g,r,y),v=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=m,s&&(l.animateScale&&(v=0),l.animateRotate&&(p=m=d));const x={x:u,y:h,innerRadius:0,outerRadius:v,startAngle:p,endAngle:m,options:this.resolveDataElementOptions(g,w.active?"active":r)};this.updateElement(w,g,x,r)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?En(this.resolveDataElementOptions(e,n).angle||i):0}}R(Tl,"id","polarArea"),R(Tl,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),R(Tl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class iy extends vs{}R(iy,"id","pie"),R(iy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Nh extends Tn{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,r){return uA.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta,i=n.dataset,r=n.data||[],s=n.iScale.getLabels();if(i.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,n,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":r),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,d=o?s.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,r)}}}R(Nh,"id","radar"),R(Nh,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),R(Nh,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ah extends Tn{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:s,count:o}=tA(n,i,r);if(this._drawStart=s,this._drawCount=o,nA(n)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,r),h=this.getSharedOptions(u),d=this.includeOptions(r,h),f=o.axis,g=a.axis,{spanGaps:y,segment:w}=this.options,p=aa(y)?y:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||r==="none";let v=n>0&&this.getParsed(n-1);for(let x=n;x<n+i;++x){const b=e[x],E=this.getParsed(x),k=m?b:{},S=re(E[g]),I=k[f]=o.getPixelForValue(E[f],x),N=k[g]=s||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[g],x);k.skip=isNaN(I)||isNaN(N)||S,k.stop=x>0&&Math.abs(E[f]-v[f])>p,w&&(k.parsed=E,k.raw=c.data[x]),d&&(k.options=h||this.resolveDataElementOptions(x,b.active?"active":r)),m||this.updateElement(b,x,k,r),v=E}this.updateSharedOptions(h,r,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,o)/2}}R(Ah,"id","scatter"),R(Ah,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),R(Ah,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var bU=Object.freeze({__proto__:null,BarController:Ih,BubbleController:Th,DoughnutController:vs,LineController:Ch,PieController:iy,PolarAreaController:Tl,RadarController:Nh,ScatterController:Ah});function Xr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class aw{constructor(e){R(this,"options");this.options=e||{}}static override(e){Object.assign(aw.prototype,e)}init(){}formats(){return Xr()}parse(){return Xr()}format(){return Xr()}add(){return Xr()}diff(){return Xr()}startOf(){return Xr()}endOf(){return Xr()}}var SU={_date:aw};function EU(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?Kz:vi;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(s,e,n-u),d=l(s,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function ou(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=EU(s[a],e,o,r);for(let f=h;f<=d;++f){const g=u[f];g.skip||i(g,c,f)}}}function kU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function sg(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||ou(t,n,e,function(a,l,c){!r&&!wi(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function IU(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=YN(o,{x:e.x,y:e.y});_c(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return ou(t,n,e,s),r}function TU(t,e,n,i,r,s){let o=[];const a=kU(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const g=u.getCenterPoint(r);if(!(!!s||t.isPointInArea(g))&&!f)return;const w=a(e,g);w<l?(o=[{element:u,datasetIndex:h,index:d}],l=w):w===l&&o.push({element:u,datasetIndex:h,index:d})}return ou(t,n,e,c),o}function og(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?IU(t,e,n,r):TU(t,e,n,i,r,s)}function r1(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ou(t,n,e,(l,c,u)=>{l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var CU={evaluateInteractionItems:ou,modes:{index(t,e,n,i){const r=is(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?sg(t,r,s,i,o):og(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const r=is(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?sg(t,r,s,i,o):og(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const r=is(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return sg(t,r,s,i,o)},nearest(t,e,n,i){const r=is(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return og(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=is(e,t);return r1(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=is(e,t);return r1(t,r,"y",n.intersect,i)}}};const xA=["left","top","right","bottom"];function za(t,e){return t.filter(n=>n.pos===e)}function s1(t,e){return t.filter(n=>xA.indexOf(n.pos)===-1&&n.box.axis===e)}function Ua(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function NU(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function AU(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!xA.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function DU(t,e){const n=AU(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function PU(t){const e=NU(t),n=Ua(e.filter(c=>c.box.fullSize),!0),i=Ua(za(e,"left"),!0),r=Ua(za(e,"right")),s=Ua(za(e,"top"),!0),o=Ua(za(e,"bottom")),a=s1(e,"x"),l=s1(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:za(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function o1(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function bA(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function MU(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ne(r)){n.size&&(t[r]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[r]+=n.size}s.getPadding&&bA(o,s.getPadding());const a=Math.max(0,e.outerWidth-o1(o,t,"left","right")),l=Math.max(0,e.outerHeight-o1(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function OU(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function RU(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function il(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,RU(a.horizontal,e));const{same:h,other:d}=MU(e,n,a,i);c|=h&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&il(r,e,n,i)||u}function Wu(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function a1(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;wc(c.start)&&(o=c.start),l.fullSize?Wu(l,r.left,o,n.outerWidth-r.right-r.left,d):Wu(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;wc(c.start)&&(s=c.start),l.fullSize?Wu(l,s,r.top,d,n.outerHeight-r.bottom-r.top):Wu(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var It={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=_t(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=PU(t.boxes),l=a.vertical,c=a.horizontal;he(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,w)=>w.box.options&&w.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);bA(d,_t(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),g=DU(l.concat(c),h);il(a.fullSize,f,h,g),il(l,f,h,g),il(c,f,h,g)&&il(l,f,h,g),OU(f),a1(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,a1(a.rightAndBottom,f,h,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},he(a.chartArea,y=>{const w=y.box;Object.assign(w,t.chartArea),w.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class SA{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class LU extends SA{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Dh="$chartjs",FU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},l1=t=>t===null||t==="";function $U(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Dh]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",l1(r)){const s=Wb(t,"width");s!==void 0&&(t.width=s)}if(l1(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Wb(t,"height");s!==void 0&&(t.height=s)}return t}const EA=B5?{passive:!0}:!1;function jU(t,e,n){t.addEventListener(e,n,EA)}function BU(t,e,n){t.canvas.removeEventListener(e,n,EA)}function VU(t,e){const n=FU[t.type]||t.type,{x:i,y:r}=is(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function zd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function zU(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||zd(a.addedNodes,i),o=o&&!zd(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function UU(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||zd(a.removedNodes,i),o=o&&!zd(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const bc=new Map;let c1=0;function kA(){const t=window.devicePixelRatio;t!==c1&&(c1=t,bc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function WU(t,e){bc.size||window.addEventListener("resize",kA),bc.set(t,e)}function HU(t){bc.delete(t),bc.size||window.removeEventListener("resize",kA)}function qU(t,e,n){const i=t.canvas,r=i&&ow(i);if(!r)return;const s=eA((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),WU(t,s),o}function ag(t,e,n){n&&n.disconnect(),e==="resize"&&HU(t)}function KU(t,e,n){const i=t.canvas,r=eA(s=>{t.ctx!==null&&n(VU(s,t))},t);return jU(i,e,r),r}class GU extends SA{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?($U(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Dh])return!1;const i=n[Dh].initial;["height","width"].forEach(s=>{const o=i[s];re(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Dh],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:zU,detach:UU,resize:qU}[n]||KU;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:ag,detach:ag,resize:ag}[n]||BU)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return j5(e,n,i,r)}isAttached(e){const n=ow(e);return!!(n&&n.isConnected)}}function QU(t){return!dA()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?LU:GU}var nh;let Li=(nh=class{constructor(){R(this,"x");R(this,"y");R(this,"active",!1);R(this,"options");R(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return aa(this.x)&&aa(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}},R(nh,"defaults",{}),R(nh,"defaultRoutes"),nh);function YU(t,e){const n=t.options.ticks,i=XU(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?ZU(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return e3(e,c,s,o/r),c;const u=JU(s,e,r);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Hu(e,c,u,re(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Hu(e,c,u,s[h],s[h+1]);return Hu(e,c,u,l,re(f)?e.length:l+f),c}return Hu(e,c,u),c}function XU(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function JU(t,e,n){const i=t3(t),r=e.length/n;if(!i)return Math.max(r,1);const s=Uz(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function ZU(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function e3(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Hu(t,e,n,i,r){const s=J(i,0),o=Math.min(J(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function t3(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const n3=t=>t==="left"?"right":t==="right"?"left":t,u1=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,h1=(t,e)=>Math.min(e||t,t);function d1(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function i3(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function r3(t,e){he(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Wa(t){return t.drawTicks?t.tickLength:0}function f1(t,e){if(!t.display)return 0;const n=Xe(t.font,e),i=_t(t.padding);return(ke(t.text)?t.text.length:1)*n.lineHeight+i.height}function s3(t,e){return Kr(t,{scale:e,type:"scale"})}function o3(t,e,n){return Kr(t,{tick:n,index:e,type:"tick"})}function a3(t,e,n){let i=ew(t);return(n&&e!=="right"||!n&&e==="right")&&(i=n3(i)),i}function l3(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,g;const y=o-r,w=a-s;if(t.isHorizontal()){if(f=Et(i,s,a),ne(n)){const p=Object.keys(n)[0],m=n[p];g=u[p].getPixelForValue(m)+y-e}else n==="center"?g=(c.bottom+c.top)/2+y-e:g=u1(t,n,e);d=a-s}else{if(ne(n)){const p=Object.keys(n)[0],m=n[p];f=u[p].getPixelForValue(m)-w+e}else n==="center"?f=(c.left+c.right)/2-w+e:f=u1(t,n,e);g=Et(i,o,r),h=n==="left"?-Ke:Ke}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class no extends Li{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Zt(e,Number.POSITIVE_INFINITY),n=Zt(n,Number.NEGATIVE_INFINITY),i=Zt(i,Number.POSITIVE_INFINITY),r=Zt(r,Number.NEGATIVE_INFINITY),{min:Zt(e,i),max:Zt(n,r),minDefined:Ve(e),maxDefined:Ve(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Zt(n,Zt(i,n)),max:Zt(i,Zt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){me(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=y5(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?d1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=YU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){me(this.options.afterUpdate,[this])}beforeSetDimensions(){me(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){me(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),me(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){me(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=me(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){me(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){me(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=h1(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=ot(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Wa(e.grid)-n.padding-f1(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=J0(Math.min(Math.asin(ot((u.highest.height+6)/a,-1,1)),Math.asin(ot(l/c,-1,1))-Math.asin(ot(d/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){me(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){me(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=f1(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Wa(s)+l):(e.height=this.maxHeight,e.width=Wa(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,g=En(this.labelRotation),y=Math.cos(g),w=Math.sin(g);if(a){const p=i.mirror?0:w*h.width+y*d.height;e.height=Math.min(this.maxHeight,e.height+p+f)}else{const p=i.mirror?0:y*h.width+w*d.height;e.width=Math.min(this.maxWidth,e.width+p+f)}this._calculatePadding(c,u,w,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=r*e.width,f=i*n.height):(d=i*e.height,f=r*n.width):s==="start"?f=n.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){me(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)re(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=d1(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/h1(n,i));let c=0,u=0,h,d,f,g,y,w,p,m,v,x,b;for(h=0;h<n;h+=l){if(g=e[h].label,y=this._resolveTickFontOptions(h),r.font=w=y.string,p=s[w]=s[w]||{data:{},gc:[]},m=y.lineHeight,v=x=0,!re(g)&&!ke(g))v=Bd(r,p.data,p.gc,v,g),x=m;else if(ke(g))for(d=0,f=g.length;d<f;++d)b=g[d],!re(b)&&!ke(b)&&(v=Bd(r,p.data,p.gc,v,b),x+=m);o.push(v),a.push(x),c=Math.max(v,c),u=Math.max(x,u)}r3(s,n);const E=o.indexOf(c),k=a.indexOf(u),S=I=>({width:o[I]||0,height:a[I]||0});return{first:S(0),last:S(n-1),widest:S(E),highest:S(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return qz(this._alignToPixels?Yr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=o3(this.getContext(),e,i))}return this.$context||(this.$context=s3(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=En(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Wa(s),f=[],g=a.setContext(this.getContext()),y=g.display?g.width:0,w=y/2,p=function(se){return Yr(i,se,y)};let m,v,x,b,E,k,S,I,N,A,$,U;if(o==="top")m=p(this.bottom),k=this.bottom-d,I=m-w,A=p(e.top)+w,U=e.bottom;else if(o==="bottom")m=p(this.top),A=e.top,U=p(e.bottom)-w,k=m+w,I=this.top+d;else if(o==="left")m=p(this.right),E=this.right-d,S=m-w,N=p(e.left)+w,$=e.right;else if(o==="right")m=p(this.left),N=e.left,$=p(e.right)-w,E=m+w,S=this.left+d;else if(n==="x"){if(o==="center")m=p((e.top+e.bottom)/2+.5);else if(ne(o)){const se=Object.keys(o)[0],ge=o[se];m=p(this.chart.scales[se].getPixelForValue(ge))}A=e.top,U=e.bottom,k=m+w,I=k+d}else if(n==="y"){if(o==="center")m=p((e.left+e.right)/2);else if(ne(o)){const se=Object.keys(o)[0],ge=o[se];m=p(this.chart.scales[se].getPixelForValue(ge))}E=m-w,S=E-d,N=e.left,$=e.right}const ee=J(r.ticks.maxTicksLimit,h),K=Math.max(1,Math.ceil(h/ee));for(v=0;v<h;v+=K){const se=this.getContext(v),ge=s.setContext(se),L=a.setContext(se),W=ge.lineWidth,G=ge.color,ye=L.dash||[],_e=L.dashOffset,Dn=ge.tickWidth,Xt=ge.tickColor,ti=ge.tickBorderDash||[],Jt=ge.tickBorderDashOffset;x=i3(this,v,l),x!==void 0&&(b=Yr(i,x,W),c?E=S=N=$=b:k=I=A=U=b,f.push({tx1:E,ty1:k,tx2:S,ty2:I,x1:N,y1:A,x2:$,y2:U,width:W,color:G,borderDash:ye,borderDashOffset:_e,tickWidth:Dn,tickColor:Xt,tickBorderDash:ti,tickBorderDashOffset:Jt}))}return this._ticksLength=h,this._borderValue=m,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=Wa(i.grid),f=d+u,g=h?-u:f,y=-En(this.labelRotation),w=[];let p,m,v,x,b,E,k,S,I,N,A,$,U="middle";if(r==="top")E=this.bottom-g,k=this._getXAxisLabelAlignment();else if(r==="bottom")E=this.top+g,k=this._getXAxisLabelAlignment();else if(r==="left"){const K=this._getYAxisLabelAlignment(d);k=K.textAlign,b=K.x}else if(r==="right"){const K=this._getYAxisLabelAlignment(d);k=K.textAlign,b=K.x}else if(n==="x"){if(r==="center")E=(e.top+e.bottom)/2+f;else if(ne(r)){const K=Object.keys(r)[0],se=r[K];E=this.chart.scales[K].getPixelForValue(se)+f}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")b=(e.left+e.right)/2-f;else if(ne(r)){const K=Object.keys(r)[0],se=r[K];b=this.chart.scales[K].getPixelForValue(se)}k=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?U="top":l==="end"&&(U="bottom"));const ee=this._getLabelSizes();for(p=0,m=a.length;p<m;++p){v=a[p],x=v.label;const K=s.setContext(this.getContext(p));S=this.getPixelForTick(p)+s.labelOffset,I=this._resolveTickFontOptions(p),N=I.lineHeight,A=ke(x)?x.length:1;const se=A/2,ge=K.color,L=K.textStrokeColor,W=K.textStrokeWidth;let G=k;o?(b=S,k==="inner"&&(p===m-1?G=this.options.reverse?"left":"right":p===0?G=this.options.reverse?"right":"left":G="center"),r==="top"?c==="near"||y!==0?$=-A*N+N/2:c==="center"?$=-ee.highest.height/2-se*N+N:$=-ee.highest.height+N/2:c==="near"||y!==0?$=N/2:c==="center"?$=ee.highest.height/2-se*N:$=ee.highest.height-A*N,h&&($*=-1),y!==0&&!K.showLabelBackdrop&&(b+=N/2*Math.sin(y))):(E=S,$=(1-A)*N/2);let ye;if(K.showLabelBackdrop){const _e=_t(K.backdropPadding),Dn=ee.heights[p],Xt=ee.widths[p];let ti=$-_e.top,Jt=0-_e.left;switch(U){case"middle":ti-=Dn/2;break;case"bottom":ti-=Dn;break}switch(k){case"center":Jt-=Xt/2;break;case"right":Jt-=Xt;break}ye={left:Jt,top:ti,width:Xt+_e.width,height:Dn+_e.height,color:K.backdropColor}}w.push({label:x,font:I,textOffset:$,options:{rotation:y,color:ge,strokeColor:L,strokeWidth:W,textAlign:G,textBaseline:U,translation:[b,E],backdrop:ye}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-En(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Yr(e,this.left,o)-o/2,u=Yr(e,this.right,a)+a/2,h=d=l):(h=Yr(e,this.top,o)-o/2,d=Yr(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&np(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ws(i,c,0,u,l,a)}r&&ip(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Xe(i.font),o=_t(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ne(n)?(l+=o.bottom,ke(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=l3(this,l,n,a);Ws(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:d,textAlign:a3(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=J(e.grid&&e.grid.z,-1),r=J(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==no.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Xe(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;h3(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,c3(e,o,i),this.override&&Re.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Re[r]&&(delete Re[r][i],this.override&&delete Us[i])}}function c3(t,e,n){const i=zs(Object.create(null),[n?Re.get(n):{},Re.get(e),t.defaults]);Re.set(e,i),t.defaultRoutes&&u3(e,t.defaultRoutes),t.descriptors&&Re.describe(e,t.descriptors)}function u3(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Re.route(s,r,l,a)})}function h3(t){return"id"in t&&"defaults"in t}class d3{constructor(){this.controllers=new qu(Tn,"datasets",!0),this.elements=new qu(Li,"elements"),this.plugins=new qu(Object,"plugins"),this.scales=new qu(no,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):he(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=X0(e);me(i["before"+r],[],i),n[e](i),me(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Ln=new d3;class f3{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(me(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){re(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=J(i.options&&i.options.plugins,{}),s=p3(i);return r===!1&&!n?[]:m3(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function p3(t){const e={},n=[],i=Object.keys(Ln.plugins.items);for(let s=0;s<i.length;s++)n.push(Ln.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function g3(t,e){return!e&&t===!1?null:t===!0?{}:t}function m3(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=g3(i[l],r);c!==null&&s.push({plugin:a,options:y3(t.config,{plugin:a,local:n[l]},c,o)})}return s}function y3(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ry(t,e){const n=Re.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function v3(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function w3(t,e){return t===e?"_index_":"_value_"}function p1(t){if(t==="x"||t==="y"||t==="r")return t}function _3(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function sy(t,...e){if(p1(t))return t;for(const n of e){const i=n.axis||_3(n.position)||t.length>1&&p1(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function g1(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function x3(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return g1(t,"x",n[0])||g1(t,"y",n[0])}return{}}function b3(t,e){const n=Us[t.type]||{scales:{}},i=e.scales||{},r=ry(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ne(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=sy(o,a,x3(o,t),Re.scales[a.type]),c=w3(l,r),u=n.scales||{};s[o]=Sl(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||ry(a,e),u=(Us[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=v3(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),Sl(s[f],[{axis:d},i[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Sl(a,[Re.scales[a.type],Re.scale])}),s}function IA(t){const e=t.options||(t.options={});e.plugins=J(e.plugins,{}),e.scales=b3(t,e)}function TA(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function S3(t){return t=t||{},t.data=TA(t.data),IA(t),t}const m1=new Map,CA=new Set;function Ku(t,e){let n=m1.get(t);return n||(n=e(),m1.set(t,n),CA.add(n)),n}const Ha=(t,e,n)=>{const i=Or(e,n);i!==void 0&&t.add(i)};class E3{constructor(e){this._config=S3(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=TA(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),IA(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ku(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Ku(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Ku(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Ku(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Ha(l,e,h))),u.forEach(h=>Ha(l,r,h)),u.forEach(h=>Ha(l,Us[s]||{},h)),u.forEach(h=>Ha(l,Re,h)),u.forEach(h=>Ha(l,ty,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),CA.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Us[n]||{},Re.datasets[n]||{},{type:n},Re,ty]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=y1(this._resolverCache,e,r);let l=o;if(I3(o,n)){s.$shared=!1,i=Rr(i)?i():i;const c=this.createResolver(e,i,a);l=la(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=y1(this._resolverCache,e,i);return ne(n)?la(s,n,void 0,r):s}}function y1(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:iw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const k3=t=>ne(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||Rr(t[n]),!1);function I3(t,e){const{isScriptable:n,isIndexable:i}=oA(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Rr(a)||k3(a))||o&&ke(a))return!0}return!1}var T3="4.4.0";const C3=["top","bottom","left","right","chartArea"];function v1(t,e){return t==="top"||t==="bottom"||C3.indexOf(t)===-1&&e==="x"}function w1(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function _1(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),me(n&&n.onComplete,[t],e)}function N3(t){const e=t.chart,n=e.options.animation;me(n&&n.onProgress,[t],e)}function NA(t){return dA()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ph={},x1=t=>{const e=NA(t);return Object.values(Ph).filter(n=>n.canvas===e).pop()};function A3(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function D3(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function Gu(t,e,n){return t.options.clip?t[n]:e[n]}function P3(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Gu(n,e,"left"),right:Gu(n,e,"right"),top:Gu(i,e,"top"),bottom:Gu(i,e,"bottom")}:e}class Hi{static register(...e){Ln.add(...e),b1()}static unregister(...e){Ln.remove(...e),b1()}constructor(e,n){const i=this.config=new E3(n),r=NA(e),s=x1(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||QU(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Oz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new f3,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Yz(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Ph[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}si.listen(this,"complete",_1),si.listen(this,"progress",N3),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return re(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ln}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ub(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Bb(this.canvas,this.ctx),this}stop(){return si.stop(this),this}resize(e,n){si.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ub(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),me(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};he(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=sy(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),he(s,o=>{const a=o.options,l=a.id,c=sy(l,a),u=J(a.type,o.dtype);(a.position===void 0||v1(a.position,c)!==v1(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=Ln.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),he(r,(o,a)=>{o||delete i[a]}),he(i,o=>{It.configure(this,o,o.options),It.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(w1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||ry(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ln.getController(a),{datasetElementType:c,dataElementType:u}=Re.datasets[a];Object.assign(l,{dataElementType:Ln.getElement(u),datasetElementType:c&&Ln.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){he(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||he(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(w1("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){he(this.scales,e=>{It.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Db(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;A3(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Db(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;It.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],he(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Rr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(si.has(this)?this.attached&&!si.running(this)&&si.start(this):(this.draw(),_1({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=P3(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&np(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&ip(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return wi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=CU.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Kr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);wc(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),si.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Bb(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ph[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};he(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){he(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},he(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Fd(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=Bz(e),c=D3(e,this._lastEvent,i,l);i&&(this._lastEvent=null,me(s.onHover,[e,a,this],this),l&&me(s.onClick,[e,a,this],this));const u=!Fd(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}R(Hi,"defaults",Re),R(Hi,"instances",Ph),R(Hi,"overrides",Us),R(Hi,"registry",Ln),R(Hi,"version",T3),R(Hi,"getChart",x1);function b1(){return he(Hi.instances,t=>t._plugins.invalidate())}function M3(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Ke,i-Ke),t.closePath(),t.clip()}function O3(t){return nw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function R3(t,e,n,i){const r=O3(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return ot(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ot(r.innerStart,0,o),innerEnd:ot(r.innerEnd,0,o)}}function lo(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Ud(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const g=r-l;if(i){const K=u>0?u-i:0,se=h>0?h-i:0,ge=(K+se)/2,L=ge!==0?g*ge/(ge+i):g;f=(g-L)/2}const y=Math.max(.001,g*h-n/Ae)/h,w=(g-y)/2,p=l+w+f,m=r-w-f,{outerStart:v,outerEnd:x,innerStart:b,innerEnd:E}=R3(e,d,h,m-p),k=h-v,S=h-x,I=p+v/k,N=m-x/S,A=d+b,$=d+E,U=p+b/A,ee=m-E/$;if(t.beginPath(),s){const K=(I+N)/2;if(t.arc(o,a,h,I,K),t.arc(o,a,h,K,N),x>0){const W=lo(S,N,o,a);t.arc(W.x,W.y,x,N,m+Ke)}const se=lo($,m,o,a);if(t.lineTo(se.x,se.y),E>0){const W=lo($,ee,o,a);t.arc(W.x,W.y,E,m+Ke,ee+Math.PI)}const ge=(m-E/d+(p+b/d))/2;if(t.arc(o,a,d,m-E/d,ge,!0),t.arc(o,a,d,ge,p+b/d,!0),b>0){const W=lo(A,U,o,a);t.arc(W.x,W.y,b,U+Math.PI,p-Ke)}const L=lo(k,p,o,a);if(t.lineTo(L.x,L.y),v>0){const W=lo(k,I,o,a);t.arc(W.x,W.y,v,p-Ke,I)}}else{t.moveTo(o,a);const K=Math.cos(I)*h+o,se=Math.sin(I)*h+a;t.lineTo(K,se);const ge=Math.cos(N)*h+o,L=Math.sin(N)*h+a;t.lineTo(ge,L)}t.closePath()}function L3(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Ud(t,e,n,i,l,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Te||Te))}return Ud(t,e,n,i,l,r),t.fill(),l}function F3(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let g=e.endAngle;if(s){Ud(t,e,n,i,g,r);for(let y=0;y<s;++y)t.stroke();isNaN(a)||(g=o+(a%Te||Te))}f&&M3(t,e,g),s||(Ud(t,e,n,i,g,r),t.stroke())}class Io extends Li{constructor(n){super();R(this,"circumference");R(this,"endAngle");R(this,"fullCircles");R(this,"innerRadius");R(this,"outerRadius");R(this,"pixelMargin");R(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=YN(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,y=J(d,c-l)>=Te||_c(o,l,c),w=yi(a,u+f,h+f);return y&&w}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+o)/2,d=(a+l+u+c)/2;return{x:i+Math.cos(h)*d,y:r+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>Te?Math.floor(r/Te):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Ae,r||0)),u=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,L3(n,this,u,o,a),F3(n,this,u,o,a),n.restore()}}R(Io,"id","arc"),R(Io,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),R(Io,"defaultRoutes",{backgroundColor:"backgroundColor"}),R(Io,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function AA(t,e,n=e){t.lineCap=J(n.borderCapStyle,e.borderCapStyle),t.setLineDash(J(n.borderDash,e.borderDash)),t.lineDashOffset=J(n.borderDashOffset,e.borderDashOffset),t.lineJoin=J(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=J(n.borderWidth,e.borderWidth),t.strokeStyle=J(n.borderColor,e.borderColor)}function $3(t,e,n){t.lineTo(n.x,n.y)}function j3(t){return t.stepped?l5:t.tension||t.cubicInterpolationMode==="monotone"?c5:$3}function DA(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function B3(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=DA(r,n,i),u=j3(s);let{move:h=!0,reverse:d}=i||{},f,g,y;for(f=0;f<=c;++f)g=r[(a+(d?c-f:f))%o],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):u(t,y,g,d,s.stepped),y=g);return l&&(g=r[(a+(d?c:0))%o],u(t,y,g,d,s.stepped)),!!l}function V3(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=DA(r,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,g,y,w,p;const m=x=>(o+(c?a-x:x))%s,v=()=>{y!==w&&(t.lineTo(u,w),t.lineTo(u,y),t.lineTo(u,p))};for(l&&(f=r[m(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=r[m(d)],f.skip)continue;const x=f.x,b=f.y,E=x|0;E===g?(b<y?y=b:b>w&&(w=b),u=(h*u+x)/++h):(v(),t.lineTo(x,b),g=E,h=0,y=w=b),p=b}v()}function oy(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?V3:B3}function z3(t){return t.stepped?V5:t.tension||t.cubicInterpolationMode==="monotone"?z5:rs}function U3(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),AA(t,e.options),t.stroke(r)}function W3(t,e,n,i){const{segments:r,options:s}=e,o=oy(e);for(const a of r)AA(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const H3=typeof Path2D=="function";function q3(t,e,n,i){H3&&!e.options.segment?U3(t,e,n,i):W3(t,e,n,i)}class or extends Li{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;M5(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=G5(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=yA(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=z3(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],g=s[d];if(f===g){a.push(f);continue}const y=Math.abs((r-f[n])/(g[n]-f[n])),w=l(f,g,y,i.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,i){return oy(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=oy(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),q3(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}R(or,"id","line"),R(or,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),R(or,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),R(or,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function S1(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Cl extends Li{constructor(n){super();R(this,"parsed");R(this,"skip");R(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return S1(this,n,"x",i)}inYRange(n,i){return S1(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!wi(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,ny(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}R(Cl,"id","point"),R(Cl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),R(Cl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function PA(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function ar(t,e,n,i){return t?0:ot(e,n,i)}function K3(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=sA(i);return{t:ar(r.top,s.top,0,n),r:ar(r.right,s.right,0,e),b:ar(r.bottom,s.bottom,0,n),l:ar(r.left,s.left,0,e)}}function G3(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=Es(r),o=Math.min(e,n),a=t.borderSkipped,l=i||ne(r);return{topLeft:ar(!l||a.top||a.left,s.topLeft,0,o),topRight:ar(!l||a.top||a.right,s.topRight,0,o),bottomLeft:ar(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:ar(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Q3(t){const e=PA(t),n=e.right-e.left,i=e.bottom-e.top,r=K3(t,n/2,i/2),s=G3(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function lg(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&PA(t,i);return a&&(r||yi(e,a.left,a.right))&&(s||yi(n,a.top,a.bottom))}function Y3(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function X3(t,e){t.rect(e.x,e.y,e.w,e.h)}function cg(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class Nl extends Li{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=Q3(this),a=Y3(o.radius)?xc:X3;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,cg(o,n,s)),e.clip(),a(e,cg(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,cg(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return lg(this,e,n,i)}inXRange(e,n){return lg(this,e,null,n)}inYRange(e,n){return lg(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}R(Nl,"id","bar"),R(Nl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),R(Nl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var J3=Object.freeze({__proto__:null,ArcElement:Io,BarElement:Nl,LineElement:or,PointElement:Cl});const ay=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],E1=ay.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function MA(t){return ay[t%ay.length]}function OA(t){return E1[t%E1.length]}function Z3(t,e){return t.borderColor=MA(e),t.backgroundColor=OA(e),++e}function e9(t,e){return t.backgroundColor=t.data.map(()=>MA(e++)),e}function t9(t,e){return t.backgroundColor=t.data.map(()=>OA(e++)),e}function n9(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof vs?e=e9(n,e):r instanceof Tl?e=t9(n,e):r&&(e=Z3(n,e))}}function k1(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function i9(t){return t&&(t.borderColor||t.backgroundColor)}var r9={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:s}=r;if(!n.forceOverride&&(k1(i)||i9(r)||s&&k1(s)))return;const o=n9(t);i.forEach(o)}};function s9(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,h,d,f,g,y;for(o[l++]=t[u],h=0;h<s-2;h++){let w=0,p=0,m;const v=Math.floor((h+1)*a)+1+e,x=Math.min(Math.floor((h+2)*a)+1,n)+e,b=x-v;for(m=v;m<x;m++)w+=t[m].x,p+=t[m].y;w/=b,p/=b;const E=Math.floor(h*a)+1+e,k=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:S,y:I}=t[u];for(f=g=-1,m=E;m<k;m++)g=.5*Math.abs((S-w)*(t[m].y-I)-(S-t[m].x)*(p-I)),g>f&&(f=g,d=t[m],y=m);o[l++]=d,u=y}return o[l++]=t[c],o}function o9(t,e,n,i){let r=0,s=0,o,a,l,c,u,h,d,f,g,y;const w=[],p=e+n-1,m=t[e].x,x=t[p].x-m;for(o=e;o<e+n;++o){a=t[o],l=(a.x-m)/x*i,c=a.y;const b=l|0;if(b===u)c<g?(g=c,h=o):c>y&&(y=c,d=o),r=(s*r+a.x)/++s;else{const E=o-1;if(!re(h)&&!re(d)){const k=Math.min(h,d),S=Math.max(h,d);k!==f&&k!==E&&w.push({...t[k],x:r}),S!==f&&S!==E&&w.push({...t[S],x:r})}o>0&&E!==f&&w.push(t[E]),w.push(a),u=b,s=0,g=y=c,h=d=f=o}}return w}function RA(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function I1(t){t.data.datasets.forEach(e=>{RA(e)})}function a9(t,e){const n=e.length;let i=0,r;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=ot(vi(e,s.axis,o).lo,0,n-1)),c?r=ot(vi(e,s.axis,a).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var l9={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){I1(t);return}const i=t.width;t.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=t.getDatasetMeta(s),c=o||r.data;if(be([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:d}=a9(l,c);const f=n.threshold||4*i;if(d<=f){RA(r);return}re(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let g;switch(n.algorithm){case"lttb":g=s9(c,h,d,i,n);break;case"min-max":g=o9(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=g})},destroy(t){I1(t)}};function c9(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=lw(l,c,r);const u=ly(n,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const h=yA(e,u);for(const d of h){const f=ly(n,s[d.start],s[d.end],d.loop),g=mA(a,r,f);for(const y of g)o.push({source:y,target:d,start:{[n]:T1(u,f,"start",Math.max)},end:{[n]:T1(u,f,"end",Math.min)}})}}return o}function ly(t,e,n,i){if(i)return;let r=e[t],s=n[t];return t==="angle"&&(r=tn(r),s=tn(s)),{property:t,start:r,end:s}}function u9(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=lw(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function lw(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function T1(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function LA(t,e){let n=[],i=!1;return ke(t)?(i=!0,n=t):n=u9(t,e),n.length?new or({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function C1(t){return t&&t.fill!==!1}function h9(t,e,n){let r=t[e].fill;const s=[e];let o;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ve(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function d9(t,e,n){const i=m9(t);if(ne(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ve(r)&&Math.floor(r)===r?f9(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function f9(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function p9(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ne(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function g9(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:ne(t)?i=t.value:i=e.getBaseValue(),i}function m9(t){const e=t.options,n=e.fill;let i=J(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function y9(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=v9(e,n);a.push(LA({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)w9(r,o[u],a)}return new or({points:r,options:{}})}function v9(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function w9(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=_9(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function _9(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][n],d=o[u.end][n];if(yi(r,h,d)){a=r===h,l=r===d;break}}return{first:a,last:l,point:i}}class FA{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:s,radius:o}=this;return n=n||{start:0,end:Te},e.arc(r,s,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,s=e.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function x9(t){const{chart:e,fill:n,line:i}=t;if(Ve(n))return b9(e,n);if(n==="stack")return y9(t);if(n==="shape")return!0;const r=S9(t);return r instanceof FA?r:LA(r,i)}function b9(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function S9(t){return(t.scale||{}).getPointPositionForValue?k9(t):E9(t)}function E9(t){const{scale:e={},fill:n}=t,i=p9(n,e);if(Ve(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function k9(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=g9(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new FA({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function ug(t,e,n){const i=x9(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(np(t,n),I9(t,{line:r,target:i,above:u,below:h,area:n,scale:s,axis:o}),ip(t))}function I9(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==r&&(N1(t,i,o.top),A1(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),N1(t,i,o.bottom)),A1(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore()}function N1(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],h=r[lw(l,c,r)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function A1(t,e){const{line:n,target:i,property:r,color:s,scale:o}=e,a=c9(n,i,r);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=s}={}}=l,f=i!==!0;t.save(),t.fillStyle=d,T9(t,o,f&&ly(r,u,h)),t.beginPath();const g=!!n.pathSegment(t,l);let y;if(f){g?t.closePath():D1(t,i,h,r);const w=!!i.pathSegment(t,c,{move:g,reverse:!0});y=g&&w,y||D1(t,i,u,r)}t.closePath(),t.fill(y?"evenodd":"nonzero"),t.restore()}}function T9(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,i,a-o,r-i),t.clip())}function D1(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var C9={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof or&&(l={visible:t.isDatasetVisible(o),index:o,fill:d9(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=h9(r,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&ug(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;C1(s)&&ug(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!C1(i)||n.drawTime!=="beforeDatasetDraw"||ug(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const P1=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},N9=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class M1 extends Li{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=me(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Xe(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=P1(i,s);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((g,y)=>{const w=i+n/2+s.measureText(g.text).width;(y===0||c[c.length-1]+w+2*a>o)&&(h+=u,c[c.length-(y>0?0:1)]=0,f+=u,d++),l[y]={left:0,top:f,row:d,width:w,height:r},c[c.length-1]+=w+a}),h}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,g=0,y=0;return this.legendItems.forEach((w,p)=>{const{itemWidth:m,itemHeight:v}=A9(i,n,s,w,r);p>0&&f+v+2*a>u&&(h+=d+a,c.push({width:d,height:f}),g+=d+a,y++,d=f=0),l[p]={left:g,top:f,col:y,width:m,height:v},d=Math.max(d,m),f+=v+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=jo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Et(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Et(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Et(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Et(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;np(e,this),this._draw(),ip(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Re.color,l=jo(e.rtl,this.left,this.width),c=Xe(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:g,boxHeight:y,itemHeight:w}=P1(o,h),p=function(E,k,S){if(isNaN(g)||g<=0||isNaN(y)||y<0)return;r.save();const I=J(S.lineWidth,1);if(r.fillStyle=J(S.fillStyle,a),r.lineCap=J(S.lineCap,"butt"),r.lineDashOffset=J(S.lineDashOffset,0),r.lineJoin=J(S.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=J(S.strokeStyle,a),r.setLineDash(J(S.lineDash,[])),o.usePointStyle){const N={radius:y*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:I},A=l.xPlus(E,g/2),$=k+d;rA(r,N,A,$,o.pointStyleWidth&&g)}else{const N=k+Math.max((h-y)/2,0),A=l.leftForLtr(E,g),$=Es(S.borderRadius);r.beginPath(),Object.values($).some(U=>U!==0)?xc(r,{x:A,y:N,w:g,h:y,radius:$}):r.rect(A,N,g,y),r.fill(),I!==0&&r.stroke()}r.restore()},m=function(E,k,S){Ws(r,S.text,E,k+w/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();v?f={x:Et(s,this.left+u,this.right-i[0]),y:this.top+u+x,line:0}:f={x:this.left+u,y:Et(s,this.top+x+u,this.bottom-n[0].height),line:0},fA(this.ctx,e.textDirection);const b=w+u;this.legendItems.forEach((E,k)=>{r.strokeStyle=E.fontColor,r.fillStyle=E.fontColor;const S=r.measureText(E.text).width,I=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),N=g+d+S;let A=f.x,$=f.y;l.setWidth(this.width),v?k>0&&A+N+u>this.right&&($=f.y+=b,f.line++,A=f.x=Et(s,this.left+u,this.right-i[f.line])):k>0&&$+b>this.bottom&&(A=f.x=A+n[f.line].width+u,f.line++,$=f.y=Et(s,this.top+x+u,this.bottom-n[f.line].height));const U=l.x(A);if(p(U,$,E),A=Xz(I,A+g+d,v?A+N:this.right,e.rtl),m(l.x(A),$,E),v)f.x+=N+u;else if(typeof E.text!="string"){const ee=c.lineHeight;f.y+=$A(E,ee)+u}else f.y+=b}),pA(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Xe(n.font),r=_t(n.padding);if(!n.display)return;const s=jo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Et(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((y,w)=>Math.max(y,w.height),0);u=c+Et(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=Et(a,h,h+d);o.textAlign=s.textAlign(ew(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Ws(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=Xe(e.font),i=_t(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(yi(e,this.left,this.right)&&yi(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],yi(e,r.left,r.left+r.width)&&yi(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!M9(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=N9(r,i);r&&!s&&me(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&me(n.onHover,[e,i,this],this)}else i&&me(n.onClick,[e,i,this],this)}}function A9(t,e,n,i,r){const s=D9(i,t,e,n),o=P9(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function D9(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function P9(t,e,n){let i=t;return typeof e.text!="string"&&(i=$A(e,n)),i}function $A(t,e){const n=t.text?t.text.length:0;return e*n}function M9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var O9={id:"legend",_element:M1,start(t,e,n){const i=t.legend=new M1({ctx:t.ctx,options:n,chart:t});It.configure(t,i,n),It.addBox(t,i)},stop(t){It.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;It.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=_t(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class cw extends Li{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=ke(i.text)?i.text.length:1;this._padding=_t(i.padding);const s=r*Xe(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Et(a,i,s),h=n+e,c=s-i):(o.position==="left"?(u=i+e,h=Et(a,r,n),l=Ae*-.5):(u=s-e,h=Et(a,n,r),l=Ae*.5),c=r-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Xe(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Ws(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:ew(n.align),textBaseline:"middle",translation:[o,a]})}}function R9(t,e){const n=new cw({ctx:t.ctx,options:e,chart:t});It.configure(t,n,e),It.addBox(t,n),t.titleBlock=n}var L9={id:"title",_element:cw,start(t,e,n){R9(t,n)},stop(t){const e=t.titleBlock;It.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;It.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Qu=new WeakMap;var F9={id:"subtitle",start(t,e,n){const i=new cw({ctx:t.ctx,options:n,chart:t});It.configure(t,i,n),It.addBox(t,i),Qu.set(t,i)},stop(t){It.removeBox(t,Qu.get(t)),Qu.delete(t)},beforeUpdate(t,e,n){const i=Qu.get(t);It.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rl={average(t){if(!t.length)return!1;let e,n,i=0,r=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,r+=a.y,++s}}return{x:i/s,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ey(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Mn(t,e){return e&&(ke(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function oi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function $9(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function O1(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Xe(e.bodyFont),c=Xe(e.titleFont),u=Xe(e.footerFont),h=s.length,d=r.length,f=i.length,g=_t(e.padding);let y=g.height,w=0,p=i.reduce((x,b)=>x+b.before.length+b.lines.length+b.after.length,0);if(p+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),p){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=f*x+(p-f)*l.lineHeight+(p-1)*e.bodySpacing}d&&(y+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let m=0;const v=function(x){w=Math.max(w,n.measureText(x).width+m)};return n.save(),n.font=c.string,he(t.title,v),n.font=l.string,he(t.beforeBody.concat(t.afterBody),v),m=e.displayColors?o+2+e.boxPadding:0,he(i,x=>{he(x.before,v),he(x.lines,v),he(x.after,v)}),m=0,n.font=u.string,he(t.footer,v),n.restore(),w+=g.width,{width:w,height:y}}function j9(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function B9(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function V9(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),B9(c,t,e,n)&&(c="center"),c}function R1(t,e,n){const i=n.yAlign||e.yAlign||j9(t,n);return{xAlign:n.xAlign||e.xAlign||V9(t,e,n,i),yAlign:i}}function z9(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function U9(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function L1(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Es(o);let g=z9(e,a);const y=U9(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,d)+r:a==="right"&&(g+=Math.max(h,f)+r),{x:ot(g,0,i.width-e.width),y:ot(y,0,i.height-e.height)}}function Yu(t,e,n){const i=_t(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function F1(t){return Mn([],oi(t))}function W9(t,e,n){return Kr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function $1(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const jA={beforeTitle:ii,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:ii,beforeBody:ii,beforeLabel:ii,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return re(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ii,afterBody:ii,beforeFooter:ii,footer:ii,afterFooter:ii};function jt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?jA[e].call(n,i):r}class cy extends Li{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new vA(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=W9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=jt(i,"beforeTitle",this,e),s=jt(i,"title",this,e),o=jt(i,"afterTitle",this,e);let a=[];return a=Mn(a,oi(r)),a=Mn(a,oi(s)),a=Mn(a,oi(o)),a}getBeforeBody(e,n){return F1(jt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return he(e,s=>{const o={before:[],lines:[],after:[]},a=$1(i,s);Mn(o.before,oi(jt(a,"beforeLabel",this,s))),Mn(o.lines,jt(a,"label",this,s)),Mn(o.after,oi(jt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return F1(jt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=jt(i,"beforeFooter",this,e),s=jt(i,"footer",this,e),o=jt(i,"afterFooter",this,e);let a=[];return a=Mn(a,oi(r)),a=Mn(a,oi(s)),a=Mn(a,oi(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push($9(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),he(a,u=>{const h=$1(e.callbacks,u);r.push(jt(h,"labelColor",this,u)),s.push(jt(h,"labelPointStyle",this,u)),o.push(jt(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=rl[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=O1(this,i),c=Object.assign({},a,l),u=R1(this.chart,i,c),h=L1(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Es(a),{x:d,y:f}=e,{width:g,height:y}=n;let w,p,m,v,x,b;return s==="center"?(x=f+y/2,r==="left"?(w=d,p=w-o,v=x+o,b=x-o):(w=d+g,p=w+o,v=x-o,b=x+o),m=w):(r==="left"?p=d+Math.max(l,u)+o:r==="right"?p=d+g-Math.max(c,h)-o:p=this.caretX,s==="top"?(v=f,x=v-o,w=p-o,m=p+o):(v=f+y,x=v+o,w=p+o,m=p-o),b=v),{x1:w,x2:p,x3:m,y1:v,y2:x,y3:b}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=jo(i.rtl,this.x,this.width);for(e.x=Yu(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Xe(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=Xe(s.bodyFont),h=Yu(this,"left",s),d=r.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+f;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(d,c)+c/2,p=g+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,ny(e,y,w,p),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,ny(e,y,w,p)}else{e.lineWidth=ne(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=r.leftForLtr(d,c),w=r.leftForLtr(r.xPlus(d,1),c-2),p=Es(o.borderRadius);Object.values(p).some(m=>m!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,xc(e,{x:y,y:g,w:c,h:l,radius:p}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),xc(e,{x:w,y:g+1,w:c-2,h:l-2,radius:p}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(y,g,c,l),e.strokeRect(y,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=Xe(i.bodyFont);let d=h.lineHeight,f=0;const g=jo(i.rtl,this.x,this.width),y=function(S){n.fillText(S,g.x(e.x+f),e.y+d/2),e.y+=d+s},w=g.textAlign(o);let p,m,v,x,b,E,k;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Yu(this,w,i),n.fillStyle=i.bodyColor,he(this.beforeBody,y),f=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,E=r.length;x<E;++x){for(p=r[x],m=this.labelTextColors[x],n.fillStyle=m,he(p.before,y),v=p.lines,a&&v.length&&(this._drawColorBox(n,e,x,g,i),d=Math.max(h.lineHeight,l)),b=0,k=v.length;b<k;++b)y(v[b]),d=h.lineHeight;he(p.after,y)}f=0,d=h.lineHeight,he(this.afterBody,y),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=jo(i.rtl,this.x,this.width);for(e.x=Yu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Xe(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Es(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=rl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=O1(this,e),l=Object.assign({},o,this._size),c=R1(n,e,l),u=L1(e,l,c,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=_t(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),fA(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),pA(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Fd(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Fd(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n;const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=rl[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}R(cy,"positioners",rl);var H9={id:"tooltip",_element:cy,positioners:rl,afterInit(t,e,n){n&&(t.tooltip=new cy({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},q9=Object.freeze({__proto__:null,Colors:r9,Decimation:l9,Filler:C9,Legend:O9,SubTitle:F9,Title:L9,Tooltip:H9});const K9=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function G9(t,e,n,i){const r=t.indexOf(e);if(r===-1)return K9(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const Q9=(t,e)=>t===null?null:ot(Math.round(t),0,e);function j1(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class uy extends no{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(re(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:G9(i,e,J(n,e),this._addedLabels),Q9(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return j1.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}R(uy,"id","category"),R(uy,"defaults",{ticks:{callback:j1}});function Y9(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=s||1,g=u-1,{min:y,max:w}=e,p=!re(o),m=!re(a),v=!re(c),x=(w-y)/(h+1);let b=Mb((w-y)/g/f)*f,E,k,S,I;if(b<1e-14&&!p&&!m)return[{value:y},{value:w}];I=Math.ceil(w/b)-Math.floor(y/b),I>g&&(b=Mb(I*b/g/f)*f),re(l)||(E=Math.pow(10,l),b=Math.ceil(b*E)/E),r==="ticks"?(k=Math.floor(y/b)*b,S=Math.ceil(w/b)*b):(k=y,S=w),p&&m&&s&&Wz((a-o)/s,b/1e3)?(I=Math.round(Math.min((a-o)/b,u)),b=(a-o)/I,k=o,S=a):v?(k=p?o:k,S=m?a:S,I=c-1,b=(S-k)/I):(I=(S-k)/b,El(I,Math.round(I),b/1e3)?I=Math.round(I):I=Math.ceil(I));const N=Math.max(Ob(b),Ob(k));E=Math.pow(10,re(l)?N:l),k=Math.round(k*E)/E,S=Math.round(S*E)/E;let A=0;for(p&&(d&&k!==o?(n.push({value:o}),k<o&&A++,El(Math.round((k+A*b)*E)/E,o,B1(o,x,t))&&A++):k<o&&A++);A<I;++A){const $=Math.round((k+A*b)*E)/E;if(m&&$>a)break;n.push({value:$})}return m&&d&&S!==a?n.length&&El(n[n.length-1].value,a,B1(a,x,t))?n[n.length-1].value=a:n.push({value:a}):(!m||S===a)&&n.push({value:S}),n}function B1(t,e,{horizontal:n,minRotation:i}){const r=En(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Wd extends no{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return re(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Yn(r),c=Yn(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Y9(r,s);return e.bounds==="ticks"&&QN(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return su(e,this.chart.options.locale,this.options.ticks.format)}}class hy extends Wd{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ve(e)?e:0,this.max=Ve(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=En(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}R(hy,"id","linear"),R(hy,"defaults",{ticks:{callback:tp.formatters.numeric}});const Sc=t=>Math.floor(sr(t)),Jr=(t,e)=>Math.pow(10,Sc(t)+e);function V1(t){return t/Math.pow(10,Sc(t))===1}function z1(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function X9(t,e){const n=e-t;let i=Sc(n);for(;z1(t,e,i)>10;)i++;for(;z1(t,e,i)<10;)i--;return Math.min(i,Sc(t))}function J9(t,{min:e,max:n}){e=Zt(t.min,e);const i=[],r=Sc(e);let s=X9(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),d=Zt(t.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;d<n;)i.push({value:d,major:V1(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=Zt(t.max,d);return i.push({value:f,major:V1(f),significand:h}),i}class dy extends no{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Wd.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Ve(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ve(e)?Math.max(0,e):null,this.max=Ve(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ve(this._userMin)&&(this.min=e===Jr(this.min,0)?Jr(this.min,-1):Jr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Jr(i,-1)),o(Jr(r,1)))),i<=0&&s(Jr(r,-1)),r<=0&&o(Jr(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=J9(n,this);return e.bounds==="ticks"&&QN(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":su(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=sr(e),this._valueRange=sr(this.max)-sr(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(sr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}R(dy,"id","logarithmic"),R(dy,"defaults",{ticks:{callback:tp.formatters.logarithmic,major:{enabled:!0}}});function fy(t){const e=t.ticks;if(e.display&&t.display){const n=_t(e.backdropPadding);return J(e.font&&e.font.size,Re.font.size)+n.height}return 0}function Z9(t,e,n){return n=ke(n)?n:[n],{w:a5(t,e.string,n),h:n.length*e.lineHeight}}function U1(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function e6(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Ae/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+r[l],a),h=Xe(c.font),d=Z9(t.ctx,h,t._pointLabels[l]);i[l]=d;const f=tn(t.getIndexAngle(l)+a),g=Math.round(J0(f)),y=U1(g,u.x,d.w,0,180),w=U1(g,u.y,d.h,90,270);t6(n,e,f,y,w)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=r6(t,i,r)}function t6(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function n6(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(J0(tn(l.angle+Ke))),u=a6(l.y,a.h,c),h=s6(c),d=o6(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function i6(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(wi({x:n,y:i},e)||wi({x:n,y:s},e)||wi({x:r,y:i},e)||wi({x:r,y:s},e))}function r6(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:fy(s)/2,additionalAngle:o?Ae/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const h=n6(t,u,l);i.push(h),a==="auto"&&(h.visible=i6(h,c),h.visible&&(c=h))}return i}function s6(t){return t===0||t===180?"center":t<180?"left":"right"}function o6(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function a6(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function l6(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!re(a)){const l=Es(e.borderRadius),c=_t(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=r-c.top,d=s-i+c.width,f=o-r+c.height;Object.values(l).some(g=>g!==0)?(t.beginPath(),xc(t,{x:u,y:h,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,h,d,f)}}function c6(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));l6(n,o,s);const a=Xe(o.font),{x:l,y:c,textAlign:u}=s;Ws(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function BA(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Te);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function u6(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),BA(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function h6(t,e,n){return Kr(t,{label:n,index:e,type:"pointLabel"})}class sl extends Wd{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=_t(fy(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Ve(e)&&!isNaN(e)?e:0,this.max=Ve(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/fy(this.options))}generateTickLabels(e){Wd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=me(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?e6(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=Te/(this._pointLabels.length||1),i=this.options.startAngle||0;return tn(e*n+En(i))}getDistanceFromCenterForValue(e){if(re(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(re(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return h6(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Ke+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),BA(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&c6(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=r.setContext(d),g=s.setContext(d);u6(this,f,l,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=Xe(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=_t(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Ws(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}R(sl,"id","radialLinear"),R(sl,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:tp.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),R(sl,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),R(sl,"descriptors",{angleLines:{_fallback:"grid"}});const sp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zt=Object.keys(sp);function W1(t,e){return t-e}function H1(t,e){if(re(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Ve(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(aa(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function q1(t,e,n,i){const r=zt.length;for(let s=zt.indexOf(t);s<r-1;++s){const o=sp[zt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return zt[s]}return zt[r-1]}function d6(t,e,n,i,r){for(let s=zt.length-1;s>=zt.indexOf(n);s--){const o=zt[s];if(sp[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return zt[n?zt.indexOf(n):0]}function f6(t){for(let e=zt.indexOf(t)+1,n=zt.length;e<n;++e)if(sp[zt[e]].common)return zt[e]}function K1(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Z0(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function p6(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function G1(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:p6(t,i,r,n)}class Ec extends no{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new SU._date(e.adapters.date);r.init(n),Sl(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:H1(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Ve(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Ve(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=Gz(r,s,o);return this._unit=n.unit||(i.autoSkip?q1(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):d6(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:f6(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),G1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ot(n,0,o),i=ot(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||q1(s.minUnit,n,i,this._getLabelCapacity(n)),a=J(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=aa(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)K1(u,d,g);return(d===i||r.bounds==="ticks"||f===1)&&K1(u,d,g),Object.keys(u).sort(W1).map(y=>+y)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return me(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(e,r||(f?h:u))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=En(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,G1(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(H1(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return JN(e.sort(W1))}}R(Ec,"id","time"),R(Ec,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Xu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=vi(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=vi(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class py extends Ec{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Xu(n,this.min),this._tableRange=Xu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Xu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Xu(this._table,i*this._tableRange+this._minPos,!0)}}R(py,"id","timeseries"),R(py,"defaults",Ec.defaults);var g6=Object.freeze({__proto__:null,CategoryScale:uy,LinearScale:hy,LogarithmicScale:dy,RadialLinearScale:sl,TimeScale:Ec,TimeSeriesScale:py});const m6=[bU,J3,q9,g6];Hi.register(...m6);/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Q1=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),Mh={toTextLines:function(t){var e=[],n;for(t=[].concat(t);t.length;)n=t.pop(),typeof n=="string"?e.unshift.apply(e,n.split(`
`)):Array.isArray(n)?t.push.apply(t,n):re(t)||e.unshift(""+n);return e},textSize:function(t,e,n){var i=[].concat(e),r=i.length,s=t.font,o=0,a;for(t.font=n.string,a=0;a<r;++a)o=Math.max(t.measureText(i[a]).width,o);return t.font=s,{height:r*n.lineHeight,width:o}},bound:function(t,e,n){return Math.max(t,Math.min(e,n))},arrayDiff:function(t,e){var n=t.slice(),i=[],r,s,o,a;for(r=0,o=e.length;r<o;++r)a=e[r],s=n.indexOf(a),s===-1?i.push([a,1]):n.splice(s,1);for(r=0,o=n.length;r<o;++r)i.push([n[r],-1]);return i},rasterize:function(t){return Math.round(t*Q1)/Q1}};function hg(t,e){var n=e.x,i=e.y;if(n===null)return{x:0,y:-1};if(i===null)return{x:1,y:0};var r=t.x-n,s=t.y-i,o=Math.sqrt(r*r+s*s);return{x:o?r/o:0,y:o?s/o:-1}}function y6(t,e,n,i,r){switch(r){case"center":n=i=0;break;case"bottom":n=0,i=1;break;case"right":n=1,i=0;break;case"left":n=-1,i=0;break;case"top":n=0,i=-1;break;case"start":n=-n,i=-i;break;case"end":break;default:r*=Math.PI/180,n=Math.cos(r),i=Math.sin(r);break}return{x:t,y:e,vx:n,vy:i}}var v6=0,VA=1,zA=2,UA=4,WA=8;function Ju(t,e,n){var i=v6;return t<n.left?i|=VA:t>n.right&&(i|=zA),e<n.top?i|=WA:e>n.bottom&&(i|=UA),i}function w6(t,e){for(var n=t.x0,i=t.y0,r=t.x1,s=t.y1,o=Ju(n,i,e),a=Ju(r,s,e),l,c,u;!(!(o|a)||o&a);)l=o||a,l&WA?(c=n+(r-n)*(e.top-i)/(s-i),u=e.top):l&UA?(c=n+(r-n)*(e.bottom-i)/(s-i),u=e.bottom):l&zA?(u=i+(s-i)*(e.right-n)/(r-n),c=e.right):l&VA&&(u=i+(s-i)*(e.left-n)/(r-n),c=e.left),l===o?(n=c,i=u,o=Ju(n,i,e)):(r=c,s=u,a=Ju(r,s,e));return{x0:n,x1:r,y0:i,y1:s}}function Zu(t,e){var n=e.anchor,i=t,r,s;return e.clamp&&(i=w6(i,e.area)),n==="start"?(r=i.x0,s=i.y0):n==="end"?(r=i.x1,s=i.y1):(r=(i.x0+i.x1)/2,s=(i.y0+i.y1)/2),y6(r,s,t.vx,t.vy,e.align)}var eh={arc:function(t,e){var n=(t.startAngle+t.endAngle)/2,i=Math.cos(n),r=Math.sin(n),s=t.innerRadius,o=t.outerRadius;return Zu({x0:t.x+i*s,y0:t.y+r*s,x1:t.x+i*o,y1:t.y+r*o,vx:i,vy:r},e)},point:function(t,e){var n=hg(t,e.origin),i=n.x*t.options.radius,r=n.y*t.options.radius;return Zu({x0:t.x-i,y0:t.y-r,x1:t.x+i,y1:t.y+r,vx:n.x,vy:n.y},e)},bar:function(t,e){var n=hg(t,e.origin),i=t.x,r=t.y,s=0,o=0;return t.horizontal?(i=Math.min(t.x,t.base),s=Math.abs(t.base-t.x)):(r=Math.min(t.y,t.base),o=Math.abs(t.base-t.y)),Zu({x0:i,y0:r+o,x1:i+s,y1:r,vx:n.x,vy:n.y},e)},fallback:function(t,e){var n=hg(t,e.origin);return Zu({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:n.x,vy:n.y},e)}},_i=Mh.rasterize;function _6(t){var e=t.borderWidth||0,n=t.padding,i=t.size.height,r=t.size.width,s=-r/2,o=-i/2;return{frame:{x:s-n.left-e,y:o-n.top-e,w:r+n.width+e*2,h:i+n.height+e*2},text:{x:s,y:o,w:r,h:i}}}function x6(t,e){var n=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var i=n.getBasePixel();return t.horizontal?{x:i,y:null}:{x:null,y:i}}function b6(t){return t instanceof Io?eh.arc:t instanceof Cl?eh.point:t instanceof Nl?eh.bar:eh.fallback}function S6(t,e,n,i,r,s){var o=Math.PI/2;if(s){var a=Math.min(s,r/2,i/2),l=e+a,c=n+a,u=e+i-a,h=n+r-a;t.moveTo(e,c),l<u&&c<h?(t.arc(l,c,a,-Math.PI,-o),t.arc(u,c,a,-o,0),t.arc(u,h,a,0,o),t.arc(l,h,a,o,Math.PI)):l<u?(t.moveTo(l,n),t.arc(u,c,a,-o,o),t.arc(l,c,a,o,Math.PI+o)):c<h?(t.arc(l,c,a,-Math.PI,0),t.arc(l,h,a,0,Math.PI)):t.arc(l,c,a,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,i,r)}function E6(t,e,n){var i=n.backgroundColor,r=n.borderColor,s=n.borderWidth;!i&&(!r||!s)||(t.beginPath(),S6(t,_i(e.x)+s/2,_i(e.y)+s/2,_i(e.w)-s,_i(e.h)-s,n.borderRadius),t.closePath(),i&&(t.fillStyle=i,t.fill()),r&&s&&(t.strokeStyle=r,t.lineWidth=s,t.lineJoin="miter",t.stroke()))}function k6(t,e,n){var i=n.lineHeight,r=t.w,s=t.x,o=t.y+i/2;return e==="center"?s+=r/2:(e==="end"||e==="right")&&(s+=r),{h:i,w:r,x:s,y:o}}function I6(t,e,n){var i=t.shadowBlur,r=n.stroked,s=_i(n.x),o=_i(n.y),a=_i(n.w);r&&t.strokeText(e,s,o,a),n.filled&&(i&&r&&(t.shadowBlur=0),t.fillText(e,s,o,a),i&&r&&(t.shadowBlur=i))}function T6(t,e,n,i){var r=i.textAlign,s=i.color,o=!!s,a=i.font,l=e.length,c=i.textStrokeColor,u=i.textStrokeWidth,h=c&&u,d;if(!(!l||!o&&!h))for(n=k6(n,r,a),t.font=a.string,t.textAlign=r,t.textBaseline="middle",t.shadowBlur=i.textShadowBlur,t.shadowColor=i.textShadowColor,o&&(t.fillStyle=s),h&&(t.lineJoin="round",t.lineWidth=u,t.strokeStyle=c),d=0,l=e.length;d<l;++d)I6(t,e[d],{stroked:h,filled:o,w:n.w,x:n.x,y:n.y+n.h*d})}var C6=function(t,e,n,i){var r=this;r._config=t,r._index=i,r._model=null,r._rects=null,r._ctx=e,r._el=n};zs(C6.prototype,{_modelize:function(t,e,n,i){var r=this,s=r._index,o=Xe(be([n.font,{}],i,s)),a=be([n.color,Re.color],i,s);return{align:be([n.align,"center"],i,s),anchor:be([n.anchor,"center"],i,s),area:i.chart.chartArea,backgroundColor:be([n.backgroundColor,null],i,s),borderColor:be([n.borderColor,null],i,s),borderRadius:be([n.borderRadius,0],i,s),borderWidth:be([n.borderWidth,0],i,s),clamp:be([n.clamp,!1],i,s),clip:be([n.clip,!1],i,s),color:a,display:t,font:o,lines:e,offset:be([n.offset,4],i,s),opacity:be([n.opacity,1],i,s),origin:x6(r._el,i),padding:_t(be([n.padding,4],i,s)),positioner:b6(r._el),rotation:be([n.rotation,0],i,s)*(Math.PI/180),size:Mh.textSize(r._ctx,e,o),textAlign:be([n.textAlign,"start"],i,s),textShadowBlur:be([n.textShadowBlur,0],i,s),textShadowColor:be([n.textShadowColor,a],i,s),textStrokeColor:be([n.textStrokeColor,a],i,s),textStrokeWidth:be([n.textStrokeWidth,0],i,s)}},update:function(t){var e=this,n=null,i=null,r=e._index,s=e._config,o,a,l,c=be([s.display,!0],t,r);c&&(o=t.dataset.data[r],a=J(me(s.formatter,[o,t]),o),l=re(a)?[]:Mh.toTextLines(a),l.length&&(n=e._modelize(c,l,s,t),i=_6(n))),e._model=n,e._rects=i},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var n=this,i=t.ctx,r=n._model,s=n._rects,o;this.visible()&&(i.save(),r.clip&&(o=r.area,i.beginPath(),i.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),i.clip()),i.globalAlpha=Mh.bound(0,r.opacity,1),i.translate(_i(e.x),_i(e.y)),i.rotate(r.rotation),E6(i,s.frame,r),T6(i,r.lines,s.text,r),i.restore())}});var N6=Number.MIN_SAFE_INTEGER||-9007199254740991,A6=Number.MAX_SAFE_INTEGER||9007199254740991;function qa(t,e,n){var i=Math.cos(n),r=Math.sin(n),s=e.x,o=e.y;return{x:s+i*(t.x-s)-r*(t.y-o),y:o+r*(t.x-s)+i*(t.y-o)}}function Y1(t,e){var n=A6,i=N6,r=e.origin,s,o,a,l,c;for(s=0;s<t.length;++s)o=t[s],a=o.x-r.x,l=o.y-r.y,c=e.vx*a+e.vy*l,n=Math.min(n,c),i=Math.max(i,c);return{min:n,max:i}}function th(t,e){var n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);return{vx:(e.x-t.x)/r,vy:(e.y-t.y)/r,origin:t,ln:r}}var D6=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};zs(D6.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,n){this._rotation=n,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,n=1,i=e._rect;return t=qa(t,e.center(),-e._rotation),!(t.x<i.x-n||t.y<i.y-n||t.x>i.x+i.w+n*2||t.y>i.y+i.h+n*2)},intersects:function(t){var e=this._points(),n=t._points(),i=[th(e[0],e[1]),th(e[0],e[3])],r,s,o;for(this._rotation!==t._rotation&&i.push(th(n[0],n[1]),th(n[0],n[3])),r=0;r<i.length;++r)if(s=Y1(e,i[r]),o=Y1(n,i[r]),s.max<o.min||o.max<s.min)return!1;return!0},_points:function(){var t=this,e=t._rect,n=t._rotation,i=t.center();return[qa({x:e.x,y:e.y},i,n),qa({x:e.x+e.w,y:e.y},i,n),qa({x:e.x+e.w,y:e.y+e.h},i,n),qa({x:e.x,y:e.y+e.h},i,n)]}});const P6=({data:t})=>{const e={};t.forEach(i=>{if(i.EventoPagado==="Si"&&i.hasOwnProperty("EventoMedioPago")&&i.hasOwnProperty("EventoRecibePago")&&i.EventoMedioPago&&i.EventoRecibePago&&i.EventoMedioPago!=="Undefined"&&i.EventoRecibePago!=="Seleccione"&&i.EventoMedioPago!=="Undefined"&&i.EventoRecibePago!=="Seleccione"&&i.EventoMedioPago!==null&&i.EventoRecibePago!==null){const r=i.EventoRecibePago,s=i.EventoMedioPago;e[r]=e[r]||{},e[r][s]=(e[r][s]||0)+5e3}});const n=Array.from(new Set(t.map(i=>i.EventoMedioPago))).filter(i=>i!=="Undefined"&&i!==""&&i!=="undefined"&&i!=="Seleccione"&&i!==null);return _.jsx("div",{children:_.jsxs("table",{children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:"Recibe"}),n.map(i=>_.jsx("th",{children:i},i)),_.jsx("th",{children:"Total"})]})}),_.jsxs("tbody",{children:[Object.entries(e).map(([i,r])=>_.jsxs("tr",{className:"detail-detail",children:[_.jsx("td",{children:i}),n.map(s=>_.jsx("td",{children:r[s]||0},s)),_.jsx("td",{children:Object.values(r).reduce((s,o)=>s+o,0)||0})]},i)),_.jsxs("tr",{children:[_.jsx("td",{children:_.jsx("strong",{children:"Total"})}),n.map(i=>_.jsx("td",{className:"detail-detail",children:_.jsx("strong",{children:Object.values(e).reduce((r,s)=>r+(s[i]||0),0)||0})},i)),_.jsx("td",{children:_.jsx("strong",{children:Object.values(e).reduce((i,r)=>i+Object.values(r).reduce((s,o)=>s+o,0),0)||0})})]})]})]})})},M6=({props:t})=>{const{client:e}=D.useContext(pv),{user:n}=D.useContext(fv),[i,r]=D.useState("");D.useState([]);const[s,o]=D.useState([]),[a,l]=D.useState([]);D.useEffect(()=>{i&&u()},[i]);const c=f=>{r(f.target.value)},u=async()=>{try{if(i!==null&&i!==""){const g=await Mt.collection(`${i}`).get();if(g.empty)az(`Sin registros para el evento: ${i}`);else{const y=g.docs.map(w=>({id:w.id,...w.data()})).filter(w=>w.EventoEstado!=="eliminado");y.sort((w,p)=>w.Rut.localeCompare(p.Rut)),o(y),console.log("datos guardados localmente"),l(y)}}}catch(f){console.error("Error fetching data:",f)}},h=f=>{const g=f.target.value;if(g===null||g==="")console.log("Query Rut, Nombre Apellido Triggered"),l(s);else{const y=s.filter(w=>["Rut","Nombres","ApellidoMaterno","ApellidoPaterno"].some(m=>{const v=w[m];return typeof v=="string"&&v.toLowerCase().includes(g.toLowerCase())}));l(y)}},d=f=>{const g=f.target.value;if(console.log(g),g==="todos")l(s);else{const y=s.filter(w=>["EventoEstado","EventoPagado"].some(m=>{const v=w[m];return typeof v=="string"&&v.toLowerCase().includes(g.toLowerCase())}));l(y)}};return _.jsxs("main",{className:"container text-center",children:[_.jsx("div",{className:"container text-center vista_header",children:_.jsx("h4",{children:"Vista general del evento"})}),_.jsxs("section",{className:"attendance_section",children:[s!=null?_.jsx(_.Fragment,{children:_.jsxs("section",{className:"attendance_dashboard",children:[_.jsx("div",{className:"att-box att_present",children:_.jsx(cz,{attendanceData:s})}),_.jsx("div",{className:"att-box att_present",children:_.jsx(uz,{attendanceData:s})}),_.jsx("div",{className:"att-box att_present",children:_.jsx(hz,{attendanceData:s})}),_.jsx("div",{className:"att-box hidable att_total2",children:_.jsx(P6,{data:s})})]})}):[],_.jsxs("section",{className:"attendance_dashboard",children:[_.jsx("div",{className:"attendance-selectors",children:n?_.jsxs("select",{defaultValue:"Seleccione",onChange:c,className:"col form-select","aria-label":"Default select example",children:[_.jsx("option",{disabled:!0,children:"Seleccione"}),e.ClientEvent.map(f=>_.jsx("option",{value:f,children:f}))]}):[]}),_.jsx("div",{className:"attendance-selectors",children:_.jsxs("select",{defaultValue:"Todos",onChange:d,className:"col form-select","aria-label":"Default select example",children:[_.jsxs("option",{value:"todos",children:[" ","Mostrando -",">"," Todos los registros"]}),_.jsxs("option",{value:"presente",children:["Mostrando -",">"," Presentes"]}),_.jsxs("option",{value:"Inscrito",children:["Mostrando -",">"," Pendientes"]})]})}),_.jsx("div",{className:"attendance-selectors",children:_.jsx("form",{className:"d-flex",role:"search",children:_.jsx("input",{className:"form-control me-2",onChange:h,type:"search",placeholder:"Buscar por Rut, Nombres o Apellidos","aria-label":"Search"})})})]})]}),_.jsx("section",{className:"table_seccion",children:_.jsxs("table",{className:"table table-striped table-sm",children:[_.jsx("thead",{className:"table_head",children:_.jsxs("tr",{children:[_.jsx("th",{children:"Rut"}),_.jsx("th",{children:"Nombres"}),_.jsx("th",{children:"Apellidos"}),_.jsx("th",{className:"hidable",children:"Fecha Nac."}),_.jsx("th",{className:"hidable",children:"Iglesia"}),_.jsx("th",{children:"Staff?"}),_.jsx("th",{children:"Presente"}),_.jsx("th",{children:"Almuerzo Pagado? "}),_.jsx("th",{children:"Almuerzo Entregado? "})]})}),_.jsx("tbody",{className:"table_body",children:a.map(f=>_.jsx(lz,{setAttendanceStatus:o,setDataTable:l,DBEvento:i,attendanceData:f},f.id))})]})})]})},O6=()=>{const t="BDGeneralIglesia",e="L&R Libres en Espiritu",n={Rut:"",Nombres:"",ApellidoPaterno:"",ApellidoMaterno:"",FechaNacimiento:"",NumeroContacto:"",DV:"",email:"",Direccion:"",EventoEstado:"Inscrito",esStaff:"No",staff:"Participante",iglesiaVisita:"Iver Central (La Estancilla)",encabezado:"Levántate y Resplandece",lema:"Libres en Espíritu",invitacion:"Por favor reserva tu lugar ingresando tus datos aquí"},[i,r]=D.useState(n);D.useEffect(()=>{r(n)},[]);const[s,o]=D.useState([]),[a,l]=D.useState(!1),[c,u]=D.useState(!1),h=()=>{Mt.collection(`${e}`).where("Rut","==",`${i.Rut}`).limit(1).get().then(y=>{y.empty?(u(!0),Mt.collection(`${t}`).where("Rut","==",`${i.Rut}`).limit(1).get().then(p=>{if(p.empty)l(!1);else{l(!0);const m=p.docs[0].data();r({...m,esStaff:"No",staff:"Participante"})}})):(swal("Ya está Inscrito","Puede estar tranquil@, ya está inscrit@ para este evento","success"),o([]),r(n))})};D.useEffect(()=>{i.Rut.length===8||i.Rut.length===7&&parseInt(i.Rut.charAt(0))>4?h():(o([]),u(!1))},[i.Rut]);const d=async g=>{g.preventDefault(),a===!0?await Mt.collection(`${e}`).add(i):(await Mt.collection(`${t}`).add(i),await Mt.collection(`${e}`).add(i)),o([]),u(!1),r(n),swal("Inscripción exitosa",`${i.Nombres} estaremos esperándote `,"success"),r(n)},f=({target:g})=>{r({...i,[g.name]:g.value,EventoEstado:"Inscrito",timestamp:pa.firestore.FieldValue.serverTimestamp()})};return _.jsx(_.Fragment,{children:_.jsxs("section",{className:"container-fluid d-flex flex-column text-center",children:[_.jsx("div",{className:"container",children:_.jsx("img",{src:"/img-lyr-sinlimites.jpeg",alt:"Imagen-Contacto"})}),_.jsx("div",{className:"container-fluid",children:_.jsx("form",{children:_.jsxs("div",{className:"mb-4 text-center",children:[_.jsx("h4",{className:"form-header",children:n.encabezado}),_.jsx("h3",{className:"form-idea",children:n.lema}),_.jsx("p",{className:"form-invite",children:n.invitacion}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"Rut",className:"form-label",children:"Rut"}),_.jsx("input",{name:"Rut",maxLength:"8",onChange:f,value:i.Rut,type:"text",className:"form-control",id:"inputContactName","aria-describedby":"inputName",required:!0}),_.jsx("p",{children:_.jsx("i",{children:"antes del dígito verificador: 12345678"})})]}),c===!0?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"Nombres",className:"form-label",children:"Nombre Completo"}),_.jsx("input",{name:"Nombres",onChange:f,value:i.Nombres,type:"text",className:"form-control",id:"inputContactName","aria-describedby":"inputName",required:!0})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"ApellidoPaterno",className:"form-label",children:"Apellidos"}),_.jsx("input",{name:"ApellidoPaterno",onChange:f,value:i.ApellidoPaterno,type:"text",className:"form-control",id:"inputContactName","aria-describedby":"inputName",required:!0})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"NumeroContacto",className:"form-label",children:"Teléfono de contacto"}),_.jsx("input",{name:"NumeroContacto",onChange:f,value:i.NumeroContacto,type:"phone",className:"form-control",id:"inputContactPhone","aria-describedby":"inputPhone"})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"FechaNacimiento",className:"form-label",children:"Fecha de nacimiento"}),_.jsx("input",{name:"FechaNacimiento",onChange:f,value:i.FechaNacimiento,type:"date",className:"form-control",id:"inputContactMail","aria-describedby":"inputMail"})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"inputHorarioLlegada",className:"form-label",children:"¿En que horario llegarás?"}),_.jsxs("select",{defaultValue:"Seleccione",name:"Almuerzo",onChange:f,id:"inputHorarioLlegada",className:"form-control",children:[_.jsx("option",{disabled:!0,children:"Seleccione"}),_.jsx("option",{value:"Si",children:" Estaré desde el comienzo "}),_.jsx("option",{value:"No",children:" Llegaré después de almuerzo"})]})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"inputContactState",className:"form-label",children:"¿Desde dónde nos visitas?"}),_.jsxs("select",{defaultValue:"Seleccione",name:"iglesiaVisita",onChange:f,id:"inputContactState",className:"form-control",children:[_.jsx("option",{disabled:!0,children:"Seleccione"}),_.jsx("option",{children:" Iver Central (La Estancilla)"}),_.jsx("option",{children:" Iver Nancagua"}),_.jsx("option",{children:" Iver Curicó"}),_.jsx("option",{children:" Iver San Clemente"}),_.jsx("option",{children:" Iver Talcahuano"}),_.jsx("option",{children:" Iver La Calera"}),_.jsx("option",{children:" No soy parte de Iver "})]})]}),i.iglesiaVisita==="IverChile"?_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"inputStaff",className:"form-label",children:"¿Es parte de algún Staff?"}),_.jsxs("select",{defaultValue:"Seleccione",name:"esStaff",onChange:f,id:"inputStaff",className:"form-control",children:[_.jsx("option",{disabled:!0,children:"Seleccione"}),_.jsx("option",{children:" Si  "}),_.jsx("option",{children:" No  "})]})]}):[],_.jsx("div",{className:"form-input",children:i.iglesiaVisita==="IverChile"&i.esStaff==="Si"?_.jsxs(_.Fragment,{children:[_.jsx("label",{htmlFor:"inputStaff",className:"form-label",children:"¿Qué Staff integra?"}),_.jsxs("select",{defaultValue:"Seleccione",name:"staff",onChange:f,id:"inputStaff",className:"form-control",children:[_.jsx("option",{disabled:!0,children:"Seleccione"}),_.jsx("option",{children:" Media "}),_.jsx("option",{children:" Cocina "}),_.jsx("option",{children:" Aseo "}),_.jsx("option",{children:" Seguridad "}),_.jsx("option",{children:" Otro "})]})]}):[]}),_.jsx("div",{className:"d-grid gap-2 col-6 mx-auto",children:i.Rut&&i.FechaNacimiento&&i.Nombres&&i.NumeroContacto&&i.iglesiaVisita?_.jsx(_.Fragment,{children:_.jsx("button",{type:"submit",onClick:d,className:"btn btn-success btn-registrarme",children:"Enviar"})}):[]})]}):[]]})})})]})})},R6=()=>{const t="BDGeneralIglesia",e="CampamentoJuvenil",i={Rut:"",Nombres:"",ApellidoPaterno:"",ApellidoMaterno:"",FechaNacimiento:"",NumeroContacto:"",Accepted:!1,DV:"",email:"",Direccion:"",EventoEstado:"Inscrito",esStaff:"No",staff:"Participante",iglesiaVisita:"IverChile",encabezado:e,lema:"Somos un ejercito",invitacion:"Por favor reserva tu lugar ingresando tus datos aquí"},[r,s]=D.useState(i);D.useEffect(()=>{s(i)},[]);const[o,a]=D.useState([]),[l,c]=D.useState(!1),[u,h]=D.useState(!1),d=()=>{Mt.collection(`${e}`).where("Rut","==",`${r.Rut}`).limit(1).get().then(w=>{w.empty?(h(!0),Mt.collection(`${t}`).where("Rut","==",`${r.Rut}`).limit(1).get().then(m=>{if(m.empty)c(!1);else{c(!0);const v=m.docs[0].data();s({...v,esStaff:"No",staff:"Participante"})}})):(swal("Ya está Inscrito","Puede estar tranquil@, ya está inscrit@ para este evento","success"),a([]),s(i))})};D.useEffect(()=>{r.Rut.length===8||r.Rut.length===7&parseInt(r.Rut.charAt(0))>4?d():(a([]),h(!1))},[r.Rut]);const f=async y=>{y.preventDefault(),l===!0?await Mt.collection(`${e}`).add(r):(await Mt.collection(`${t}`).add(r),await Mt.collection(`${e}`).add(r)),a([]),h(!1),s(i),swal("Inscripción exitosa",`${r.Nombres} estaremos esperándote `,"success"),s(i)},g=({target:y})=>{const{name:w,value:p,type:m,checked:v}=y;s(x=>({...x,[w]:m==="checkbox"?v:p,EventoEstado:"Inscrito",timestamp:pa.firestore.FieldValue.serverTimestamp()})),console.log(r)};return _.jsx(_.Fragment,{children:_.jsxs("section",{className:"container-fluid d-flex flex-column text-center",children:[_.jsx("div",{className:"container",children:_.jsx("img",{src:"/CampamentoJuvenil.jpeg",alt:"Imagen-Contacto"})}),_.jsx("div",{className:"container-fluid",children:_.jsx("form",{children:_.jsxs("div",{className:"mb-4 text-center",children:[_.jsx("h4",{className:"form-header",children:i.encabezado}),_.jsx("h3",{className:"form-idea",children:i.lema}),_.jsx("p",{className:"form-invite",children:i.invitacion}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"Rut",className:"form-label",children:"Rut"}),_.jsx("input",{name:"Rut",maxLength:"8",onChange:g,value:r.Rut,type:"text",className:"form-control",id:"inputContactName","aria-describedby":"inputName",required:!0}),_.jsx("p",{children:_.jsx("i",{children:"antes del dígito verificador: 12345678"})})]}),u===!0?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"Nombres",className:"form-label",children:"Nombre Completo"}),_.jsx("input",{name:"Nombres",onChange:g,value:r.Nombres,type:"text",className:"form-control",id:"inputContactName","aria-describedby":"inputName",required:!0})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"ApellidoPaterno",className:"form-label",children:"Apellidos"}),_.jsx("input",{name:"ApellidoPaterno",onChange:g,value:r.ApellidoPaterno,type:"text",className:"form-control",id:"inputContactName","aria-describedby":"inputName",required:!0})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"NumeroContacto",className:"form-label",children:"Teléfono de contacto"}),_.jsx("input",{name:"NumeroContacto",onChange:g,value:r.NumeroContacto,type:"phone",className:"form-control",id:"inputContactPhone","aria-describedby":"inputPhone"})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"FechaNacimiento",className:"form-label",children:"Fecha de nacimiento"}),_.jsx("input",{name:"FechaNacimiento",onChange:g,value:r.FechaNacimiento,type:"date",className:"form-control",id:"inputContactMail","aria-describedby":"inputMail"})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"inputHorarioLlegada",className:"form-label",children:"¿Cuantos días participarás?"}),_.jsxs("select",{defaultValue:"Seleccione",name:"Almuerzo",onChange:g,id:"inputHorarioLlegada",className:"form-control",children:[_.jsx("option",{disabled:!0,children:"Seleccione"}),_.jsxs("option",{value:"Solo viernes",children:[" ","Solo voy el viernes"," "]}),_.jsx("option",{value:"Ambos dias",children:" Estaré ambos días"})]})]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"inputContactState",className:"form-label",children:"¿Desde dónde nos visitas?"}),_.jsxs("select",{defaultValue:"Seleccione",name:"iglesiaVisita",onChange:g,id:"inputContactState",className:"form-control",children:[_.jsx("option",{disabled:!0,children:"Seleccione"}),_.jsx("option",{children:" IverChile"}),_.jsx("option",{children:" No participa en iglesias "}),_.jsx("option",{children:" Otra Iglesia "})]})]}),r.iglesiaVisita==="IverChile"?_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"inputStaff",className:"form-label",children:"¿Es parte de algún Staff?"}),_.jsxs("select",{defaultValue:"Seleccione",name:"esStaff",onChange:g,id:"inputStaff",className:"form-control",children:[_.jsx("option",{disabled:!0,children:"Seleccione"}),_.jsx("option",{children:" Si "}),_.jsx("option",{children:" No "})]})]}):[],_.jsx("div",{className:"form-input",children:r.iglesiaVisita==="IverChile"&r.esStaff==="Si"?_.jsxs(_.Fragment,{children:[_.jsx("label",{htmlFor:"inputStaff",className:"form-label",children:"¿Qué Staff integra?"}),_.jsxs("select",{defaultValue:"Seleccione",name:"staff",onChange:g,id:"inputStaff",className:"form-control",children:[_.jsx("option",{disabled:!0,children:"Seleccione"}),_.jsx("option",{children:" Media "}),_.jsx("option",{children:" Cocina "}),_.jsx("option",{children:" Aseo "}),_.jsx("option",{children:" Seguridad "}),_.jsx("option",{children:" Otro "})]})]}):[]}),_.jsxs("div",{className:"form-input",children:[_.jsx("label",{htmlFor:"inputAccept",className:"form-label",children:"¿Aceptas nuestros terminos y condiciones?"}),_.jsx("div",{class:"card",children:_.jsxs("div",{class:"card-body",children:[_.jsxs("p",{class:"card-text",children:[_.jsx("br",{}),"1) El uso de aparatos tecnológicos está prohibido (No celulares).",_.jsx("br",{}),"2) Recuerda asistir con ropa cómoda, ya que estaremos haciendo muchas actividades. (Preferencia color negro)",_.jsx("br",{}),"3) Recuerda preparar con tiempo todo el equipamiento necesario (Carpa, Colchones, Frazadas, Linternas)",_.jsx("br",{}),"4) Ven dispuesto a participar en las actividades."]}),_.jsxs("div",{className:"switch-container",children:[_.jsx("input",{type:"checkbox",className:"checkbox",id:"checkbox",name:"Accepted",onChange:g}),_.jsx("label",{className:"switch",htmlFor:"checkbox",children:_.jsx("span",{className:"slider"})})]})]})})]}),_.jsx("div",{className:"d-grid gap-2 col-6 mx-auto",children:r.Rut&&r.FechaNacimiento&&r.Nombres&&r.NumeroContacto&&r.iglesiaVisita&&r.Accepted?_.jsx(_.Fragment,{children:_.jsx("button",{type:"submit",onClick:f,className:"btn btn-success btn-registrarme",children:"Enviar"})}):[]})]}):[]]})})})]})})},L6=()=>_.jsx("div",{className:"main-container",children:_.jsxs(aO,{children:[_.jsx(zi,{path:"/",element:_.jsx(Eb,{})}),_.jsx(zi,{path:"/Home",element:_.jsx(Eb,{})}),_.jsx(zi,{path:"/Dashboard",element:_.jsx(CV,{})}),_.jsx(zi,{path:"/Attendance",element:_.jsx(M6,{})}),_.jsx(zi,{path:"/Forms",element:_.jsx(O6,{})}),_.jsx(zi,{path:"/CampamentoJuvenil",element:_.jsx(R6,{})}),_.jsx(zi,{path:"*",element:_.jsx("h1",{children:"Not Found"})})]})});function F6(){return _.jsxs(_.Fragment,{children:[_.jsx(IV,{}),_.jsx(L6,{})]})}dg.createRoot(document.getElementById("root")).render(_.jsx(aS.StrictMode,{children:_.jsx(fO,{children:_.jsx(wO,{children:_.jsx(vO,{children:_.jsx(F6,{})})})})}));
